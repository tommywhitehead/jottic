function tw(n,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();function Bm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function nw(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(r,i,o.get?o:{enumerable:!0,get:function(){return n[i]}})}),r}var cc={exports:{}},eo={},dc={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp;function rw(){if(rp)return Ae;rp=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function w(L){return L===null||typeof L!="object"?null:(L=y&&L[y]||L["@@iterator"],typeof L=="function"?L:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,E={};function P(L,z,_e){this.props=L,this.context=z,this.refs=E,this.updater=_e||R}P.prototype.isReactComponent={},P.prototype.setState=function(L,z){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,z,"setState")},P.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function D(){}D.prototype=P.prototype;function b(L,z,_e){this.props=L,this.context=z,this.refs=E,this.updater=_e||R}var A=b.prototype=new D;A.constructor=b,x(A,P.prototype),A.isPureReactComponent=!0;var C=Array.isArray,$=Object.prototype.hasOwnProperty,F={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function le(L,z,_e){var B,ee={},de=null,Ee=null;if(z!=null)for(B in z.ref!==void 0&&(Ee=z.ref),z.key!==void 0&&(de=""+z.key),z)$.call(z,B)&&!G.hasOwnProperty(B)&&(ee[B]=z[B]);var Re=arguments.length-2;if(Re===1)ee.children=_e;else if(1<Re){for(var Pe=Array(Re),st=0;st<Re;st++)Pe[st]=arguments[st+2];ee.children=Pe}if(L&&L.defaultProps)for(B in Re=L.defaultProps,Re)ee[B]===void 0&&(ee[B]=Re[B]);return{$$typeof:n,type:L,key:de,ref:Ee,props:ee,_owner:F.current}}function he(L,z){return{$$typeof:n,type:L.type,key:z,ref:L.ref,props:L.props,_owner:L._owner}}function be(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function De(L){var z={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(_e){return z[_e]})}var je=/\/+/g;function Ue(L,z){return typeof L=="object"&&L!==null&&L.key!=null?De(""+L.key):z.toString(36)}function te(L,z,_e,B,ee){var de=typeof L;(de==="undefined"||de==="boolean")&&(L=null);var Ee=!1;if(L===null)Ee=!0;else switch(de){case"string":case"number":Ee=!0;break;case"object":switch(L.$$typeof){case n:case e:Ee=!0}}if(Ee)return Ee=L,ee=ee(Ee),L=B===""?"."+Ue(Ee,0):B,C(ee)?(_e="",L!=null&&(_e=L.replace(je,"$&/")+"/"),te(ee,z,_e,"",function(st){return st})):ee!=null&&(be(ee)&&(ee=he(ee,_e+(!ee.key||Ee&&Ee.key===ee.key?"":(""+ee.key).replace(je,"$&/")+"/")+L)),z.push(ee)),1;if(Ee=0,B=B===""?".":B+":",C(L))for(var Re=0;Re<L.length;Re++){de=L[Re];var Pe=B+Ue(de,Re);Ee+=te(de,z,_e,Pe,ee)}else if(Pe=w(L),typeof Pe=="function")for(L=Pe.call(L),Re=0;!(de=L.next()).done;)de=de.value,Pe=B+Ue(de,Re++),Ee+=te(de,z,_e,Pe,ee);else if(de==="object")throw z=String(L),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return Ee}function Y(L,z,_e){if(L==null)return L;var B=[],ee=0;return te(L,B,"","",function(de){return z.call(_e,de,ee++)}),B}function ke(L){if(L._status===-1){var z=L._result;z=z(),z.then(function(_e){(L._status===0||L._status===-1)&&(L._status=1,L._result=_e)},function(_e){(L._status===0||L._status===-1)&&(L._status=2,L._result=_e)}),L._status===-1&&(L._status=0,L._result=z)}if(L._status===1)return L._result.default;throw L._result}var fe={current:null},K={transition:null},re={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:K,ReactCurrentOwner:F};function Z(){throw Error("act(...) is not supported in production builds of React.")}return Ae.Children={map:Y,forEach:function(L,z,_e){Y(L,function(){z.apply(this,arguments)},_e)},count:function(L){var z=0;return Y(L,function(){z++}),z},toArray:function(L){return Y(L,function(z){return z})||[]},only:function(L){if(!be(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ae.Component=P,Ae.Fragment=r,Ae.Profiler=o,Ae.PureComponent=b,Ae.StrictMode=i,Ae.Suspense=h,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,Ae.act=Z,Ae.cloneElement=function(L,z,_e){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var B=x({},L.props),ee=L.key,de=L.ref,Ee=L._owner;if(z!=null){if(z.ref!==void 0&&(de=z.ref,Ee=F.current),z.key!==void 0&&(ee=""+z.key),L.type&&L.type.defaultProps)var Re=L.type.defaultProps;for(Pe in z)$.call(z,Pe)&&!G.hasOwnProperty(Pe)&&(B[Pe]=z[Pe]===void 0&&Re!==void 0?Re[Pe]:z[Pe])}var Pe=arguments.length-2;if(Pe===1)B.children=_e;else if(1<Pe){Re=Array(Pe);for(var st=0;st<Pe;st++)Re[st]=arguments[st+2];B.children=Re}return{$$typeof:n,type:L.type,key:ee,ref:de,props:B,_owner:Ee}},Ae.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Ae.createElement=le,Ae.createFactory=function(L){var z=le.bind(null,L);return z.type=L,z},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(L){return{$$typeof:d,render:L}},Ae.isValidElement=be,Ae.lazy=function(L){return{$$typeof:m,_payload:{_status:-1,_result:L},_init:ke}},Ae.memo=function(L,z){return{$$typeof:g,type:L,compare:z===void 0?null:z}},Ae.startTransition=function(L){var z=K.transition;K.transition={};try{L()}finally{K.transition=z}},Ae.unstable_act=Z,Ae.useCallback=function(L,z){return fe.current.useCallback(L,z)},Ae.useContext=function(L){return fe.current.useContext(L)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(L){return fe.current.useDeferredValue(L)},Ae.useEffect=function(L,z){return fe.current.useEffect(L,z)},Ae.useId=function(){return fe.current.useId()},Ae.useImperativeHandle=function(L,z,_e){return fe.current.useImperativeHandle(L,z,_e)},Ae.useInsertionEffect=function(L,z){return fe.current.useInsertionEffect(L,z)},Ae.useLayoutEffect=function(L,z){return fe.current.useLayoutEffect(L,z)},Ae.useMemo=function(L,z){return fe.current.useMemo(L,z)},Ae.useReducer=function(L,z,_e){return fe.current.useReducer(L,z,_e)},Ae.useRef=function(L){return fe.current.useRef(L)},Ae.useState=function(L){return fe.current.useState(L)},Ae.useSyncExternalStore=function(L,z,_e){return fe.current.useSyncExternalStore(L,z,_e)},Ae.useTransition=function(){return fe.current.useTransition()},Ae.version="18.3.1",Ae}var sp;function ud(){return sp||(sp=1,dc.exports=rw()),dc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip;function sw(){if(ip)return eo;ip=1;var n=ud(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,h,g){var m,y={},w=null,R=null;g!==void 0&&(w=""+g),h.key!==void 0&&(w=""+h.key),h.ref!==void 0&&(R=h.ref);for(m in h)i.call(h,m)&&!l.hasOwnProperty(m)&&(y[m]=h[m]);if(d&&d.defaultProps)for(m in h=d.defaultProps,h)y[m]===void 0&&(y[m]=h[m]);return{$$typeof:e,type:d,key:w,ref:R,props:y,_owner:o.current}}return eo.Fragment=r,eo.jsx=c,eo.jsxs=c,eo}var op;function iw(){return op||(op=1,cc.exports=sw()),cc.exports}var ye=iw(),Va={},fc={exports:{}},Ft={},hc={exports:{}},pc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ap;function ow(){return ap||(ap=1,(function(n){function e(K,re){var Z=K.length;K.push(re);e:for(;0<Z;){var L=Z-1>>>1,z=K[L];if(0<o(z,re))K[L]=re,K[Z]=z,Z=L;else break e}}function r(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var re=K[0],Z=K.pop();if(Z!==re){K[0]=Z;e:for(var L=0,z=K.length,_e=z>>>1;L<_e;){var B=2*(L+1)-1,ee=K[B],de=B+1,Ee=K[de];if(0>o(ee,Z))de<z&&0>o(Ee,ee)?(K[L]=Ee,K[de]=Z,L=de):(K[L]=ee,K[B]=Z,L=B);else if(de<z&&0>o(Ee,Z))K[L]=Ee,K[de]=Z,L=de;else break e}}return re}function o(K,re){var Z=K.sortIndex-re.sortIndex;return Z!==0?Z:K.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var h=[],g=[],m=1,y=null,w=3,R=!1,x=!1,E=!1,P=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(K){for(var re=r(g);re!==null;){if(re.callback===null)i(g);else if(re.startTime<=K)i(g),re.sortIndex=re.expirationTime,e(h,re);else break;re=r(g)}}function C(K){if(E=!1,A(K),!x)if(r(h)!==null)x=!0,ke($);else{var re=r(g);re!==null&&fe(C,re.startTime-K)}}function $(K,re){x=!1,E&&(E=!1,D(le),le=-1),R=!0;var Z=w;try{for(A(re),y=r(h);y!==null&&(!(y.expirationTime>re)||K&&!De());){var L=y.callback;if(typeof L=="function"){y.callback=null,w=y.priorityLevel;var z=L(y.expirationTime<=re);re=n.unstable_now(),typeof z=="function"?y.callback=z:y===r(h)&&i(h),A(re)}else i(h);y=r(h)}if(y!==null)var _e=!0;else{var B=r(g);B!==null&&fe(C,B.startTime-re),_e=!1}return _e}finally{y=null,w=Z,R=!1}}var F=!1,G=null,le=-1,he=5,be=-1;function De(){return!(n.unstable_now()-be<he)}function je(){if(G!==null){var K=n.unstable_now();be=K;var re=!0;try{re=G(!0,K)}finally{re?Ue():(F=!1,G=null)}}else F=!1}var Ue;if(typeof b=="function")Ue=function(){b(je)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,Y=te.port2;te.port1.onmessage=je,Ue=function(){Y.postMessage(null)}}else Ue=function(){P(je,0)};function ke(K){G=K,F||(F=!0,Ue())}function fe(K,re){le=P(function(){K(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_continueExecution=function(){x||R||(x=!0,ke($))},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return r(h)},n.unstable_next=function(K){switch(w){case 1:case 2:case 3:var re=3;break;default:re=w}var Z=w;w=re;try{return K()}finally{w=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(K,re){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Z=w;w=K;try{return re()}finally{w=Z}},n.unstable_scheduleCallback=function(K,re,Z){var L=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?L+Z:L):Z=L,K){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=Z+z,K={id:m++,callback:re,priorityLevel:K,startTime:Z,expirationTime:z,sortIndex:-1},Z>L?(K.sortIndex=Z,e(g,K),r(h)===null&&K===r(g)&&(E?(D(le),le=-1):E=!0,fe(C,Z-L))):(K.sortIndex=z,e(h,K),x||R||(x=!0,ke($))),K},n.unstable_shouldYield=De,n.unstable_wrapCallback=function(K){var re=w;return function(){var Z=w;w=re;try{return K.apply(this,arguments)}finally{w=Z}}}})(pc)),pc}var lp;function aw(){return lp||(lp=1,hc.exports=ow()),hc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var up;function lw(){if(up)return Ft;up=1;var n=ud(),e=aw();function r(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(t,s){c(t,s),c(t+"Capture",s)}function c(t,s){for(o[t]=s,t=0;t<s.length;t++)i.add(s[t])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function w(t){return h.call(y,t)?!0:h.call(m,t)?!1:g.test(t)?y[t]=!0:(m[t]=!0,!1)}function R(t,s,a,u){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return u?!1:a!==null?!a.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function x(t,s,a,u){if(s===null||typeof s>"u"||R(t,s,a,u))return!0;if(u)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function E(t,s,a,u,f,p,v){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=u,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=t,this.type=s,this.sanitizeURL=p,this.removeEmptyString=v}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){P[t]=new E(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];P[s]=new E(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){P[t]=new E(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){P[t]=new E(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){P[t]=new E(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){P[t]=new E(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){P[t]=new E(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){P[t]=new E(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){P[t]=new E(t,5,!1,t.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function b(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(D,b);P[s]=new E(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(D,b);P[s]=new E(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(D,b);P[s]=new E(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){P[t]=new E(t,1,!1,t.toLowerCase(),null,!1,!1)}),P.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){P[t]=new E(t,1,!1,t.toLowerCase(),null,!0,!0)});function A(t,s,a,u){var f=P.hasOwnProperty(s)?P[s]:null;(f!==null?f.type!==0:u||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(x(s,a,f,u)&&(a=null),u||f===null?w(s)&&(a===null?t.removeAttribute(s):t.setAttribute(s,""+a)):f.mustUseProperty?t[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,u=f.attributeNamespace,a===null?t.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,u?t.setAttributeNS(u,s,a):t.setAttribute(s,a))))}var C=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),F=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),le=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),be=Symbol.for("react.provider"),De=Symbol.for("react.context"),je=Symbol.for("react.forward_ref"),Ue=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),ke=Symbol.for("react.lazy"),fe=Symbol.for("react.offscreen"),K=Symbol.iterator;function re(t){return t===null||typeof t!="object"?null:(t=K&&t[K]||t["@@iterator"],typeof t=="function"?t:null)}var Z=Object.assign,L;function z(t){if(L===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);L=s&&s[1]||""}return`
`+L+t}var _e=!1;function B(t,s){if(!t||_e)return"";_e=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(j){var u=j}Reflect.construct(t,[],s)}else{try{s.call()}catch(j){u=j}t.call(s.prototype)}else{try{throw Error()}catch(j){u=j}t()}}catch(j){if(j&&u&&typeof j.stack=="string"){for(var f=j.stack.split(`
`),p=u.stack.split(`
`),v=f.length-1,S=p.length-1;1<=v&&0<=S&&f[v]!==p[S];)S--;for(;1<=v&&0<=S;v--,S--)if(f[v]!==p[S]){if(v!==1||S!==1)do if(v--,S--,0>S||f[v]!==p[S]){var I=`
`+f[v].replace(" at new "," at ");return t.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",t.displayName)),I}while(1<=v&&0<=S);break}}}finally{_e=!1,Error.prepareStackTrace=a}return(t=t?t.displayName||t.name:"")?z(t):""}function ee(t){switch(t.tag){case 5:return z(t.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return t=B(t.type,!1),t;case 11:return t=B(t.type.render,!1),t;case 1:return t=B(t.type,!0),t;default:return""}}function de(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case F:return"Portal";case he:return"Profiler";case le:return"StrictMode";case Ue:return"Suspense";case te:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case De:return(t.displayName||"Context")+".Consumer";case be:return(t._context.displayName||"Context")+".Provider";case je:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Y:return s=t.displayName||null,s!==null?s:de(t.type)||"Memo";case ke:s=t._payload,t=t._init;try{return de(t(s))}catch{}}return null}function Ee(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(s);case 8:return s===le?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Re(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pe(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function st(t){var s=Pe(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),u=""+t[s];if(!t.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,p=a.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){u=""+v,p.call(this,v)}}),Object.defineProperty(t,s,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(v){u=""+v},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function rn(t){t._valueTracker||(t._valueTracker=st(t))}function jr(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return t&&(u=Pe(t)?t.checked?"true":"false":t.value),t=u,t!==a?(s.setValue(t),!0):!1}function An(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function er(t,s){var a=s.checked;return Z({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??t._wrapperState.initialChecked})}function tr(t,s){var a=s.defaultValue==null?"":s.defaultValue,u=s.checked!=null?s.checked:s.defaultChecked;a=Re(s.value!=null?s.value:a),t._wrapperState={initialChecked:u,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ms(t,s){s=s.checked,s!=null&&A(t,"checked",s,!1)}function nr(t,s){ms(t,s);var a=Re(s.value),u=s.type;if(a!=null)u==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+a):t.value!==""+a&&(t.value=""+a);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?rr(t,s.type,a):s.hasOwnProperty("defaultValue")&&rr(t,s.type,Re(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function gs(t,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var u=s.type;if(!(u!=="submit"&&u!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,a||s===t.value||(t.value=s),t.defaultValue=s}a=t.name,a!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,a!==""&&(t.name=a)}function rr(t,s,a){(s!=="number"||An(t.ownerDocument)!==t)&&(a==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+a&&(t.defaultValue=""+a))}var yn=Array.isArray;function it(t,s,a,u){if(t=t.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=s.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&u&&(t[a].defaultSelected=!0)}else{for(a=""+Re(a),s=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,u&&(t[f].defaultSelected=!0);return}s!==null||t[f].disabled||(s=t[f])}s!==null&&(s.selected=!0)}}function T(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(r(91));return Z({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function J(t,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(r(92));if(yn(a)){if(1<a.length)throw Error(r(93));a=a[0]}s=a}s==null&&(s=""),a=s}t._wrapperState={initialValue:Re(a)}}function ie(t,s){var a=Re(s.value),u=Re(s.defaultValue);a!=null&&(a=""+a,a!==t.value&&(t.value=a),s.defaultValue==null&&t.defaultValue!==a&&(t.defaultValue=a)),u!=null&&(t.defaultValue=""+u)}function ue(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function We(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function at(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?We(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nt,Bt=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,u,f){MSApp.execUnsafeLocalFunction(function(){return t(s,a,u,f)})}:t})(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Nt=Nt||document.createElement("div"),Nt.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Nt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function wt(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Rt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Je=["Webkit","ms","Moz","O"];Object.keys(Rt).forEach(function(t){Je.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Rt[s]=Rt[t]})});function Et(t,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Rt.hasOwnProperty(t)&&Rt[t]?(""+s).trim():s+"px"}function Gt(t,s){t=t.style;for(var a in s)if(s.hasOwnProperty(a)){var u=a.indexOf("--")===0,f=Et(a,s[a],u);a==="float"&&(a="cssFloat"),u?t.setProperty(a,f):t[a]=f}}var Vt=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sr(t,s){if(s){if(Vt[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(r(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(r(61))}if(s.style!=null&&typeof s.style!="object")throw Error(r(62))}}function $r(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xn=null;function wn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mr=null,sn=null,on=null;function mi(t){if(t=Mi(t)){if(typeof Mr!="function")throw Error(r(280));var s=t.stateNode;s&&(s=sa(s),Mr(t.stateNode,t.type,s))}}function Fr(t){sn?on?on.push(t):on=[t]:sn=t}function gi(){if(sn){var t=sn,s=on;if(on=sn=null,mi(t),s)for(t=0;t<s.length;t++)mi(s[t])}}function Oo(t,s){return t(s)}function vi(){}var yi=!1;function Ao(t,s,a){if(yi)return t(s,a);yi=!0;try{return Oo(t,s,a)}finally{yi=!1,(sn!==null||on!==null)&&(vi(),gi())}}function _n(t,s){var a=t.stateNode;if(a===null)return null;var u=sa(a);if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var wi=!1;if(d)try{var zr={};Object.defineProperty(zr,"passive",{get:function(){wi=!0}}),window.addEventListener("test",zr,zr),window.removeEventListener("test",zr,zr)}catch{wi=!1}function Tl(t,s,a,u,f,p,v,S,I){var j=Array.prototype.slice.call(arguments,3);try{s.apply(a,j)}catch(W){this.onError(W)}}var Br=!1,vs=null,ys=!1,_i=null,Il={onError:function(t){Br=!0,vs=t}};function Rl(t,s,a,u,f,p,v,S,I){Br=!1,vs=null,Tl.apply(Il,arguments)}function Ol(t,s,a,u,f,p,v,S,I){if(Rl.apply(this,arguments),Br){if(Br){var j=vs;Br=!1,vs=null}else throw Error(r(198));ys||(ys=!0,_i=j)}}function Pn(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function xo(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Po(t){if(Pn(t)!==t)throw Error(r(188))}function Al(t){var s=t.alternate;if(!s){if(s=Pn(t),s===null)throw Error(r(188));return s!==t?null:t}for(var a=t,u=s;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){a=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return Po(f),t;if(p===u)return Po(f),s;p=p.sibling}throw Error(r(188))}if(a.return!==u.return)a=f,u=p;else{for(var v=!1,S=f.child;S;){if(S===a){v=!0,a=f,u=p;break}if(S===u){v=!0,u=f,a=p;break}S=S.sibling}if(!v){for(S=p.child;S;){if(S===a){v=!0,a=p,u=f;break}if(S===u){v=!0,u=p,a=f;break}S=S.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==u)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:s}function Lo(t){return t=Al(t),t!==null?No(t):null}function No(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=No(t);if(s!==null)return s;t=t.sibling}return null}var Do=e.unstable_scheduleCallback,Uo=e.unstable_cancelCallback,jo=e.unstable_shouldYield,$o=e.unstable_requestPaint,Xe=e.unstable_now,Mo=e.unstable_getCurrentPriorityLevel,Vr=e.unstable_ImmediatePriority,_=e.unstable_UserBlockingPriority,M=e.unstable_NormalPriority,V=e.unstable_LowPriority,X=e.unstable_IdlePriority,Oe=null,Ie=null;function Jt(t){if(Ie&&typeof Ie.onCommitFiberRoot=="function")try{Ie.onCommitFiberRoot(Oe,t,void 0,(t.current.flags&128)===128)}catch{}}var Me=Math.clz32?Math.clz32:wv,Ln=Math.log,Pd=Math.LN2;function wv(t){return t>>>=0,t===0?32:31-(Ln(t)/Pd|0)|0}var Fo=64,zo=4194304;function Si(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bo(t,s){var a=t.pendingLanes;if(a===0)return 0;var u=0,f=t.suspendedLanes,p=t.pingedLanes,v=a&268435455;if(v!==0){var S=v&~f;S!==0?u=Si(S):(p&=v,p!==0&&(u=Si(p)))}else v=a&~f,v!==0?u=Si(v):p!==0&&(u=Si(p));if(u===0)return 0;if(s!==0&&s!==u&&(s&f)===0&&(f=u&-u,p=s&-s,f>=p||f===16&&(p&4194240)!==0))return s;if((u&4)!==0&&(u|=a&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=u;0<s;)a=31-Me(s),f=1<<a,u|=t[a],s&=~f;return u}function _v(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sv(t,s){for(var a=t.suspendedLanes,u=t.pingedLanes,f=t.expirationTimes,p=t.pendingLanes;0<p;){var v=31-Me(p),S=1<<v,I=f[v];I===-1?((S&a)===0||(S&u)!==0)&&(f[v]=_v(S,s)):I<=s&&(t.expiredLanes|=S),p&=~S}}function xl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ld(){var t=Fo;return Fo<<=1,(Fo&4194240)===0&&(Fo=64),t}function Pl(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function ki(t,s,a){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Me(s),t[s]=a}function kv(t,s){var a=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<a;){var f=31-Me(a),p=1<<f;s[f]=0,u[f]=-1,t[f]=-1,a&=~p}}function Ll(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var u=31-Me(a),f=1<<u;f&s|t[u]&s&&(t[u]|=s),a&=~f}}var $e=0;function Nd(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Dd,Nl,Ud,jd,$d,Dl=!1,Vo=[],ir=null,or=null,ar=null,Ei=new Map,bi=new Map,lr=[],Ev="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Md(t,s){switch(t){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":Ei.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":bi.delete(s.pointerId)}}function Ci(t,s,a,u,f,p){return t===null||t.nativeEvent!==p?(t={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},s!==null&&(s=Mi(s),s!==null&&Nl(s)),t):(t.eventSystemFlags|=u,s=t.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),t)}function bv(t,s,a,u,f){switch(s){case"focusin":return ir=Ci(ir,t,s,a,u,f),!0;case"dragenter":return or=Ci(or,t,s,a,u,f),!0;case"mouseover":return ar=Ci(ar,t,s,a,u,f),!0;case"pointerover":var p=f.pointerId;return Ei.set(p,Ci(Ei.get(p)||null,t,s,a,u,f)),!0;case"gotpointercapture":return p=f.pointerId,bi.set(p,Ci(bi.get(p)||null,t,s,a,u,f)),!0}return!1}function Fd(t){var s=Hr(t.target);if(s!==null){var a=Pn(s);if(a!==null){if(s=a.tag,s===13){if(s=xo(a),s!==null){t.blockedOn=s,$d(t.priority,function(){Ud(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ho(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=jl(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(a===null){a=t.nativeEvent;var u=new a.constructor(a.type,a);xn=u,a.target.dispatchEvent(u),xn=null}else return s=Mi(a),s!==null&&Nl(s),t.blockedOn=a,!1;s.shift()}return!0}function zd(t,s,a){Ho(t)&&a.delete(s)}function Cv(){Dl=!1,ir!==null&&Ho(ir)&&(ir=null),or!==null&&Ho(or)&&(or=null),ar!==null&&Ho(ar)&&(ar=null),Ei.forEach(zd),bi.forEach(zd)}function Ti(t,s){t.blockedOn===s&&(t.blockedOn=null,Dl||(Dl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Cv)))}function Ii(t){function s(f){return Ti(f,t)}if(0<Vo.length){Ti(Vo[0],t);for(var a=1;a<Vo.length;a++){var u=Vo[a];u.blockedOn===t&&(u.blockedOn=null)}}for(ir!==null&&Ti(ir,t),or!==null&&Ti(or,t),ar!==null&&Ti(ar,t),Ei.forEach(s),bi.forEach(s),a=0;a<lr.length;a++)u=lr[a],u.blockedOn===t&&(u.blockedOn=null);for(;0<lr.length&&(a=lr[0],a.blockedOn===null);)Fd(a),a.blockedOn===null&&lr.shift()}var ws=C.ReactCurrentBatchConfig,Wo=!0;function Tv(t,s,a,u){var f=$e,p=ws.transition;ws.transition=null;try{$e=1,Ul(t,s,a,u)}finally{$e=f,ws.transition=p}}function Iv(t,s,a,u){var f=$e,p=ws.transition;ws.transition=null;try{$e=4,Ul(t,s,a,u)}finally{$e=f,ws.transition=p}}function Ul(t,s,a,u){if(Wo){var f=jl(t,s,a,u);if(f===null)eu(t,s,u,Ko,a),Md(t,u);else if(bv(f,t,s,a,u))u.stopPropagation();else if(Md(t,u),s&4&&-1<Ev.indexOf(t)){for(;f!==null;){var p=Mi(f);if(p!==null&&Dd(p),p=jl(t,s,a,u),p===null&&eu(t,s,u,Ko,a),p===f)break;f=p}f!==null&&u.stopPropagation()}else eu(t,s,u,null,a)}}var Ko=null;function jl(t,s,a,u){if(Ko=null,t=wn(u),t=Hr(t),t!==null)if(s=Pn(t),s===null)t=null;else if(a=s.tag,a===13){if(t=xo(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Ko=t,null}function Bd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mo()){case Vr:return 1;case _:return 4;case M:case V:return 16;case X:return 536870912;default:return 16}default:return 16}}var ur=null,$l=null,qo=null;function Vd(){if(qo)return qo;var t,s=$l,a=s.length,u,f="value"in ur?ur.value:ur.textContent,p=f.length;for(t=0;t<a&&s[t]===f[t];t++);var v=a-t;for(u=1;u<=v&&s[a-u]===f[p-u];u++);return qo=f.slice(t,1<u?1-u:void 0)}function Go(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Jo(){return!0}function Hd(){return!1}function Ht(t){function s(a,u,f,p,v){this._reactName=a,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Jo:Hd,this.isPropagationStopped=Hd,this}return Z(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Jo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Jo)},persist:function(){},isPersistent:Jo}),s}var _s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ml=Ht(_s),Ri=Z({},_s,{view:0,detail:0}),Rv=Ht(Ri),Fl,zl,Oi,Qo=Z({},Ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oi&&(Oi&&t.type==="mousemove"?(Fl=t.screenX-Oi.screenX,zl=t.screenY-Oi.screenY):zl=Fl=0,Oi=t),Fl)},movementY:function(t){return"movementY"in t?t.movementY:zl}}),Wd=Ht(Qo),Ov=Z({},Qo,{dataTransfer:0}),Av=Ht(Ov),xv=Z({},Ri,{relatedTarget:0}),Bl=Ht(xv),Pv=Z({},_s,{animationName:0,elapsedTime:0,pseudoElement:0}),Lv=Ht(Pv),Nv=Z({},_s,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Dv=Ht(Nv),Uv=Z({},_s,{data:0}),Kd=Ht(Uv),jv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$v={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fv(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Mv[t])?!!s[t]:!1}function Vl(){return Fv}var zv=Z({},Ri,{key:function(t){if(t.key){var s=jv[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Go(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$v[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vl,charCode:function(t){return t.type==="keypress"?Go(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Go(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bv=Ht(zv),Vv=Z({},Qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qd=Ht(Vv),Hv=Z({},Ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vl}),Wv=Ht(Hv),Kv=Z({},_s,{propertyName:0,elapsedTime:0,pseudoElement:0}),qv=Ht(Kv),Gv=Z({},Qo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Jv=Ht(Gv),Qv=[9,13,27,32],Hl=d&&"CompositionEvent"in window,Ai=null;d&&"documentMode"in document&&(Ai=document.documentMode);var Yv=d&&"TextEvent"in window&&!Ai,Gd=d&&(!Hl||Ai&&8<Ai&&11>=Ai),Jd=" ",Qd=!1;function Yd(t,s){switch(t){case"keyup":return Qv.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ss=!1;function Xv(t,s){switch(t){case"compositionend":return Xd(s);case"keypress":return s.which!==32?null:(Qd=!0,Jd);case"textInput":return t=s.data,t===Jd&&Qd?null:t;default:return null}}function Zv(t,s){if(Ss)return t==="compositionend"||!Hl&&Yd(t,s)?(t=Vd(),qo=$l=ur=null,Ss=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Gd&&s.locale!=="ko"?null:s.data;default:return null}}var ey={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!ey[t.type]:s==="textarea"}function ef(t,s,a,u){Fr(u),s=ta(s,"onChange"),0<s.length&&(a=new Ml("onChange","change",null,a,u),t.push({event:a,listeners:s}))}var xi=null,Pi=null;function ty(t){wf(t,0)}function Yo(t){var s=Ts(t);if(jr(s))return t}function ny(t,s){if(t==="change")return s}var tf=!1;if(d){var Wl;if(d){var Kl="oninput"in document;if(!Kl){var nf=document.createElement("div");nf.setAttribute("oninput","return;"),Kl=typeof nf.oninput=="function"}Wl=Kl}else Wl=!1;tf=Wl&&(!document.documentMode||9<document.documentMode)}function rf(){xi&&(xi.detachEvent("onpropertychange",sf),Pi=xi=null)}function sf(t){if(t.propertyName==="value"&&Yo(Pi)){var s=[];ef(s,Pi,t,wn(t)),Ao(ty,s)}}function ry(t,s,a){t==="focusin"?(rf(),xi=s,Pi=a,xi.attachEvent("onpropertychange",sf)):t==="focusout"&&rf()}function sy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yo(Pi)}function iy(t,s){if(t==="click")return Yo(s)}function oy(t,s){if(t==="input"||t==="change")return Yo(s)}function ay(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var an=typeof Object.is=="function"?Object.is:ay;function Li(t,s){if(an(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var f=a[u];if(!h.call(s,f)||!an(t[f],s[f]))return!1}return!0}function of(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function af(t,s){var a=of(t);t=0;for(var u;a;){if(a.nodeType===3){if(u=t+a.textContent.length,t<=s&&u>=s)return{node:a,offset:s-t};t=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=of(a)}}function lf(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?lf(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function uf(){for(var t=window,s=An();s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=An(t.document)}return s}function ql(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function ly(t){var s=uf(),a=t.focusedElem,u=t.selectionRange;if(s!==a&&a&&a.ownerDocument&&lf(a.ownerDocument.documentElement,a)){if(u!==null&&ql(a)){if(s=u.start,t=u.end,t===void 0&&(t=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(t,a.value.length);else if(t=(s=a.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var f=a.textContent.length,p=Math.min(u.start,f);u=u.end===void 0?p:Math.min(u.end,f),!t.extend&&p>u&&(f=u,u=p,p=f),f=af(a,p);var v=af(a,u);f&&v&&(t.rangeCount!==1||t.anchorNode!==f.node||t.anchorOffset!==f.offset||t.focusNode!==v.node||t.focusOffset!==v.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),t.removeAllRanges(),p>u?(t.addRange(s),t.extend(v.node,v.offset)):(s.setEnd(v.node,v.offset),t.addRange(s)))}}for(s=[],t=a;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)t=s[a],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uy=d&&"documentMode"in document&&11>=document.documentMode,ks=null,Gl=null,Ni=null,Jl=!1;function cf(t,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Jl||ks==null||ks!==An(u)||(u=ks,"selectionStart"in u&&ql(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ni&&Li(Ni,u)||(Ni=u,u=ta(Gl,"onSelect"),0<u.length&&(s=new Ml("onSelect","select",null,s,a),t.push({event:s,listeners:u}),s.target=ks)))}function Xo(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Es={animationend:Xo("Animation","AnimationEnd"),animationiteration:Xo("Animation","AnimationIteration"),animationstart:Xo("Animation","AnimationStart"),transitionend:Xo("Transition","TransitionEnd")},Ql={},df={};d&&(df=document.createElement("div").style,"AnimationEvent"in window||(delete Es.animationend.animation,delete Es.animationiteration.animation,delete Es.animationstart.animation),"TransitionEvent"in window||delete Es.transitionend.transition);function Zo(t){if(Ql[t])return Ql[t];if(!Es[t])return t;var s=Es[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in df)return Ql[t]=s[a];return t}var ff=Zo("animationend"),hf=Zo("animationiteration"),pf=Zo("animationstart"),mf=Zo("transitionend"),gf=new Map,vf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cr(t,s){gf.set(t,s),l(s,[t])}for(var Yl=0;Yl<vf.length;Yl++){var Xl=vf[Yl],cy=Xl.toLowerCase(),dy=Xl[0].toUpperCase()+Xl.slice(1);cr(cy,"on"+dy)}cr(ff,"onAnimationEnd"),cr(hf,"onAnimationIteration"),cr(pf,"onAnimationStart"),cr("dblclick","onDoubleClick"),cr("focusin","onFocus"),cr("focusout","onBlur"),cr(mf,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Di));function yf(t,s,a){var u=t.type||"unknown-event";t.currentTarget=a,Ol(u,s,void 0,t),t.currentTarget=null}function wf(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var u=t[a],f=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var v=u.length-1;0<=v;v--){var S=u[v],I=S.instance,j=S.currentTarget;if(S=S.listener,I!==p&&f.isPropagationStopped())break e;yf(f,S,j),p=I}else for(v=0;v<u.length;v++){if(S=u[v],I=S.instance,j=S.currentTarget,S=S.listener,I!==p&&f.isPropagationStopped())break e;yf(f,S,j),p=I}}}if(ys)throw t=_i,ys=!1,_i=null,t}function Ke(t,s){var a=s[ou];a===void 0&&(a=s[ou]=new Set);var u=t+"__bubble";a.has(u)||(_f(s,t,2,!1),a.add(u))}function Zl(t,s,a){var u=0;s&&(u|=4),_f(a,t,u,s)}var ea="_reactListening"+Math.random().toString(36).slice(2);function Ui(t){if(!t[ea]){t[ea]=!0,i.forEach(function(a){a!=="selectionchange"&&(fy.has(a)||Zl(a,!1,t),Zl(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[ea]||(s[ea]=!0,Zl("selectionchange",!1,s))}}function _f(t,s,a,u){switch(Bd(s)){case 1:var f=Tv;break;case 4:f=Iv;break;default:f=Ul}a=f.bind(null,s,a,t),f=void 0,!wi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?t.addEventListener(s,a,{capture:!0,passive:f}):t.addEventListener(s,a,!0):f!==void 0?t.addEventListener(s,a,{passive:f}):t.addEventListener(s,a,!1)}function eu(t,s,a,u,f){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var S=u.stateNode.containerInfo;if(S===f||S.nodeType===8&&S.parentNode===f)break;if(v===4)for(v=u.return;v!==null;){var I=v.tag;if((I===3||I===4)&&(I=v.stateNode.containerInfo,I===f||I.nodeType===8&&I.parentNode===f))return;v=v.return}for(;S!==null;){if(v=Hr(S),v===null)return;if(I=v.tag,I===5||I===6){u=p=v;continue e}S=S.parentNode}}u=u.return}Ao(function(){var j=p,W=wn(a),q=[];e:{var H=gf.get(t);if(H!==void 0){var ne=Ml,oe=t;switch(t){case"keypress":if(Go(a)===0)break e;case"keydown":case"keyup":ne=Bv;break;case"focusin":oe="focus",ne=Bl;break;case"focusout":oe="blur",ne=Bl;break;case"beforeblur":case"afterblur":ne=Bl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Wd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Av;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Wv;break;case ff:case hf:case pf:ne=Lv;break;case mf:ne=qv;break;case"scroll":ne=Rv;break;case"wheel":ne=Jv;break;case"copy":case"cut":case"paste":ne=Dv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=qd}var ae=(s&4)!==0,ot=!ae&&t==="scroll",N=ae?H!==null?H+"Capture":null:H;ae=[];for(var O=j,U;O!==null;){U=O;var Q=U.stateNode;if(U.tag===5&&Q!==null&&(U=Q,N!==null&&(Q=_n(O,N),Q!=null&&ae.push(ji(O,Q,U)))),ot)break;O=O.return}0<ae.length&&(H=new ne(H,oe,null,a,W),q.push({event:H,listeners:ae}))}}if((s&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",ne=t==="mouseout"||t==="pointerout",H&&a!==xn&&(oe=a.relatedTarget||a.fromElement)&&(Hr(oe)||oe[Nn]))break e;if((ne||H)&&(H=W.window===W?W:(H=W.ownerDocument)?H.defaultView||H.parentWindow:window,ne?(oe=a.relatedTarget||a.toElement,ne=j,oe=oe?Hr(oe):null,oe!==null&&(ot=Pn(oe),oe!==ot||oe.tag!==5&&oe.tag!==6)&&(oe=null)):(ne=null,oe=j),ne!==oe)){if(ae=Wd,Q="onMouseLeave",N="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(ae=qd,Q="onPointerLeave",N="onPointerEnter",O="pointer"),ot=ne==null?H:Ts(ne),U=oe==null?H:Ts(oe),H=new ae(Q,O+"leave",ne,a,W),H.target=ot,H.relatedTarget=U,Q=null,Hr(W)===j&&(ae=new ae(N,O+"enter",oe,a,W),ae.target=U,ae.relatedTarget=ot,Q=ae),ot=Q,ne&&oe)t:{for(ae=ne,N=oe,O=0,U=ae;U;U=bs(U))O++;for(U=0,Q=N;Q;Q=bs(Q))U++;for(;0<O-U;)ae=bs(ae),O--;for(;0<U-O;)N=bs(N),U--;for(;O--;){if(ae===N||N!==null&&ae===N.alternate)break t;ae=bs(ae),N=bs(N)}ae=null}else ae=null;ne!==null&&Sf(q,H,ne,ae,!1),oe!==null&&ot!==null&&Sf(q,ot,oe,ae,!0)}}e:{if(H=j?Ts(j):window,ne=H.nodeName&&H.nodeName.toLowerCase(),ne==="select"||ne==="input"&&H.type==="file")var ce=ny;else if(Zd(H))if(tf)ce=oy;else{ce=sy;var pe=ry}else(ne=H.nodeName)&&ne.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(ce=iy);if(ce&&(ce=ce(t,j))){ef(q,ce,a,W);break e}pe&&pe(t,H,j),t==="focusout"&&(pe=H._wrapperState)&&pe.controlled&&H.type==="number"&&rr(H,"number",H.value)}switch(pe=j?Ts(j):window,t){case"focusin":(Zd(pe)||pe.contentEditable==="true")&&(ks=pe,Gl=j,Ni=null);break;case"focusout":Ni=Gl=ks=null;break;case"mousedown":Jl=!0;break;case"contextmenu":case"mouseup":case"dragend":Jl=!1,cf(q,a,W);break;case"selectionchange":if(uy)break;case"keydown":case"keyup":cf(q,a,W)}var me;if(Hl)e:{switch(t){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Ss?Yd(t,a)&&(Se="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(Gd&&a.locale!=="ko"&&(Ss||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Ss&&(me=Vd()):(ur=W,$l="value"in ur?ur.value:ur.textContent,Ss=!0)),pe=ta(j,Se),0<pe.length&&(Se=new Kd(Se,t,null,a,W),q.push({event:Se,listeners:pe}),me?Se.data=me:(me=Xd(a),me!==null&&(Se.data=me)))),(me=Yv?Xv(t,a):Zv(t,a))&&(j=ta(j,"onBeforeInput"),0<j.length&&(W=new Kd("onBeforeInput","beforeinput",null,a,W),q.push({event:W,listeners:j}),W.data=me))}wf(q,s)})}function ji(t,s,a){return{instance:t,listener:s,currentTarget:a}}function ta(t,s){for(var a=s+"Capture",u=[];t!==null;){var f=t,p=f.stateNode;f.tag===5&&p!==null&&(f=p,p=_n(t,a),p!=null&&u.unshift(ji(t,p,f)),p=_n(t,s),p!=null&&u.push(ji(t,p,f))),t=t.return}return u}function bs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sf(t,s,a,u,f){for(var p=s._reactName,v=[];a!==null&&a!==u;){var S=a,I=S.alternate,j=S.stateNode;if(I!==null&&I===u)break;S.tag===5&&j!==null&&(S=j,f?(I=_n(a,p),I!=null&&v.unshift(ji(a,I,S))):f||(I=_n(a,p),I!=null&&v.push(ji(a,I,S)))),a=a.return}v.length!==0&&t.push({event:s,listeners:v})}var hy=/\r\n?/g,py=/\u0000|\uFFFD/g;function kf(t){return(typeof t=="string"?t:""+t).replace(hy,`
`).replace(py,"")}function na(t,s,a){if(s=kf(s),kf(t)!==s&&a)throw Error(r(425))}function ra(){}var tu=null,nu=null;function ru(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var su=typeof setTimeout=="function"?setTimeout:void 0,my=typeof clearTimeout=="function"?clearTimeout:void 0,Ef=typeof Promise=="function"?Promise:void 0,gy=typeof queueMicrotask=="function"?queueMicrotask:typeof Ef<"u"?function(t){return Ef.resolve(null).then(t).catch(vy)}:su;function vy(t){setTimeout(function(){throw t})}function iu(t,s){var a=s,u=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(u===0){t.removeChild(f),Ii(s);return}u--}else a!=="$"&&a!=="$?"&&a!=="$!"||u++;a=f}while(a);Ii(s)}function dr(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function bf(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return t;s--}else a==="/$"&&s++}t=t.previousSibling}return null}var Cs=Math.random().toString(36).slice(2),Sn="__reactFiber$"+Cs,$i="__reactProps$"+Cs,Nn="__reactContainer$"+Cs,ou="__reactEvents$"+Cs,yy="__reactListeners$"+Cs,wy="__reactHandles$"+Cs;function Hr(t){var s=t[Sn];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Nn]||a[Sn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=bf(t);t!==null;){if(a=t[Sn])return a;t=bf(t)}return s}t=a,a=t.parentNode}return null}function Mi(t){return t=t[Sn]||t[Nn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ts(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function sa(t){return t[$i]||null}var au=[],Is=-1;function fr(t){return{current:t}}function qe(t){0>Is||(t.current=au[Is],au[Is]=null,Is--)}function Be(t,s){Is++,au[Is]=t.current,t.current=s}var hr={},bt=fr(hr),Dt=fr(!1),Wr=hr;function Rs(t,s){var a=t.type.contextTypes;if(!a)return hr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===s)return u.__reactInternalMemoizedMaskedChildContext;var f={},p;for(p in a)f[p]=s[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=f),f}function Ut(t){return t=t.childContextTypes,t!=null}function ia(){qe(Dt),qe(bt)}function Cf(t,s,a){if(bt.current!==hr)throw Error(r(168));Be(bt,s),Be(Dt,a)}function Tf(t,s,a){var u=t.stateNode;if(s=s.childContextTypes,typeof u.getChildContext!="function")return a;u=u.getChildContext();for(var f in u)if(!(f in s))throw Error(r(108,Ee(t)||"Unknown",f));return Z({},a,u)}function oa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hr,Wr=bt.current,Be(bt,t),Be(Dt,Dt.current),!0}function If(t,s,a){var u=t.stateNode;if(!u)throw Error(r(169));a?(t=Tf(t,s,Wr),u.__reactInternalMemoizedMergedChildContext=t,qe(Dt),qe(bt),Be(bt,t)):qe(Dt),Be(Dt,a)}var Dn=null,aa=!1,lu=!1;function Rf(t){Dn===null?Dn=[t]:Dn.push(t)}function _y(t){aa=!0,Rf(t)}function pr(){if(!lu&&Dn!==null){lu=!0;var t=0,s=$e;try{var a=Dn;for($e=1;t<a.length;t++){var u=a[t];do u=u(!0);while(u!==null)}Dn=null,aa=!1}catch(f){throw Dn!==null&&(Dn=Dn.slice(t+1)),Do(Vr,pr),f}finally{$e=s,lu=!1}}return null}var Os=[],As=0,la=null,ua=0,Qt=[],Yt=0,Kr=null,Un=1,jn="";function qr(t,s){Os[As++]=ua,Os[As++]=la,la=t,ua=s}function Of(t,s,a){Qt[Yt++]=Un,Qt[Yt++]=jn,Qt[Yt++]=Kr,Kr=t;var u=Un;t=jn;var f=32-Me(u)-1;u&=~(1<<f),a+=1;var p=32-Me(s)+f;if(30<p){var v=f-f%5;p=(u&(1<<v)-1).toString(32),u>>=v,f-=v,Un=1<<32-Me(s)+f|a<<f|u,jn=p+t}else Un=1<<p|a<<f|u,jn=t}function uu(t){t.return!==null&&(qr(t,1),Of(t,1,0))}function cu(t){for(;t===la;)la=Os[--As],Os[As]=null,ua=Os[--As],Os[As]=null;for(;t===Kr;)Kr=Qt[--Yt],Qt[Yt]=null,jn=Qt[--Yt],Qt[Yt]=null,Un=Qt[--Yt],Qt[Yt]=null}var Wt=null,Kt=null,Qe=!1,ln=null;function Af(t,s){var a=tn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=t,s=t.deletions,s===null?(t.deletions=[a],t.flags|=16):s.push(a)}function xf(t,s){switch(t.tag){case 5:var a=t.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Wt=t,Kt=dr(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Wt=t,Kt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Kr!==null?{id:Un,overflow:jn}:null,t.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=tn(18,null,null,0),a.stateNode=s,a.return=t,t.child=a,Wt=t,Kt=null,!0):!1;default:return!1}}function du(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fu(t){if(Qe){var s=Kt;if(s){var a=s;if(!xf(t,s)){if(du(t))throw Error(r(418));s=dr(a.nextSibling);var u=Wt;s&&xf(t,s)?Af(u,a):(t.flags=t.flags&-4097|2,Qe=!1,Wt=t)}}else{if(du(t))throw Error(r(418));t.flags=t.flags&-4097|2,Qe=!1,Wt=t}}}function Pf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function ca(t){if(t!==Wt)return!1;if(!Qe)return Pf(t),Qe=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!ru(t.type,t.memoizedProps)),s&&(s=Kt)){if(du(t))throw Lf(),Error(r(418));for(;s;)Af(t,s),s=dr(s.nextSibling)}if(Pf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"){if(s===0){Kt=dr(t.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}t=t.nextSibling}Kt=null}}else Kt=Wt?dr(t.stateNode.nextSibling):null;return!0}function Lf(){for(var t=Kt;t;)t=dr(t.nextSibling)}function xs(){Kt=Wt=null,Qe=!1}function hu(t){ln===null?ln=[t]:ln.push(t)}var Sy=C.ReactCurrentBatchConfig;function Fi(t,s,a){if(t=a.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(r(309));var u=a.stateNode}if(!u)throw Error(r(147,t));var f=u,p=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===p?s.ref:(s=function(v){var S=f.refs;v===null?delete S[p]:S[p]=v},s._stringRef=p,s)}if(typeof t!="string")throw Error(r(284));if(!a._owner)throw Error(r(290,t))}return t}function da(t,s){throw t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Nf(t){var s=t._init;return s(t._payload)}function Df(t){function s(N,O){if(t){var U=N.deletions;U===null?(N.deletions=[O],N.flags|=16):U.push(O)}}function a(N,O){if(!t)return null;for(;O!==null;)s(N,O),O=O.sibling;return null}function u(N,O){for(N=new Map;O!==null;)O.key!==null?N.set(O.key,O):N.set(O.index,O),O=O.sibling;return N}function f(N,O){return N=kr(N,O),N.index=0,N.sibling=null,N}function p(N,O,U){return N.index=U,t?(U=N.alternate,U!==null?(U=U.index,U<O?(N.flags|=2,O):U):(N.flags|=2,O)):(N.flags|=1048576,O)}function v(N){return t&&N.alternate===null&&(N.flags|=2),N}function S(N,O,U,Q){return O===null||O.tag!==6?(O=sc(U,N.mode,Q),O.return=N,O):(O=f(O,U),O.return=N,O)}function I(N,O,U,Q){var ce=U.type;return ce===G?W(N,O,U.props.children,Q,U.key):O!==null&&(O.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===ke&&Nf(ce)===O.type)?(Q=f(O,U.props),Q.ref=Fi(N,O,U),Q.return=N,Q):(Q=Da(U.type,U.key,U.props,null,N.mode,Q),Q.ref=Fi(N,O,U),Q.return=N,Q)}function j(N,O,U,Q){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=ic(U,N.mode,Q),O.return=N,O):(O=f(O,U.children||[]),O.return=N,O)}function W(N,O,U,Q,ce){return O===null||O.tag!==7?(O=ts(U,N.mode,Q,ce),O.return=N,O):(O=f(O,U),O.return=N,O)}function q(N,O,U){if(typeof O=="string"&&O!==""||typeof O=="number")return O=sc(""+O,N.mode,U),O.return=N,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case $:return U=Da(O.type,O.key,O.props,null,N.mode,U),U.ref=Fi(N,null,O),U.return=N,U;case F:return O=ic(O,N.mode,U),O.return=N,O;case ke:var Q=O._init;return q(N,Q(O._payload),U)}if(yn(O)||re(O))return O=ts(O,N.mode,U,null),O.return=N,O;da(N,O)}return null}function H(N,O,U,Q){var ce=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return ce!==null?null:S(N,O,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case $:return U.key===ce?I(N,O,U,Q):null;case F:return U.key===ce?j(N,O,U,Q):null;case ke:return ce=U._init,H(N,O,ce(U._payload),Q)}if(yn(U)||re(U))return ce!==null?null:W(N,O,U,Q,null);da(N,U)}return null}function ne(N,O,U,Q,ce){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return N=N.get(U)||null,S(O,N,""+Q,ce);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case $:return N=N.get(Q.key===null?U:Q.key)||null,I(O,N,Q,ce);case F:return N=N.get(Q.key===null?U:Q.key)||null,j(O,N,Q,ce);case ke:var pe=Q._init;return ne(N,O,U,pe(Q._payload),ce)}if(yn(Q)||re(Q))return N=N.get(U)||null,W(O,N,Q,ce,null);da(O,Q)}return null}function oe(N,O,U,Q){for(var ce=null,pe=null,me=O,Se=O=0,vt=null;me!==null&&Se<U.length;Se++){me.index>Se?(vt=me,me=null):vt=me.sibling;var Ne=H(N,me,U[Se],Q);if(Ne===null){me===null&&(me=vt);break}t&&me&&Ne.alternate===null&&s(N,me),O=p(Ne,O,Se),pe===null?ce=Ne:pe.sibling=Ne,pe=Ne,me=vt}if(Se===U.length)return a(N,me),Qe&&qr(N,Se),ce;if(me===null){for(;Se<U.length;Se++)me=q(N,U[Se],Q),me!==null&&(O=p(me,O,Se),pe===null?ce=me:pe.sibling=me,pe=me);return Qe&&qr(N,Se),ce}for(me=u(N,me);Se<U.length;Se++)vt=ne(me,N,Se,U[Se],Q),vt!==null&&(t&&vt.alternate!==null&&me.delete(vt.key===null?Se:vt.key),O=p(vt,O,Se),pe===null?ce=vt:pe.sibling=vt,pe=vt);return t&&me.forEach(function(Er){return s(N,Er)}),Qe&&qr(N,Se),ce}function ae(N,O,U,Q){var ce=re(U);if(typeof ce!="function")throw Error(r(150));if(U=ce.call(U),U==null)throw Error(r(151));for(var pe=ce=null,me=O,Se=O=0,vt=null,Ne=U.next();me!==null&&!Ne.done;Se++,Ne=U.next()){me.index>Se?(vt=me,me=null):vt=me.sibling;var Er=H(N,me,Ne.value,Q);if(Er===null){me===null&&(me=vt);break}t&&me&&Er.alternate===null&&s(N,me),O=p(Er,O,Se),pe===null?ce=Er:pe.sibling=Er,pe=Er,me=vt}if(Ne.done)return a(N,me),Qe&&qr(N,Se),ce;if(me===null){for(;!Ne.done;Se++,Ne=U.next())Ne=q(N,Ne.value,Q),Ne!==null&&(O=p(Ne,O,Se),pe===null?ce=Ne:pe.sibling=Ne,pe=Ne);return Qe&&qr(N,Se),ce}for(me=u(N,me);!Ne.done;Se++,Ne=U.next())Ne=ne(me,N,Se,Ne.value,Q),Ne!==null&&(t&&Ne.alternate!==null&&me.delete(Ne.key===null?Se:Ne.key),O=p(Ne,O,Se),pe===null?ce=Ne:pe.sibling=Ne,pe=Ne);return t&&me.forEach(function(ew){return s(N,ew)}),Qe&&qr(N,Se),ce}function ot(N,O,U,Q){if(typeof U=="object"&&U!==null&&U.type===G&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case $:e:{for(var ce=U.key,pe=O;pe!==null;){if(pe.key===ce){if(ce=U.type,ce===G){if(pe.tag===7){a(N,pe.sibling),O=f(pe,U.props.children),O.return=N,N=O;break e}}else if(pe.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===ke&&Nf(ce)===pe.type){a(N,pe.sibling),O=f(pe,U.props),O.ref=Fi(N,pe,U),O.return=N,N=O;break e}a(N,pe);break}else s(N,pe);pe=pe.sibling}U.type===G?(O=ts(U.props.children,N.mode,Q,U.key),O.return=N,N=O):(Q=Da(U.type,U.key,U.props,null,N.mode,Q),Q.ref=Fi(N,O,U),Q.return=N,N=Q)}return v(N);case F:e:{for(pe=U.key;O!==null;){if(O.key===pe)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){a(N,O.sibling),O=f(O,U.children||[]),O.return=N,N=O;break e}else{a(N,O);break}else s(N,O);O=O.sibling}O=ic(U,N.mode,Q),O.return=N,N=O}return v(N);case ke:return pe=U._init,ot(N,O,pe(U._payload),Q)}if(yn(U))return oe(N,O,U,Q);if(re(U))return ae(N,O,U,Q);da(N,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,O!==null&&O.tag===6?(a(N,O.sibling),O=f(O,U),O.return=N,N=O):(a(N,O),O=sc(U,N.mode,Q),O.return=N,N=O),v(N)):a(N,O)}return ot}var Ps=Df(!0),Uf=Df(!1),fa=fr(null),ha=null,Ls=null,pu=null;function mu(){pu=Ls=ha=null}function gu(t){var s=fa.current;qe(fa),t._currentValue=s}function vu(t,s,a){for(;t!==null;){var u=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),t===a)break;t=t.return}}function Ns(t,s){ha=t,pu=Ls=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(jt=!0),t.firstContext=null)}function Xt(t){var s=t._currentValue;if(pu!==t)if(t={context:t,memoizedValue:s,next:null},Ls===null){if(ha===null)throw Error(r(308));Ls=t,ha.dependencies={lanes:0,firstContext:t}}else Ls=Ls.next=t;return s}var Gr=null;function yu(t){Gr===null?Gr=[t]:Gr.push(t)}function jf(t,s,a,u){var f=s.interleaved;return f===null?(a.next=a,yu(s)):(a.next=f.next,f.next=a),s.interleaved=a,$n(t,u)}function $n(t,s){t.lanes|=s;var a=t.alternate;for(a!==null&&(a.lanes|=s),a=t,t=t.return;t!==null;)t.childLanes|=s,a=t.alternate,a!==null&&(a.childLanes|=s),a=t,t=t.return;return a.tag===3?a.stateNode:null}var mr=!1;function wu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $f(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mn(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function gr(t,s,a){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Le&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,$n(t,a)}return f=u.interleaved,f===null?(s.next=s,yu(u)):(s.next=f.next,f.next=s),u.interleaved=s,$n(t,a)}function pa(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var u=s.lanes;u&=t.pendingLanes,a|=u,s.lanes=a,Ll(t,a)}}function Mf(t,s){var a=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?f=p=v:p=p.next=v,a=a.next}while(a!==null);p===null?f=p=s:p=p.next=s}else f=p=s;a={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}function ma(t,s,a,u){var f=t.updateQueue;mr=!1;var p=f.firstBaseUpdate,v=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var I=S,j=I.next;I.next=null,v===null?p=j:v.next=j,v=I;var W=t.alternate;W!==null&&(W=W.updateQueue,S=W.lastBaseUpdate,S!==v&&(S===null?W.firstBaseUpdate=j:S.next=j,W.lastBaseUpdate=I))}if(p!==null){var q=f.baseState;v=0,W=j=I=null,S=p;do{var H=S.lane,ne=S.eventTime;if((u&H)===H){W!==null&&(W=W.next={eventTime:ne,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var oe=t,ae=S;switch(H=s,ne=a,ae.tag){case 1:if(oe=ae.payload,typeof oe=="function"){q=oe.call(ne,q,H);break e}q=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=ae.payload,H=typeof oe=="function"?oe.call(ne,q,H):oe,H==null)break e;q=Z({},q,H);break e;case 2:mr=!0}}S.callback!==null&&S.lane!==0&&(t.flags|=64,H=f.effects,H===null?f.effects=[S]:H.push(S))}else ne={eventTime:ne,lane:H,tag:S.tag,payload:S.payload,callback:S.callback,next:null},W===null?(j=W=ne,I=q):W=W.next=ne,v|=H;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;H=S,S=H.next,H.next=null,f.lastBaseUpdate=H,f.shared.pending=null}}while(!0);if(W===null&&(I=q),f.baseState=I,f.firstBaseUpdate=j,f.lastBaseUpdate=W,s=f.shared.interleaved,s!==null){f=s;do v|=f.lane,f=f.next;while(f!==s)}else p===null&&(f.shared.lanes=0);Yr|=v,t.lanes=v,t.memoizedState=q}}function Ff(t,s,a){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var u=t[s],f=u.callback;if(f!==null){if(u.callback=null,u=a,typeof f!="function")throw Error(r(191,f));f.call(u)}}}var zi={},kn=fr(zi),Bi=fr(zi),Vi=fr(zi);function Jr(t){if(t===zi)throw Error(r(174));return t}function _u(t,s){switch(Be(Vi,s),Be(Bi,t),Be(kn,zi),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:at(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=at(s,t)}qe(kn),Be(kn,s)}function Ds(){qe(kn),qe(Bi),qe(Vi)}function zf(t){Jr(Vi.current);var s=Jr(kn.current),a=at(s,t.type);s!==a&&(Be(Bi,t),Be(kn,a))}function Su(t){Bi.current===t&&(qe(kn),qe(Bi))}var Ze=fr(0);function ga(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ku=[];function Eu(){for(var t=0;t<ku.length;t++)ku[t]._workInProgressVersionPrimary=null;ku.length=0}var va=C.ReactCurrentDispatcher,bu=C.ReactCurrentBatchConfig,Qr=0,et=null,ct=null,mt=null,ya=!1,Hi=!1,Wi=0,ky=0;function Ct(){throw Error(r(321))}function Cu(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!an(t[a],s[a]))return!1;return!0}function Tu(t,s,a,u,f,p){if(Qr=p,et=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,va.current=t===null||t.memoizedState===null?Ty:Iy,t=a(u,f),Hi){p=0;do{if(Hi=!1,Wi=0,25<=p)throw Error(r(301));p+=1,mt=ct=null,s.updateQueue=null,va.current=Ry,t=a(u,f)}while(Hi)}if(va.current=Sa,s=ct!==null&&ct.next!==null,Qr=0,mt=ct=et=null,ya=!1,s)throw Error(r(300));return t}function Iu(){var t=Wi!==0;return Wi=0,t}function En(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?et.memoizedState=mt=t:mt=mt.next=t,mt}function Zt(){if(ct===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var s=mt===null?et.memoizedState:mt.next;if(s!==null)mt=s,ct=t;else{if(t===null)throw Error(r(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},mt===null?et.memoizedState=mt=t:mt=mt.next=t}return mt}function Ki(t,s){return typeof s=="function"?s(t):s}function Ru(t){var s=Zt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var u=ct,f=u.baseQueue,p=a.pending;if(p!==null){if(f!==null){var v=f.next;f.next=p.next,p.next=v}u.baseQueue=f=p,a.pending=null}if(f!==null){p=f.next,u=u.baseState;var S=v=null,I=null,j=p;do{var W=j.lane;if((Qr&W)===W)I!==null&&(I=I.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),u=j.hasEagerState?j.eagerState:t(u,j.action);else{var q={lane:W,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};I===null?(S=I=q,v=u):I=I.next=q,et.lanes|=W,Yr|=W}j=j.next}while(j!==null&&j!==p);I===null?v=u:I.next=S,an(u,s.memoizedState)||(jt=!0),s.memoizedState=u,s.baseState=v,s.baseQueue=I,a.lastRenderedState=u}if(t=a.interleaved,t!==null){f=t;do p=f.lane,et.lanes|=p,Yr|=p,f=f.next;while(f!==t)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Ou(t){var s=Zt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var u=a.dispatch,f=a.pending,p=s.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do p=t(p,v.action),v=v.next;while(v!==f);an(p,s.memoizedState)||(jt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,u]}function Bf(){}function Vf(t,s){var a=et,u=Zt(),f=s(),p=!an(u.memoizedState,f);if(p&&(u.memoizedState=f,jt=!0),u=u.queue,Au(Kf.bind(null,a,u,t),[t]),u.getSnapshot!==s||p||mt!==null&&mt.memoizedState.tag&1){if(a.flags|=2048,qi(9,Wf.bind(null,a,u,f,s),void 0,null),gt===null)throw Error(r(349));(Qr&30)!==0||Hf(a,s,f)}return f}function Hf(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=et.updateQueue,s===null?(s={lastEffect:null,stores:null},et.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Wf(t,s,a,u){s.value=a,s.getSnapshot=u,qf(s)&&Gf(t)}function Kf(t,s,a){return a(function(){qf(s)&&Gf(t)})}function qf(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!an(t,a)}catch{return!0}}function Gf(t){var s=$n(t,1);s!==null&&fn(s,t,1,-1)}function Jf(t){var s=En();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:t},s.queue=t,t=t.dispatch=Cy.bind(null,et,t),[s.memoizedState,t]}function qi(t,s,a,u){return t={tag:t,create:s,destroy:a,deps:u,next:null},s=et.updateQueue,s===null?(s={lastEffect:null,stores:null},et.updateQueue=s,s.lastEffect=t.next=t):(a=s.lastEffect,a===null?s.lastEffect=t.next=t:(u=a.next,a.next=t,t.next=u,s.lastEffect=t)),t}function Qf(){return Zt().memoizedState}function wa(t,s,a,u){var f=En();et.flags|=t,f.memoizedState=qi(1|s,a,void 0,u===void 0?null:u)}function _a(t,s,a,u){var f=Zt();u=u===void 0?null:u;var p=void 0;if(ct!==null){var v=ct.memoizedState;if(p=v.destroy,u!==null&&Cu(u,v.deps)){f.memoizedState=qi(s,a,p,u);return}}et.flags|=t,f.memoizedState=qi(1|s,a,p,u)}function Yf(t,s){return wa(8390656,8,t,s)}function Au(t,s){return _a(2048,8,t,s)}function Xf(t,s){return _a(4,2,t,s)}function Zf(t,s){return _a(4,4,t,s)}function eh(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function th(t,s,a){return a=a!=null?a.concat([t]):null,_a(4,4,eh.bind(null,s,t),a)}function xu(){}function nh(t,s){var a=Zt();s=s===void 0?null:s;var u=a.memoizedState;return u!==null&&s!==null&&Cu(s,u[1])?u[0]:(a.memoizedState=[t,s],t)}function rh(t,s){var a=Zt();s=s===void 0?null:s;var u=a.memoizedState;return u!==null&&s!==null&&Cu(s,u[1])?u[0]:(t=t(),a.memoizedState=[t,s],t)}function sh(t,s,a){return(Qr&21)===0?(t.baseState&&(t.baseState=!1,jt=!0),t.memoizedState=a):(an(a,s)||(a=Ld(),et.lanes|=a,Yr|=a,t.baseState=!0),s)}function Ey(t,s){var a=$e;$e=a!==0&&4>a?a:4,t(!0);var u=bu.transition;bu.transition={};try{t(!1),s()}finally{$e=a,bu.transition=u}}function ih(){return Zt().memoizedState}function by(t,s,a){var u=_r(t);if(a={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null},oh(t))ah(s,a);else if(a=jf(t,s,a,u),a!==null){var f=At();fn(a,t,u,f),lh(a,s,u)}}function Cy(t,s,a){var u=_r(t),f={lane:u,action:a,hasEagerState:!1,eagerState:null,next:null};if(oh(t))ah(s,f);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var v=s.lastRenderedState,S=p(v,a);if(f.hasEagerState=!0,f.eagerState=S,an(S,v)){var I=s.interleaved;I===null?(f.next=f,yu(s)):(f.next=I.next,I.next=f),s.interleaved=f;return}}catch{}finally{}a=jf(t,s,f,u),a!==null&&(f=At(),fn(a,t,u,f),lh(a,s,u))}}function oh(t){var s=t.alternate;return t===et||s!==null&&s===et}function ah(t,s){Hi=ya=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function lh(t,s,a){if((a&4194240)!==0){var u=s.lanes;u&=t.pendingLanes,a|=u,s.lanes=a,Ll(t,a)}}var Sa={readContext:Xt,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},Ty={readContext:Xt,useCallback:function(t,s){return En().memoizedState=[t,s===void 0?null:s],t},useContext:Xt,useEffect:Yf,useImperativeHandle:function(t,s,a){return a=a!=null?a.concat([t]):null,wa(4194308,4,eh.bind(null,s,t),a)},useLayoutEffect:function(t,s){return wa(4194308,4,t,s)},useInsertionEffect:function(t,s){return wa(4,2,t,s)},useMemo:function(t,s){var a=En();return s=s===void 0?null:s,t=t(),a.memoizedState=[t,s],t},useReducer:function(t,s,a){var u=En();return s=a!==void 0?a(s):s,u.memoizedState=u.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},u.queue=t,t=t.dispatch=by.bind(null,et,t),[u.memoizedState,t]},useRef:function(t){var s=En();return t={current:t},s.memoizedState=t},useState:Jf,useDebugValue:xu,useDeferredValue:function(t){return En().memoizedState=t},useTransition:function(){var t=Jf(!1),s=t[0];return t=Ey.bind(null,t[1]),En().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,a){var u=et,f=En();if(Qe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),gt===null)throw Error(r(349));(Qr&30)!==0||Hf(u,s,a)}f.memoizedState=a;var p={value:a,getSnapshot:s};return f.queue=p,Yf(Kf.bind(null,u,p,t),[t]),u.flags|=2048,qi(9,Wf.bind(null,u,p,a,s),void 0,null),a},useId:function(){var t=En(),s=gt.identifierPrefix;if(Qe){var a=jn,u=Un;a=(u&~(1<<32-Me(u)-1)).toString(32)+a,s=":"+s+"R"+a,a=Wi++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=ky++,s=":"+s+"r"+a.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},Iy={readContext:Xt,useCallback:nh,useContext:Xt,useEffect:Au,useImperativeHandle:th,useInsertionEffect:Xf,useLayoutEffect:Zf,useMemo:rh,useReducer:Ru,useRef:Qf,useState:function(){return Ru(Ki)},useDebugValue:xu,useDeferredValue:function(t){var s=Zt();return sh(s,ct.memoizedState,t)},useTransition:function(){var t=Ru(Ki)[0],s=Zt().memoizedState;return[t,s]},useMutableSource:Bf,useSyncExternalStore:Vf,useId:ih,unstable_isNewReconciler:!1},Ry={readContext:Xt,useCallback:nh,useContext:Xt,useEffect:Au,useImperativeHandle:th,useInsertionEffect:Xf,useLayoutEffect:Zf,useMemo:rh,useReducer:Ou,useRef:Qf,useState:function(){return Ou(Ki)},useDebugValue:xu,useDeferredValue:function(t){var s=Zt();return ct===null?s.memoizedState=t:sh(s,ct.memoizedState,t)},useTransition:function(){var t=Ou(Ki)[0],s=Zt().memoizedState;return[t,s]},useMutableSource:Bf,useSyncExternalStore:Vf,useId:ih,unstable_isNewReconciler:!1};function un(t,s){if(t&&t.defaultProps){s=Z({},s),t=t.defaultProps;for(var a in t)s[a]===void 0&&(s[a]=t[a]);return s}return s}function Pu(t,s,a,u){s=t.memoizedState,a=a(u,s),a=a==null?s:Z({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var ka={isMounted:function(t){return(t=t._reactInternals)?Pn(t)===t:!1},enqueueSetState:function(t,s,a){t=t._reactInternals;var u=At(),f=_r(t),p=Mn(u,f);p.payload=s,a!=null&&(p.callback=a),s=gr(t,p,f),s!==null&&(fn(s,t,f,u),pa(s,t,f))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var u=At(),f=_r(t),p=Mn(u,f);p.tag=1,p.payload=s,a!=null&&(p.callback=a),s=gr(t,p,f),s!==null&&(fn(s,t,f,u),pa(s,t,f))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=At(),u=_r(t),f=Mn(a,u);f.tag=2,s!=null&&(f.callback=s),s=gr(t,f,u),s!==null&&(fn(s,t,u,a),pa(s,t,u))}};function uh(t,s,a,u,f,p,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,v):s.prototype&&s.prototype.isPureReactComponent?!Li(a,u)||!Li(f,p):!0}function ch(t,s,a){var u=!1,f=hr,p=s.contextType;return typeof p=="object"&&p!==null?p=Xt(p):(f=Ut(s)?Wr:bt.current,u=s.contextTypes,p=(u=u!=null)?Rs(t,f):hr),s=new s(a,p),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ka,t.stateNode=s,s._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=f,t.__reactInternalMemoizedMaskedChildContext=p),s}function dh(t,s,a,u){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==t&&ka.enqueueReplaceState(s,s.state,null)}function Lu(t,s,a,u){var f=t.stateNode;f.props=a,f.state=t.memoizedState,f.refs={},wu(t);var p=s.contextType;typeof p=="object"&&p!==null?f.context=Xt(p):(p=Ut(s)?Wr:bt.current,f.context=Rs(t,p)),f.state=t.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(Pu(t,s,p,a),f.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&ka.enqueueReplaceState(f,f.state,null),ma(t,a,f,u),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308)}function Us(t,s){try{var a="",u=s;do a+=ee(u),u=u.return;while(u);var f=a}catch(p){f=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:s,stack:f,digest:null}}function Nu(t,s,a){return{value:t,source:null,stack:a??null,digest:s??null}}function Du(t,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Oy=typeof WeakMap=="function"?WeakMap:Map;function fh(t,s,a){a=Mn(-1,a),a.tag=3,a.payload={element:null};var u=s.value;return a.callback=function(){Oa||(Oa=!0,Qu=u),Du(t,s)},a}function hh(t,s,a){a=Mn(-1,a),a.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var f=s.value;a.payload=function(){return u(f)},a.callback=function(){Du(t,s)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Du(t,s),typeof u!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})}),a}function ph(t,s,a){var u=t.pingCache;if(u===null){u=t.pingCache=new Oy;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(a)||(f.add(a),t=Vy.bind(null,t,s,a),s.then(t,t))}function mh(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function gh(t,s,a,u,f){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Mn(-1,1),s.tag=2,gr(a,s,1))),a.lanes|=1),t):(t.flags|=65536,t.lanes=f,t)}var Ay=C.ReactCurrentOwner,jt=!1;function Ot(t,s,a,u){s.child=t===null?Uf(s,null,a,u):Ps(s,t.child,a,u)}function vh(t,s,a,u,f){a=a.render;var p=s.ref;return Ns(s,f),u=Tu(t,s,a,u,p,f),a=Iu(),t!==null&&!jt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~f,Fn(t,s,f)):(Qe&&a&&uu(s),s.flags|=1,Ot(t,s,u,f),s.child)}function yh(t,s,a,u,f){if(t===null){var p=a.type;return typeof p=="function"&&!rc(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=p,wh(t,s,p,u,f)):(t=Da(a.type,null,u,s,s.mode,f),t.ref=s.ref,t.return=s,s.child=t)}if(p=t.child,(t.lanes&f)===0){var v=p.memoizedProps;if(a=a.compare,a=a!==null?a:Li,a(v,u)&&t.ref===s.ref)return Fn(t,s,f)}return s.flags|=1,t=kr(p,u),t.ref=s.ref,t.return=s,s.child=t}function wh(t,s,a,u,f){if(t!==null){var p=t.memoizedProps;if(Li(p,u)&&t.ref===s.ref)if(jt=!1,s.pendingProps=u=p,(t.lanes&f)!==0)(t.flags&131072)!==0&&(jt=!0);else return s.lanes=t.lanes,Fn(t,s,f)}return Uu(t,s,a,u,f)}function _h(t,s,a){var u=s.pendingProps,f=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be($s,qt),qt|=a;else{if((a&1073741824)===0)return t=p!==null?p.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Be($s,qt),qt|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:a,Be($s,qt),qt|=u}else p!==null?(u=p.baseLanes|a,s.memoizedState=null):u=a,Be($s,qt),qt|=u;return Ot(t,s,f,a),s.child}function Sh(t,s){var a=s.ref;(t===null&&a!==null||t!==null&&t.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Uu(t,s,a,u,f){var p=Ut(a)?Wr:bt.current;return p=Rs(s,p),Ns(s,f),a=Tu(t,s,a,u,p,f),u=Iu(),t!==null&&!jt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~f,Fn(t,s,f)):(Qe&&u&&uu(s),s.flags|=1,Ot(t,s,a,f),s.child)}function kh(t,s,a,u,f){if(Ut(a)){var p=!0;oa(s)}else p=!1;if(Ns(s,f),s.stateNode===null)ba(t,s),ch(s,a,u),Lu(s,a,u,f),u=!0;else if(t===null){var v=s.stateNode,S=s.memoizedProps;v.props=S;var I=v.context,j=a.contextType;typeof j=="object"&&j!==null?j=Xt(j):(j=Ut(a)?Wr:bt.current,j=Rs(s,j));var W=a.getDerivedStateFromProps,q=typeof W=="function"||typeof v.getSnapshotBeforeUpdate=="function";q||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==u||I!==j)&&dh(s,v,u,j),mr=!1;var H=s.memoizedState;v.state=H,ma(s,u,v,f),I=s.memoizedState,S!==u||H!==I||Dt.current||mr?(typeof W=="function"&&(Pu(s,a,W,u),I=s.memoizedState),(S=mr||uh(s,a,S,u,H,I,j))?(q||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=I),v.props=u,v.state=I,v.context=j,u=S):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{v=s.stateNode,$f(t,s),S=s.memoizedProps,j=s.type===s.elementType?S:un(s.type,S),v.props=j,q=s.pendingProps,H=v.context,I=a.contextType,typeof I=="object"&&I!==null?I=Xt(I):(I=Ut(a)?Wr:bt.current,I=Rs(s,I));var ne=a.getDerivedStateFromProps;(W=typeof ne=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==q||H!==I)&&dh(s,v,u,I),mr=!1,H=s.memoizedState,v.state=H,ma(s,u,v,f);var oe=s.memoizedState;S!==q||H!==oe||Dt.current||mr?(typeof ne=="function"&&(Pu(s,a,ne,u),oe=s.memoizedState),(j=mr||uh(s,a,j,u,H,oe,I)||!1)?(W||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,oe,I),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,oe,I)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===t.memoizedProps&&H===t.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&H===t.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=oe),v.props=u,v.state=oe,v.context=I,u=j):(typeof v.componentDidUpdate!="function"||S===t.memoizedProps&&H===t.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&H===t.memoizedState||(s.flags|=1024),u=!1)}return ju(t,s,a,u,p,f)}function ju(t,s,a,u,f,p){Sh(t,s);var v=(s.flags&128)!==0;if(!u&&!v)return f&&If(s,a,!1),Fn(t,s,p);u=s.stateNode,Ay.current=s;var S=v&&typeof a.getDerivedStateFromError!="function"?null:u.render();return s.flags|=1,t!==null&&v?(s.child=Ps(s,t.child,null,p),s.child=Ps(s,null,S,p)):Ot(t,s,S,p),s.memoizedState=u.state,f&&If(s,a,!0),s.child}function Eh(t){var s=t.stateNode;s.pendingContext?Cf(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Cf(t,s.context,!1),_u(t,s.containerInfo)}function bh(t,s,a,u,f){return xs(),hu(f),s.flags|=256,Ot(t,s,a,u),s.child}var $u={dehydrated:null,treeContext:null,retryLane:0};function Mu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ch(t,s,a){var u=s.pendingProps,f=Ze.current,p=!1,v=(s.flags&128)!==0,S;if((S=v)||(S=t!==null&&t.memoizedState===null?!1:(f&2)!==0),S?(p=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(f|=1),Be(Ze,f&1),t===null)return fu(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(v=u.children,t=u.fallback,p?(u=s.mode,p=s.child,v={mode:"hidden",children:v},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=Ua(v,u,0,null),t=ts(t,u,a,null),p.return=s,t.return=s,p.sibling=t,s.child=p,s.child.memoizedState=Mu(a),s.memoizedState=$u,t):Fu(s,v));if(f=t.memoizedState,f!==null&&(S=f.dehydrated,S!==null))return xy(t,s,v,u,S,f,a);if(p){p=u.fallback,v=s.mode,f=t.child,S=f.sibling;var I={mode:"hidden",children:u.children};return(v&1)===0&&s.child!==f?(u=s.child,u.childLanes=0,u.pendingProps=I,s.deletions=null):(u=kr(f,I),u.subtreeFlags=f.subtreeFlags&14680064),S!==null?p=kr(S,p):(p=ts(p,v,a,null),p.flags|=2),p.return=s,u.return=s,u.sibling=p,s.child=u,u=p,p=s.child,v=t.child.memoizedState,v=v===null?Mu(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=t.childLanes&~a,s.memoizedState=$u,u}return p=t.child,t=p.sibling,u=kr(p,{mode:"visible",children:u.children}),(s.mode&1)===0&&(u.lanes=a),u.return=s,u.sibling=null,t!==null&&(a=s.deletions,a===null?(s.deletions=[t],s.flags|=16):a.push(t)),s.child=u,s.memoizedState=null,u}function Fu(t,s){return s=Ua({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Ea(t,s,a,u){return u!==null&&hu(u),Ps(s,t.child,null,a),t=Fu(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function xy(t,s,a,u,f,p,v){if(a)return s.flags&256?(s.flags&=-257,u=Nu(Error(r(422))),Ea(t,s,v,u)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(p=u.fallback,f=s.mode,u=Ua({mode:"visible",children:u.children},f,0,null),p=ts(p,f,v,null),p.flags|=2,u.return=s,p.return=s,u.sibling=p,s.child=u,(s.mode&1)!==0&&Ps(s,t.child,null,v),s.child.memoizedState=Mu(v),s.memoizedState=$u,p);if((s.mode&1)===0)return Ea(t,s,v,null);if(f.data==="$!"){if(u=f.nextSibling&&f.nextSibling.dataset,u)var S=u.dgst;return u=S,p=Error(r(419)),u=Nu(p,u,void 0),Ea(t,s,v,u)}if(S=(v&t.childLanes)!==0,jt||S){if(u=gt,u!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(u.suspendedLanes|v))!==0?0:f,f!==0&&f!==p.retryLane&&(p.retryLane=f,$n(t,f),fn(u,t,f,-1))}return nc(),u=Nu(Error(r(421))),Ea(t,s,v,u)}return f.data==="$?"?(s.flags|=128,s.child=t.child,s=Hy.bind(null,t),f._reactRetry=s,null):(t=p.treeContext,Kt=dr(f.nextSibling),Wt=s,Qe=!0,ln=null,t!==null&&(Qt[Yt++]=Un,Qt[Yt++]=jn,Qt[Yt++]=Kr,Un=t.id,jn=t.overflow,Kr=s),s=Fu(s,u.children),s.flags|=4096,s)}function Th(t,s,a){t.lanes|=s;var u=t.alternate;u!==null&&(u.lanes|=s),vu(t.return,s,a)}function zu(t,s,a,u,f){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:f}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=a,p.tailMode=f)}function Ih(t,s,a){var u=s.pendingProps,f=u.revealOrder,p=u.tail;if(Ot(t,s,u.children,a),u=Ze.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Th(t,a,s);else if(t.tag===19)Th(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(Be(Ze,u),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)t=a.alternate,t!==null&&ga(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),zu(s,!1,f,a,p);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(t=f.alternate,t!==null&&ga(t)===null){s.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}zu(s,!0,a,null,p);break;case"together":zu(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ba(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Fn(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Yr|=s.lanes,(a&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,a=kr(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=kr(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function Py(t,s,a){switch(s.tag){case 3:Eh(s),xs();break;case 5:zf(s);break;case 1:Ut(s.type)&&oa(s);break;case 4:_u(s,s.stateNode.containerInfo);break;case 10:var u=s.type._context,f=s.memoizedProps.value;Be(fa,u._currentValue),u._currentValue=f;break;case 13:if(u=s.memoizedState,u!==null)return u.dehydrated!==null?(Be(Ze,Ze.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Ch(t,s,a):(Be(Ze,Ze.current&1),t=Fn(t,s,a),t!==null?t.sibling:null);Be(Ze,Ze.current&1);break;case 19:if(u=(a&s.childLanes)!==0,(t.flags&128)!==0){if(u)return Ih(t,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Be(Ze,Ze.current),u)break;return null;case 22:case 23:return s.lanes=0,_h(t,s,a)}return Fn(t,s,a)}var Rh,Bu,Oh,Ah;Rh=function(t,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)t.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Bu=function(){},Oh=function(t,s,a,u){var f=t.memoizedProps;if(f!==u){t=s.stateNode,Jr(kn.current);var p=null;switch(a){case"input":f=er(t,f),u=er(t,u),p=[];break;case"select":f=Z({},f,{value:void 0}),u=Z({},u,{value:void 0}),p=[];break;case"textarea":f=T(t,f),u=T(t,u),p=[];break;default:typeof f.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=ra)}sr(a,u);var v;a=null;for(j in f)if(!u.hasOwnProperty(j)&&f.hasOwnProperty(j)&&f[j]!=null)if(j==="style"){var S=f[j];for(v in S)S.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(o.hasOwnProperty(j)?p||(p=[]):(p=p||[]).push(j,null));for(j in u){var I=u[j];if(S=f?.[j],u.hasOwnProperty(j)&&I!==S&&(I!=null||S!=null))if(j==="style")if(S){for(v in S)!S.hasOwnProperty(v)||I&&I.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in I)I.hasOwnProperty(v)&&S[v]!==I[v]&&(a||(a={}),a[v]=I[v])}else a||(p||(p=[]),p.push(j,a)),a=I;else j==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,S=S?S.__html:void 0,I!=null&&S!==I&&(p=p||[]).push(j,I)):j==="children"?typeof I!="string"&&typeof I!="number"||(p=p||[]).push(j,""+I):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(o.hasOwnProperty(j)?(I!=null&&j==="onScroll"&&Ke("scroll",t),p||S===I||(p=[])):(p=p||[]).push(j,I))}a&&(p=p||[]).push("style",a);var j=p;(s.updateQueue=j)&&(s.flags|=4)}},Ah=function(t,s,a,u){a!==u&&(s.flags|=4)};function Gi(t,s){if(!Qe)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Tt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,u=0;if(s)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags&14680064,u|=f.flags&14680064,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=u,t.childLanes=a,s}function Ly(t,s,a){var u=s.pendingProps;switch(cu(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(s),null;case 1:return Ut(s.type)&&ia(),Tt(s),null;case 3:return u=s.stateNode,Ds(),qe(Dt),qe(bt),Eu(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(ca(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ln!==null&&(Zu(ln),ln=null))),Bu(t,s),Tt(s),null;case 5:Su(s);var f=Jr(Vi.current);if(a=s.type,t!==null&&s.stateNode!=null)Oh(t,s,a,u,f),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!u){if(s.stateNode===null)throw Error(r(166));return Tt(s),null}if(t=Jr(kn.current),ca(s)){u=s.stateNode,a=s.type;var p=s.memoizedProps;switch(u[Sn]=s,u[$i]=p,t=(s.mode&1)!==0,a){case"dialog":Ke("cancel",u),Ke("close",u);break;case"iframe":case"object":case"embed":Ke("load",u);break;case"video":case"audio":for(f=0;f<Di.length;f++)Ke(Di[f],u);break;case"source":Ke("error",u);break;case"img":case"image":case"link":Ke("error",u),Ke("load",u);break;case"details":Ke("toggle",u);break;case"input":tr(u,p),Ke("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},Ke("invalid",u);break;case"textarea":J(u,p),Ke("invalid",u)}sr(a,p),f=null;for(var v in p)if(p.hasOwnProperty(v)){var S=p[v];v==="children"?typeof S=="string"?u.textContent!==S&&(p.suppressHydrationWarning!==!0&&na(u.textContent,S,t),f=["children",S]):typeof S=="number"&&u.textContent!==""+S&&(p.suppressHydrationWarning!==!0&&na(u.textContent,S,t),f=["children",""+S]):o.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&Ke("scroll",u)}switch(a){case"input":rn(u),gs(u,p,!0);break;case"textarea":rn(u),ue(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=ra)}u=f,s.updateQueue=u,u!==null&&(s.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=We(a)),t==="http://www.w3.org/1999/xhtml"?a==="script"?(t=v.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=v.createElement(a,{is:u.is}):(t=v.createElement(a),a==="select"&&(v=t,u.multiple?v.multiple=!0:u.size&&(v.size=u.size))):t=v.createElementNS(t,a),t[Sn]=s,t[$i]=u,Rh(t,s,!1,!1),s.stateNode=t;e:{switch(v=$r(a,u),a){case"dialog":Ke("cancel",t),Ke("close",t),f=u;break;case"iframe":case"object":case"embed":Ke("load",t),f=u;break;case"video":case"audio":for(f=0;f<Di.length;f++)Ke(Di[f],t);f=u;break;case"source":Ke("error",t),f=u;break;case"img":case"image":case"link":Ke("error",t),Ke("load",t),f=u;break;case"details":Ke("toggle",t),f=u;break;case"input":tr(t,u),f=er(t,u),Ke("invalid",t);break;case"option":f=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},f=Z({},u,{value:void 0}),Ke("invalid",t);break;case"textarea":J(t,u),f=T(t,u),Ke("invalid",t);break;default:f=u}sr(a,f),S=f;for(p in S)if(S.hasOwnProperty(p)){var I=S[p];p==="style"?Gt(t,I):p==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,I!=null&&Bt(t,I)):p==="children"?typeof I=="string"?(a!=="textarea"||I!=="")&&wt(t,I):typeof I=="number"&&wt(t,""+I):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?I!=null&&p==="onScroll"&&Ke("scroll",t):I!=null&&A(t,p,I,v))}switch(a){case"input":rn(t),gs(t,u,!1);break;case"textarea":rn(t),ue(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Re(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?it(t,!!u.multiple,p,!1):u.defaultValue!=null&&it(t,!!u.multiple,u.defaultValue,!0);break;default:typeof f.onClick=="function"&&(t.onclick=ra)}switch(a){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Tt(s),null;case 6:if(t&&s.stateNode!=null)Ah(t,s,t.memoizedProps,u);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(a=Jr(Vi.current),Jr(kn.current),ca(s)){if(u=s.stateNode,a=s.memoizedProps,u[Sn]=s,(p=u.nodeValue!==a)&&(t=Wt,t!==null))switch(t.tag){case 3:na(u.nodeValue,a,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&na(u.nodeValue,a,(t.mode&1)!==0)}p&&(s.flags|=4)}else u=(a.nodeType===9?a:a.ownerDocument).createTextNode(u),u[Sn]=s,s.stateNode=u}return Tt(s),null;case 13:if(qe(Ze),u=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&Kt!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Lf(),xs(),s.flags|=98560,p=!1;else if(p=ca(s),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(r(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[Sn]=s}else xs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tt(s),p=!1}else ln!==null&&(Zu(ln),ln=null),p=!0;if(!p)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(Ze.current&1)!==0?dt===0&&(dt=3):nc())),s.updateQueue!==null&&(s.flags|=4),Tt(s),null);case 4:return Ds(),Bu(t,s),t===null&&Ui(s.stateNode.containerInfo),Tt(s),null;case 10:return gu(s.type._context),Tt(s),null;case 17:return Ut(s.type)&&ia(),Tt(s),null;case 19:if(qe(Ze),p=s.memoizedState,p===null)return Tt(s),null;if(u=(s.flags&128)!==0,v=p.rendering,v===null)if(u)Gi(p,!1);else{if(dt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(v=ga(t),v!==null){for(s.flags|=128,Gi(p,!1),u=v.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),s.subtreeFlags=0,u=a,a=s.child;a!==null;)p=a,t=u,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,t=v.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),a=a.sibling;return Be(Ze,Ze.current&1|2),s.child}t=t.sibling}p.tail!==null&&Xe()>Ms&&(s.flags|=128,u=!0,Gi(p,!1),s.lanes=4194304)}else{if(!u)if(t=ga(v),t!==null){if(s.flags|=128,u=!0,a=t.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Gi(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Qe)return Tt(s),null}else 2*Xe()-p.renderingStartTime>Ms&&a!==1073741824&&(s.flags|=128,u=!0,Gi(p,!1),s.lanes=4194304);p.isBackwards?(v.sibling=s.child,s.child=v):(a=p.last,a!==null?a.sibling=v:s.child=v,p.last=v)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=Xe(),s.sibling=null,a=Ze.current,Be(Ze,u?a&1|2:a&1),s):(Tt(s),null);case 22:case 23:return tc(),u=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(s.flags|=8192),u&&(s.mode&1)!==0?(qt&1073741824)!==0&&(Tt(s),s.subtreeFlags&6&&(s.flags|=8192)):Tt(s),null;case 24:return null;case 25:return null}throw Error(r(156,s.tag))}function Ny(t,s){switch(cu(s),s.tag){case 1:return Ut(s.type)&&ia(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Ds(),qe(Dt),qe(bt),Eu(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return Su(s),null;case 13:if(qe(Ze),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));xs()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return qe(Ze),null;case 4:return Ds(),null;case 10:return gu(s.type._context),null;case 22:case 23:return tc(),null;case 24:return null;default:return null}}var Ca=!1,It=!1,Dy=typeof WeakSet=="function"?WeakSet:Set,se=null;function js(t,s){var a=t.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(u){tt(t,s,u)}else a.current=null}function Vu(t,s,a){try{a()}catch(u){tt(t,s,u)}}var xh=!1;function Uy(t,s){if(tu=Wo,t=uf(),ql(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var v=0,S=-1,I=-1,j=0,W=0,q=t,H=null;t:for(;;){for(var ne;q!==a||f!==0&&q.nodeType!==3||(S=v+f),q!==p||u!==0&&q.nodeType!==3||(I=v+u),q.nodeType===3&&(v+=q.nodeValue.length),(ne=q.firstChild)!==null;)H=q,q=ne;for(;;){if(q===t)break t;if(H===a&&++j===f&&(S=v),H===p&&++W===u&&(I=v),(ne=q.nextSibling)!==null)break;q=H,H=q.parentNode}q=ne}a=S===-1||I===-1?null:{start:S,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(nu={focusedElem:t,selectionRange:a},Wo=!1,se=s;se!==null;)if(s=se,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,se=t;else for(;se!==null;){s=se;try{var oe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(oe!==null){var ae=oe.memoizedProps,ot=oe.memoizedState,N=s.stateNode,O=N.getSnapshotBeforeUpdate(s.elementType===s.type?ae:un(s.type,ae),ot);N.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var U=s.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Q){tt(s,s.return,Q)}if(t=s.sibling,t!==null){t.return=s.return,se=t;break}se=s.return}return oe=xh,xh=!1,oe}function Ji(t,s,a){var u=s.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&t)===t){var p=f.destroy;f.destroy=void 0,p!==void 0&&Vu(s,a,p)}f=f.next}while(f!==u)}}function Ta(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&t)===t){var u=a.create;a.destroy=u()}a=a.next}while(a!==s)}}function Hu(t){var s=t.ref;if(s!==null){var a=t.stateNode;switch(t.tag){case 5:t=a;break;default:t=a}typeof s=="function"?s(t):s.current=t}}function Ph(t){var s=t.alternate;s!==null&&(t.alternate=null,Ph(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[Sn],delete s[$i],delete s[ou],delete s[yy],delete s[wy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Lh(t){return t.tag===5||t.tag===3||t.tag===4}function Nh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Lh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wu(t,s,a){var u=t.tag;if(u===5||u===6)t=t.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(t,s):a.insertBefore(t,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(t,a)):(s=a,s.appendChild(t)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ra));else if(u!==4&&(t=t.child,t!==null))for(Wu(t,s,a),t=t.sibling;t!==null;)Wu(t,s,a),t=t.sibling}function Ku(t,s,a){var u=t.tag;if(u===5||u===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(Ku(t,s,a),t=t.sibling;t!==null;)Ku(t,s,a),t=t.sibling}var _t=null,cn=!1;function vr(t,s,a){for(a=a.child;a!==null;)Dh(t,s,a),a=a.sibling}function Dh(t,s,a){if(Ie&&typeof Ie.onCommitFiberUnmount=="function")try{Ie.onCommitFiberUnmount(Oe,a)}catch{}switch(a.tag){case 5:It||js(a,s);case 6:var u=_t,f=cn;_t=null,vr(t,s,a),_t=u,cn=f,_t!==null&&(cn?(t=_t,a=a.stateNode,t.nodeType===8?t.parentNode.removeChild(a):t.removeChild(a)):_t.removeChild(a.stateNode));break;case 18:_t!==null&&(cn?(t=_t,a=a.stateNode,t.nodeType===8?iu(t.parentNode,a):t.nodeType===1&&iu(t,a),Ii(t)):iu(_t,a.stateNode));break;case 4:u=_t,f=cn,_t=a.stateNode.containerInfo,cn=!0,vr(t,s,a),_t=u,cn=f;break;case 0:case 11:case 14:case 15:if(!It&&(u=a.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){f=u=u.next;do{var p=f,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&Vu(a,s,v),f=f.next}while(f!==u)}vr(t,s,a);break;case 1:if(!It&&(js(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=a.memoizedProps,u.state=a.memoizedState,u.componentWillUnmount()}catch(S){tt(a,s,S)}vr(t,s,a);break;case 21:vr(t,s,a);break;case 22:a.mode&1?(It=(u=It)||a.memoizedState!==null,vr(t,s,a),It=u):vr(t,s,a);break;default:vr(t,s,a)}}function Uh(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var a=t.stateNode;a===null&&(a=t.stateNode=new Dy),s.forEach(function(u){var f=Wy.bind(null,t,u);a.has(u)||(a.add(u),u.then(f,f))})}}function dn(t,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var f=a[u];try{var p=t,v=s,S=v;e:for(;S!==null;){switch(S.tag){case 5:_t=S.stateNode,cn=!1;break e;case 3:_t=S.stateNode.containerInfo,cn=!0;break e;case 4:_t=S.stateNode.containerInfo,cn=!0;break e}S=S.return}if(_t===null)throw Error(r(160));Dh(p,v,f),_t=null,cn=!1;var I=f.alternate;I!==null&&(I.return=null),f.return=null}catch(j){tt(f,s,j)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)jh(s,t),s=s.sibling}function jh(t,s){var a=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dn(s,t),bn(t),u&4){try{Ji(3,t,t.return),Ta(3,t)}catch(ae){tt(t,t.return,ae)}try{Ji(5,t,t.return)}catch(ae){tt(t,t.return,ae)}}break;case 1:dn(s,t),bn(t),u&512&&a!==null&&js(a,a.return);break;case 5:if(dn(s,t),bn(t),u&512&&a!==null&&js(a,a.return),t.flags&32){var f=t.stateNode;try{wt(f,"")}catch(ae){tt(t,t.return,ae)}}if(u&4&&(f=t.stateNode,f!=null)){var p=t.memoizedProps,v=a!==null?a.memoizedProps:p,S=t.type,I=t.updateQueue;if(t.updateQueue=null,I!==null)try{S==="input"&&p.type==="radio"&&p.name!=null&&ms(f,p),$r(S,v);var j=$r(S,p);for(v=0;v<I.length;v+=2){var W=I[v],q=I[v+1];W==="style"?Gt(f,q):W==="dangerouslySetInnerHTML"?Bt(f,q):W==="children"?wt(f,q):A(f,W,q,j)}switch(S){case"input":nr(f,p);break;case"textarea":ie(f,p);break;case"select":var H=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!p.multiple;var ne=p.value;ne!=null?it(f,!!p.multiple,ne,!1):H!==!!p.multiple&&(p.defaultValue!=null?it(f,!!p.multiple,p.defaultValue,!0):it(f,!!p.multiple,p.multiple?[]:"",!1))}f[$i]=p}catch(ae){tt(t,t.return,ae)}}break;case 6:if(dn(s,t),bn(t),u&4){if(t.stateNode===null)throw Error(r(162));f=t.stateNode,p=t.memoizedProps;try{f.nodeValue=p}catch(ae){tt(t,t.return,ae)}}break;case 3:if(dn(s,t),bn(t),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Ii(s.containerInfo)}catch(ae){tt(t,t.return,ae)}break;case 4:dn(s,t),bn(t);break;case 13:dn(s,t),bn(t),f=t.child,f.flags&8192&&(p=f.memoizedState!==null,f.stateNode.isHidden=p,!p||f.alternate!==null&&f.alternate.memoizedState!==null||(Ju=Xe())),u&4&&Uh(t);break;case 22:if(W=a!==null&&a.memoizedState!==null,t.mode&1?(It=(j=It)||W,dn(s,t),It=j):dn(s,t),bn(t),u&8192){if(j=t.memoizedState!==null,(t.stateNode.isHidden=j)&&!W&&(t.mode&1)!==0)for(se=t,W=t.child;W!==null;){for(q=se=W;se!==null;){switch(H=se,ne=H.child,H.tag){case 0:case 11:case 14:case 15:Ji(4,H,H.return);break;case 1:js(H,H.return);var oe=H.stateNode;if(typeof oe.componentWillUnmount=="function"){u=H,a=H.return;try{s=u,oe.props=s.memoizedProps,oe.state=s.memoizedState,oe.componentWillUnmount()}catch(ae){tt(u,a,ae)}}break;case 5:js(H,H.return);break;case 22:if(H.memoizedState!==null){Fh(q);continue}}ne!==null?(ne.return=H,se=ne):Fh(q)}W=W.sibling}e:for(W=null,q=t;;){if(q.tag===5){if(W===null){W=q;try{f=q.stateNode,j?(p=f.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(S=q.stateNode,I=q.memoizedProps.style,v=I!=null&&I.hasOwnProperty("display")?I.display:null,S.style.display=Et("display",v))}catch(ae){tt(t,t.return,ae)}}}else if(q.tag===6){if(W===null)try{q.stateNode.nodeValue=j?"":q.memoizedProps}catch(ae){tt(t,t.return,ae)}}else if((q.tag!==22&&q.tag!==23||q.memoizedState===null||q===t)&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===t)break e;for(;q.sibling===null;){if(q.return===null||q.return===t)break e;W===q&&(W=null),q=q.return}W===q&&(W=null),q.sibling.return=q.return,q=q.sibling}}break;case 19:dn(s,t),bn(t),u&4&&Uh(t);break;case 21:break;default:dn(s,t),bn(t)}}function bn(t){var s=t.flags;if(s&2){try{e:{for(var a=t.return;a!==null;){if(Lh(a)){var u=a;break e}a=a.return}throw Error(r(160))}switch(u.tag){case 5:var f=u.stateNode;u.flags&32&&(wt(f,""),u.flags&=-33);var p=Nh(t);Ku(t,p,f);break;case 3:case 4:var v=u.stateNode.containerInfo,S=Nh(t);Wu(t,S,v);break;default:throw Error(r(161))}}catch(I){tt(t,t.return,I)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function jy(t,s,a){se=t,$h(t)}function $h(t,s,a){for(var u=(t.mode&1)!==0;se!==null;){var f=se,p=f.child;if(f.tag===22&&u){var v=f.memoizedState!==null||Ca;if(!v){var S=f.alternate,I=S!==null&&S.memoizedState!==null||It;S=Ca;var j=It;if(Ca=v,(It=I)&&!j)for(se=f;se!==null;)v=se,I=v.child,v.tag===22&&v.memoizedState!==null?zh(f):I!==null?(I.return=v,se=I):zh(f);for(;p!==null;)se=p,$h(p),p=p.sibling;se=f,Ca=S,It=j}Mh(t)}else(f.subtreeFlags&8772)!==0&&p!==null?(p.return=f,se=p):Mh(t)}}function Mh(t){for(;se!==null;){var s=se;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:It||Ta(5,s);break;case 1:var u=s.stateNode;if(s.flags&4&&!It)if(a===null)u.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:un(s.type,a.memoizedProps);u.componentDidUpdate(f,a.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=s.updateQueue;p!==null&&Ff(s,p,u);break;case 3:var v=s.updateQueue;if(v!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Ff(s,v,a)}break;case 5:var S=s.stateNode;if(a===null&&s.flags&4){a=S;var I=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":I.autoFocus&&a.focus();break;case"img":I.src&&(a.src=I.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var j=s.alternate;if(j!==null){var W=j.memoizedState;if(W!==null){var q=W.dehydrated;q!==null&&Ii(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}It||s.flags&512&&Hu(s)}catch(H){tt(s,s.return,H)}}if(s===t){se=null;break}if(a=s.sibling,a!==null){a.return=s.return,se=a;break}se=s.return}}function Fh(t){for(;se!==null;){var s=se;if(s===t){se=null;break}var a=s.sibling;if(a!==null){a.return=s.return,se=a;break}se=s.return}}function zh(t){for(;se!==null;){var s=se;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Ta(4,s)}catch(I){tt(s,a,I)}break;case 1:var u=s.stateNode;if(typeof u.componentDidMount=="function"){var f=s.return;try{u.componentDidMount()}catch(I){tt(s,f,I)}}var p=s.return;try{Hu(s)}catch(I){tt(s,p,I)}break;case 5:var v=s.return;try{Hu(s)}catch(I){tt(s,v,I)}}}catch(I){tt(s,s.return,I)}if(s===t){se=null;break}var S=s.sibling;if(S!==null){S.return=s.return,se=S;break}se=s.return}}var $y=Math.ceil,Ia=C.ReactCurrentDispatcher,qu=C.ReactCurrentOwner,en=C.ReactCurrentBatchConfig,Le=0,gt=null,lt=null,St=0,qt=0,$s=fr(0),dt=0,Qi=null,Yr=0,Ra=0,Gu=0,Yi=null,$t=null,Ju=0,Ms=1/0,zn=null,Oa=!1,Qu=null,yr=null,Aa=!1,wr=null,xa=0,Xi=0,Yu=null,Pa=-1,La=0;function At(){return(Le&6)!==0?Xe():Pa!==-1?Pa:Pa=Xe()}function _r(t){return(t.mode&1)===0?1:(Le&2)!==0&&St!==0?St&-St:Sy.transition!==null?(La===0&&(La=Ld()),La):(t=$e,t!==0||(t=window.event,t=t===void 0?16:Bd(t.type)),t)}function fn(t,s,a,u){if(50<Xi)throw Xi=0,Yu=null,Error(r(185));ki(t,a,u),((Le&2)===0||t!==gt)&&(t===gt&&((Le&2)===0&&(Ra|=a),dt===4&&Sr(t,St)),Mt(t,u),a===1&&Le===0&&(s.mode&1)===0&&(Ms=Xe()+500,aa&&pr()))}function Mt(t,s){var a=t.callbackNode;Sv(t,s);var u=Bo(t,t===gt?St:0);if(u===0)a!==null&&Uo(a),t.callbackNode=null,t.callbackPriority=0;else if(s=u&-u,t.callbackPriority!==s){if(a!=null&&Uo(a),s===1)t.tag===0?_y(Vh.bind(null,t)):Rf(Vh.bind(null,t)),gy(function(){(Le&6)===0&&pr()}),a=null;else{switch(Nd(u)){case 1:a=Vr;break;case 4:a=_;break;case 16:a=M;break;case 536870912:a=X;break;default:a=M}a=Yh(a,Bh.bind(null,t))}t.callbackPriority=s,t.callbackNode=a}}function Bh(t,s){if(Pa=-1,La=0,(Le&6)!==0)throw Error(r(327));var a=t.callbackNode;if(Fs()&&t.callbackNode!==a)return null;var u=Bo(t,t===gt?St:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||s)s=Na(t,u);else{s=u;var f=Le;Le|=2;var p=Wh();(gt!==t||St!==s)&&(zn=null,Ms=Xe()+500,Zr(t,s));do try{zy();break}catch(S){Hh(t,S)}while(!0);mu(),Ia.current=p,Le=f,lt!==null?s=0:(gt=null,St=0,s=dt)}if(s!==0){if(s===2&&(f=xl(t),f!==0&&(u=f,s=Xu(t,f))),s===1)throw a=Qi,Zr(t,0),Sr(t,u),Mt(t,Xe()),a;if(s===6)Sr(t,u);else{if(f=t.current.alternate,(u&30)===0&&!My(f)&&(s=Na(t,u),s===2&&(p=xl(t),p!==0&&(u=p,s=Xu(t,p))),s===1))throw a=Qi,Zr(t,0),Sr(t,u),Mt(t,Xe()),a;switch(t.finishedWork=f,t.finishedLanes=u,s){case 0:case 1:throw Error(r(345));case 2:es(t,$t,zn);break;case 3:if(Sr(t,u),(u&130023424)===u&&(s=Ju+500-Xe(),10<s)){if(Bo(t,0)!==0)break;if(f=t.suspendedLanes,(f&u)!==u){At(),t.pingedLanes|=t.suspendedLanes&f;break}t.timeoutHandle=su(es.bind(null,t,$t,zn),s);break}es(t,$t,zn);break;case 4:if(Sr(t,u),(u&4194240)===u)break;for(s=t.eventTimes,f=-1;0<u;){var v=31-Me(u);p=1<<v,v=s[v],v>f&&(f=v),u&=~p}if(u=f,u=Xe()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*$y(u/1960))-u,10<u){t.timeoutHandle=su(es.bind(null,t,$t,zn),u);break}es(t,$t,zn);break;case 5:es(t,$t,zn);break;default:throw Error(r(329))}}}return Mt(t,Xe()),t.callbackNode===a?Bh.bind(null,t):null}function Xu(t,s){var a=Yi;return t.current.memoizedState.isDehydrated&&(Zr(t,s).flags|=256),t=Na(t,s),t!==2&&(s=$t,$t=a,s!==null&&Zu(s)),t}function Zu(t){$t===null?$t=t:$t.push.apply($t,t)}function My(t){for(var s=t;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var u=0;u<a.length;u++){var f=a[u],p=f.getSnapshot;f=f.value;try{if(!an(p(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Sr(t,s){for(s&=~Gu,s&=~Ra,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var a=31-Me(s),u=1<<a;t[a]=-1,s&=~u}}function Vh(t){if((Le&6)!==0)throw Error(r(327));Fs();var s=Bo(t,0);if((s&1)===0)return Mt(t,Xe()),null;var a=Na(t,s);if(t.tag!==0&&a===2){var u=xl(t);u!==0&&(s=u,a=Xu(t,u))}if(a===1)throw a=Qi,Zr(t,0),Sr(t,s),Mt(t,Xe()),a;if(a===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,es(t,$t,zn),Mt(t,Xe()),null}function ec(t,s){var a=Le;Le|=1;try{return t(s)}finally{Le=a,Le===0&&(Ms=Xe()+500,aa&&pr())}}function Xr(t){wr!==null&&wr.tag===0&&(Le&6)===0&&Fs();var s=Le;Le|=1;var a=en.transition,u=$e;try{if(en.transition=null,$e=1,t)return t()}finally{$e=u,en.transition=a,Le=s,(Le&6)===0&&pr()}}function tc(){qt=$s.current,qe($s)}function Zr(t,s){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;if(a!==-1&&(t.timeoutHandle=-1,my(a)),lt!==null)for(a=lt.return;a!==null;){var u=a;switch(cu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&ia();break;case 3:Ds(),qe(Dt),qe(bt),Eu();break;case 5:Su(u);break;case 4:Ds();break;case 13:qe(Ze);break;case 19:qe(Ze);break;case 10:gu(u.type._context);break;case 22:case 23:tc()}a=a.return}if(gt=t,lt=t=kr(t.current,null),St=qt=s,dt=0,Qi=null,Gu=Ra=Yr=0,$t=Yi=null,Gr!==null){for(s=0;s<Gr.length;s++)if(a=Gr[s],u=a.interleaved,u!==null){a.interleaved=null;var f=u.next,p=a.pending;if(p!==null){var v=p.next;p.next=f,u.next=v}a.pending=u}Gr=null}return t}function Hh(t,s){do{var a=lt;try{if(mu(),va.current=Sa,ya){for(var u=et.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}ya=!1}if(Qr=0,mt=ct=et=null,Hi=!1,Wi=0,qu.current=null,a===null||a.return===null){dt=1,Qi=s,lt=null;break}e:{var p=t,v=a.return,S=a,I=s;if(s=St,S.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){var j=I,W=S,q=W.tag;if((W.mode&1)===0&&(q===0||q===11||q===15)){var H=W.alternate;H?(W.updateQueue=H.updateQueue,W.memoizedState=H.memoizedState,W.lanes=H.lanes):(W.updateQueue=null,W.memoizedState=null)}var ne=mh(v);if(ne!==null){ne.flags&=-257,gh(ne,v,S,p,s),ne.mode&1&&ph(p,j,s),s=ne,I=j;var oe=s.updateQueue;if(oe===null){var ae=new Set;ae.add(I),s.updateQueue=ae}else oe.add(I);break e}else{if((s&1)===0){ph(p,j,s),nc();break e}I=Error(r(426))}}else if(Qe&&S.mode&1){var ot=mh(v);if(ot!==null){(ot.flags&65536)===0&&(ot.flags|=256),gh(ot,v,S,p,s),hu(Us(I,S));break e}}p=I=Us(I,S),dt!==4&&(dt=2),Yi===null?Yi=[p]:Yi.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,s&=-s,p.lanes|=s;var N=fh(p,I,s);Mf(p,N);break e;case 1:S=I;var O=p.type,U=p.stateNode;if((p.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(yr===null||!yr.has(U)))){p.flags|=65536,s&=-s,p.lanes|=s;var Q=hh(p,S,s);Mf(p,Q);break e}}p=p.return}while(p!==null)}qh(a)}catch(ce){s=ce,lt===a&&a!==null&&(lt=a=a.return);continue}break}while(!0)}function Wh(){var t=Ia.current;return Ia.current=Sa,t===null?Sa:t}function nc(){(dt===0||dt===3||dt===2)&&(dt=4),gt===null||(Yr&268435455)===0&&(Ra&268435455)===0||Sr(gt,St)}function Na(t,s){var a=Le;Le|=2;var u=Wh();(gt!==t||St!==s)&&(zn=null,Zr(t,s));do try{Fy();break}catch(f){Hh(t,f)}while(!0);if(mu(),Le=a,Ia.current=u,lt!==null)throw Error(r(261));return gt=null,St=0,dt}function Fy(){for(;lt!==null;)Kh(lt)}function zy(){for(;lt!==null&&!jo();)Kh(lt)}function Kh(t){var s=Qh(t.alternate,t,qt);t.memoizedProps=t.pendingProps,s===null?qh(t):lt=s,qu.current=null}function qh(t){var s=t;do{var a=s.alternate;if(t=s.return,(s.flags&32768)===0){if(a=Ly(a,s,qt),a!==null){lt=a;return}}else{if(a=Ny(a,s),a!==null){a.flags&=32767,lt=a;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,lt=null;return}}if(s=s.sibling,s!==null){lt=s;return}lt=s=t}while(s!==null);dt===0&&(dt=5)}function es(t,s,a){var u=$e,f=en.transition;try{en.transition=null,$e=1,By(t,s,a,u)}finally{en.transition=f,$e=u}return null}function By(t,s,a,u){do Fs();while(wr!==null);if((Le&6)!==0)throw Error(r(327));a=t.finishedWork;var f=t.finishedLanes;if(a===null)return null;if(t.finishedWork=null,t.finishedLanes=0,a===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var p=a.lanes|a.childLanes;if(kv(t,p),t===gt&&(lt=gt=null,St=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Aa||(Aa=!0,Yh(M,function(){return Fs(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=en.transition,en.transition=null;var v=$e;$e=1;var S=Le;Le|=4,qu.current=null,Uy(t,a),jh(a,t),ly(nu),Wo=!!tu,nu=tu=null,t.current=a,jy(a),$o(),Le=S,$e=v,en.transition=p}else t.current=a;if(Aa&&(Aa=!1,wr=t,xa=f),p=t.pendingLanes,p===0&&(yr=null),Jt(a.stateNode),Mt(t,Xe()),s!==null)for(u=t.onRecoverableError,a=0;a<s.length;a++)f=s[a],u(f.value,{componentStack:f.stack,digest:f.digest});if(Oa)throw Oa=!1,t=Qu,Qu=null,t;return(xa&1)!==0&&t.tag!==0&&Fs(),p=t.pendingLanes,(p&1)!==0?t===Yu?Xi++:(Xi=0,Yu=t):Xi=0,pr(),null}function Fs(){if(wr!==null){var t=Nd(xa),s=en.transition,a=$e;try{if(en.transition=null,$e=16>t?16:t,wr===null)var u=!1;else{if(t=wr,wr=null,xa=0,(Le&6)!==0)throw Error(r(331));var f=Le;for(Le|=4,se=t.current;se!==null;){var p=se,v=p.child;if((se.flags&16)!==0){var S=p.deletions;if(S!==null){for(var I=0;I<S.length;I++){var j=S[I];for(se=j;se!==null;){var W=se;switch(W.tag){case 0:case 11:case 15:Ji(8,W,p)}var q=W.child;if(q!==null)q.return=W,se=q;else for(;se!==null;){W=se;var H=W.sibling,ne=W.return;if(Ph(W),W===j){se=null;break}if(H!==null){H.return=ne,se=H;break}se=ne}}}var oe=p.alternate;if(oe!==null){var ae=oe.child;if(ae!==null){oe.child=null;do{var ot=ae.sibling;ae.sibling=null,ae=ot}while(ae!==null)}}se=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,se=v;else e:for(;se!==null;){if(p=se,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Ji(9,p,p.return)}var N=p.sibling;if(N!==null){N.return=p.return,se=N;break e}se=p.return}}var O=t.current;for(se=O;se!==null;){v=se;var U=v.child;if((v.subtreeFlags&2064)!==0&&U!==null)U.return=v,se=U;else e:for(v=O;se!==null;){if(S=se,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:Ta(9,S)}}catch(ce){tt(S,S.return,ce)}if(S===v){se=null;break e}var Q=S.sibling;if(Q!==null){Q.return=S.return,se=Q;break e}se=S.return}}if(Le=f,pr(),Ie&&typeof Ie.onPostCommitFiberRoot=="function")try{Ie.onPostCommitFiberRoot(Oe,t)}catch{}u=!0}return u}finally{$e=a,en.transition=s}}return!1}function Gh(t,s,a){s=Us(a,s),s=fh(t,s,1),t=gr(t,s,1),s=At(),t!==null&&(ki(t,1,s),Mt(t,s))}function tt(t,s,a){if(t.tag===3)Gh(t,t,a);else for(;s!==null;){if(s.tag===3){Gh(s,t,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(yr===null||!yr.has(u))){t=Us(a,t),t=hh(s,t,1),s=gr(s,t,1),t=At(),s!==null&&(ki(s,1,t),Mt(s,t));break}}s=s.return}}function Vy(t,s,a){var u=t.pingCache;u!==null&&u.delete(s),s=At(),t.pingedLanes|=t.suspendedLanes&a,gt===t&&(St&a)===a&&(dt===4||dt===3&&(St&130023424)===St&&500>Xe()-Ju?Zr(t,0):Gu|=a),Mt(t,s)}function Jh(t,s){s===0&&((t.mode&1)===0?s=1:(s=zo,zo<<=1,(zo&130023424)===0&&(zo=4194304)));var a=At();t=$n(t,s),t!==null&&(ki(t,s,a),Mt(t,a))}function Hy(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),Jh(t,a)}function Wy(t,s){var a=0;switch(t.tag){case 13:var u=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(r(314))}u!==null&&u.delete(s),Jh(t,a)}var Qh;Qh=function(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps||Dt.current)jt=!0;else{if((t.lanes&a)===0&&(s.flags&128)===0)return jt=!1,Py(t,s,a);jt=(t.flags&131072)!==0}else jt=!1,Qe&&(s.flags&1048576)!==0&&Of(s,ua,s.index);switch(s.lanes=0,s.tag){case 2:var u=s.type;ba(t,s),t=s.pendingProps;var f=Rs(s,bt.current);Ns(s,a),f=Tu(null,s,u,t,f,a);var p=Iu();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Ut(u)?(p=!0,oa(s)):p=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,wu(s),f.updater=ka,s.stateNode=f,f._reactInternals=s,Lu(s,u,t,a),s=ju(null,s,u,!0,p,a)):(s.tag=0,Qe&&p&&uu(s),Ot(null,s,f,a),s=s.child),s;case 16:u=s.elementType;e:{switch(ba(t,s),t=s.pendingProps,f=u._init,u=f(u._payload),s.type=u,f=s.tag=qy(u),t=un(u,t),f){case 0:s=Uu(null,s,u,t,a);break e;case 1:s=kh(null,s,u,t,a);break e;case 11:s=vh(null,s,u,t,a);break e;case 14:s=yh(null,s,u,un(u.type,t),a);break e}throw Error(r(306,u,""))}return s;case 0:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:un(u,f),Uu(t,s,u,f,a);case 1:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:un(u,f),kh(t,s,u,f,a);case 3:e:{if(Eh(s),t===null)throw Error(r(387));u=s.pendingProps,p=s.memoizedState,f=p.element,$f(t,s),ma(s,u,null,a);var v=s.memoizedState;if(u=v.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){f=Us(Error(r(423)),s),s=bh(t,s,u,a,f);break e}else if(u!==f){f=Us(Error(r(424)),s),s=bh(t,s,u,a,f);break e}else for(Kt=dr(s.stateNode.containerInfo.firstChild),Wt=s,Qe=!0,ln=null,a=Uf(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(xs(),u===f){s=Fn(t,s,a);break e}Ot(t,s,u,a)}s=s.child}return s;case 5:return zf(s),t===null&&fu(s),u=s.type,f=s.pendingProps,p=t!==null?t.memoizedProps:null,v=f.children,ru(u,f)?v=null:p!==null&&ru(u,p)&&(s.flags|=32),Sh(t,s),Ot(t,s,v,a),s.child;case 6:return t===null&&fu(s),null;case 13:return Ch(t,s,a);case 4:return _u(s,s.stateNode.containerInfo),u=s.pendingProps,t===null?s.child=Ps(s,null,u,a):Ot(t,s,u,a),s.child;case 11:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:un(u,f),vh(t,s,u,f,a);case 7:return Ot(t,s,s.pendingProps,a),s.child;case 8:return Ot(t,s,s.pendingProps.children,a),s.child;case 12:return Ot(t,s,s.pendingProps.children,a),s.child;case 10:e:{if(u=s.type._context,f=s.pendingProps,p=s.memoizedProps,v=f.value,Be(fa,u._currentValue),u._currentValue=v,p!==null)if(an(p.value,v)){if(p.children===f.children&&!Dt.current){s=Fn(t,s,a);break e}}else for(p=s.child,p!==null&&(p.return=s);p!==null;){var S=p.dependencies;if(S!==null){v=p.child;for(var I=S.firstContext;I!==null;){if(I.context===u){if(p.tag===1){I=Mn(-1,a&-a),I.tag=2;var j=p.updateQueue;if(j!==null){j=j.shared;var W=j.pending;W===null?I.next=I:(I.next=W.next,W.next=I),j.pending=I}}p.lanes|=a,I=p.alternate,I!==null&&(I.lanes|=a),vu(p.return,a,s),S.lanes|=a;break}I=I.next}}else if(p.tag===10)v=p.type===s.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(r(341));v.lanes|=a,S=v.alternate,S!==null&&(S.lanes|=a),vu(v,a,s),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===s){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}Ot(t,s,f.children,a),s=s.child}return s;case 9:return f=s.type,u=s.pendingProps.children,Ns(s,a),f=Xt(f),u=u(f),s.flags|=1,Ot(t,s,u,a),s.child;case 14:return u=s.type,f=un(u,s.pendingProps),f=un(u.type,f),yh(t,s,u,f,a);case 15:return wh(t,s,s.type,s.pendingProps,a);case 17:return u=s.type,f=s.pendingProps,f=s.elementType===u?f:un(u,f),ba(t,s),s.tag=1,Ut(u)?(t=!0,oa(s)):t=!1,Ns(s,a),ch(s,u,f),Lu(s,u,f,a),ju(null,s,u,!0,t,a);case 19:return Ih(t,s,a);case 22:return _h(t,s,a)}throw Error(r(156,s.tag))};function Yh(t,s){return Do(t,s)}function Ky(t,s,a,u){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(t,s,a,u){return new Ky(t,s,a,u)}function rc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qy(t){if(typeof t=="function")return rc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===je)return 11;if(t===Y)return 14}return 2}function kr(t,s){var a=t.alternate;return a===null?(a=tn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&14680064,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a}function Da(t,s,a,u,f,p){var v=2;if(u=t,typeof t=="function")rc(t)&&(v=1);else if(typeof t=="string")v=5;else e:switch(t){case G:return ts(a.children,f,p,s);case le:v=8,f|=8;break;case he:return t=tn(12,a,s,f|2),t.elementType=he,t.lanes=p,t;case Ue:return t=tn(13,a,s,f),t.elementType=Ue,t.lanes=p,t;case te:return t=tn(19,a,s,f),t.elementType=te,t.lanes=p,t;case fe:return Ua(a,f,p,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case be:v=10;break e;case De:v=9;break e;case je:v=11;break e;case Y:v=14;break e;case ke:v=16,u=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return s=tn(v,a,s,f),s.elementType=t,s.type=u,s.lanes=p,s}function ts(t,s,a,u){return t=tn(7,t,u,s),t.lanes=a,t}function Ua(t,s,a,u){return t=tn(22,t,u,s),t.elementType=fe,t.lanes=a,t.stateNode={isHidden:!1},t}function sc(t,s,a){return t=tn(6,t,null,s),t.lanes=a,t}function ic(t,s,a){return s=tn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Gy(t,s,a,u,f){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pl(0),this.expirationTimes=Pl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pl(0),this.identifierPrefix=u,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function oc(t,s,a,u,f,p,v,S,I){return t=new Gy(t,s,a,S,I),s===1?(s=1,p===!0&&(s|=8)):s=0,p=tn(3,null,null,s),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},wu(p),t}function Jy(t,s,a){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:u==null?null:""+u,children:t,containerInfo:s,implementation:a}}function Xh(t){if(!t)return hr;t=t._reactInternals;e:{if(Pn(t)!==t||t.tag!==1)throw Error(r(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Ut(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(r(171))}if(t.tag===1){var a=t.type;if(Ut(a))return Tf(t,a,s)}return s}function Zh(t,s,a,u,f,p,v,S,I){return t=oc(a,u,!0,t,f,p,v,S,I),t.context=Xh(null),a=t.current,u=At(),f=_r(a),p=Mn(u,f),p.callback=s??null,gr(a,p,f),t.current.lanes=f,ki(t,f,u),Mt(t,u),t}function ja(t,s,a,u){var f=s.current,p=At(),v=_r(f);return a=Xh(a),s.context===null?s.context=a:s.pendingContext=a,s=Mn(p,v),s.payload={element:t},u=u===void 0?null:u,u!==null&&(s.callback=u),t=gr(f,s,v),t!==null&&(fn(t,f,v,p),pa(t,f,v)),v}function $a(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ep(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function ac(t,s){ep(t,s),(t=t.alternate)&&ep(t,s)}function Qy(){return null}var tp=typeof reportError=="function"?reportError:function(t){console.error(t)};function lc(t){this._internalRoot=t}Ma.prototype.render=lc.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));ja(t,s,null,null)},Ma.prototype.unmount=lc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Xr(function(){ja(null,t,null,null)}),s[Nn]=null}};function Ma(t){this._internalRoot=t}Ma.prototype.unstable_scheduleHydration=function(t){if(t){var s=jd();t={blockedOn:null,target:t,priority:s};for(var a=0;a<lr.length&&s!==0&&s<lr[a].priority;a++);lr.splice(a,0,t),a===0&&Fd(t)}};function uc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function np(){}function Yy(t,s,a,u,f){if(f){if(typeof u=="function"){var p=u;u=function(){var j=$a(v);p.call(j)}}var v=Zh(s,u,t,0,null,!1,!1,"",np);return t._reactRootContainer=v,t[Nn]=v.current,Ui(t.nodeType===8?t.parentNode:t),Xr(),v}for(;f=t.lastChild;)t.removeChild(f);if(typeof u=="function"){var S=u;u=function(){var j=$a(I);S.call(j)}}var I=oc(t,0,!1,null,null,!1,!1,"",np);return t._reactRootContainer=I,t[Nn]=I.current,Ui(t.nodeType===8?t.parentNode:t),Xr(function(){ja(s,I,a,u)}),I}function za(t,s,a,u,f){var p=a._reactRootContainer;if(p){var v=p;if(typeof f=="function"){var S=f;f=function(){var I=$a(v);S.call(I)}}ja(s,v,t,f)}else v=Yy(a,s,t,f,u);return $a(v)}Dd=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var a=Si(s.pendingLanes);a!==0&&(Ll(s,a|1),Mt(s,Xe()),(Le&6)===0&&(Ms=Xe()+500,pr()))}break;case 13:Xr(function(){var u=$n(t,1);if(u!==null){var f=At();fn(u,t,1,f)}}),ac(t,1)}},Nl=function(t){if(t.tag===13){var s=$n(t,134217728);if(s!==null){var a=At();fn(s,t,134217728,a)}ac(t,134217728)}},Ud=function(t){if(t.tag===13){var s=_r(t),a=$n(t,s);if(a!==null){var u=At();fn(a,t,s,u)}ac(t,s)}},jd=function(){return $e},$d=function(t,s){var a=$e;try{return $e=t,s()}finally{$e=a}},Mr=function(t,s,a){switch(s){case"input":if(nr(t,a),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==t&&u.form===t.form){var f=sa(u);if(!f)throw Error(r(90));jr(u),nr(u,f)}}}break;case"textarea":ie(t,a);break;case"select":s=a.value,s!=null&&it(t,!!a.multiple,s,!1)}},Oo=ec,vi=Xr;var Xy={usingClientEntryPoint:!1,Events:[Mi,Ts,sa,Fr,gi,ec]},Zi={findFiberByHostInstance:Hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zy={bundleType:Zi.bundleType,version:Zi.version,rendererPackageName:Zi.rendererPackageName,rendererConfig:Zi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Lo(t),t===null?null:t.stateNode},findFiberByHostInstance:Zi.findFiberByHostInstance||Qy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ba.isDisabled&&Ba.supportsFiber)try{Oe=Ba.inject(Zy),Ie=Ba}catch{}}return Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xy,Ft.createPortal=function(t,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uc(s))throw Error(r(200));return Jy(t,s,null,a)},Ft.createRoot=function(t,s){if(!uc(t))throw Error(r(299));var a=!1,u="",f=tp;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=oc(t,1,!1,null,null,a,!1,u,f),t[Nn]=s.current,Ui(t.nodeType===8?t.parentNode:t),new lc(s)},Ft.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=Lo(s),t=t===null?null:t.stateNode,t},Ft.flushSync=function(t){return Xr(t)},Ft.hydrate=function(t,s,a){if(!Fa(s))throw Error(r(200));return za(null,t,s,!0,a)},Ft.hydrateRoot=function(t,s,a){if(!uc(t))throw Error(r(405));var u=a!=null&&a.hydratedSources||null,f=!1,p="",v=tp;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),s=Zh(s,null,t,1,a??null,f,!1,p,v),t[Nn]=s.current,Ui(t),u)for(t=0;t<u.length;t++)a=u[t],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Ma(s)},Ft.render=function(t,s,a){if(!Fa(s))throw Error(r(200));return za(null,t,s,!1,a)},Ft.unmountComponentAtNode=function(t){if(!Fa(t))throw Error(r(40));return t._reactRootContainer?(Xr(function(){za(null,null,t,!1,function(){t._reactRootContainer=null,t[Nn]=null})}),!0):!1},Ft.unstable_batchedUpdates=ec,Ft.unstable_renderSubtreeIntoContainer=function(t,s,a,u){if(!Fa(a))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return za(t,s,a,!1,u)},Ft.version="18.3.1-next-f1338f8080-20240426",Ft}var cp;function uw(){if(cp)return fc.exports;cp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),fc.exports=lw(),fc.exports}var dp;function cw(){if(dp)return Va;dp=1;var n=uw();return Va.createRoot=n.createRoot,Va.hydrateRoot=n.hydrateRoot,Va}var dw=cw(),k=ud();const Vm=Bm(k),fw=tw({__proto__:null,default:Vm},[k]);/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var fp="popstate";function hw(n={}){function e(i,o){let{pathname:l,search:c,hash:d}=i.location;return Fc("",{pathname:l,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(i,o){return typeof o=="string"?o:ho(o)}return mw(e,r,null,n)}function pt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function In(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pw(){return Math.random().toString(36).substring(2,10)}function hp(n,e){return{usr:n.state,key:n.key,idx:e}}function Fc(n,e,r=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?yo(e):e,state:r,key:e&&e.key||i||pw()}}function ho({pathname:n="/",search:e="",hash:r=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(n+=r.charAt(0)==="#"?r:"#"+r),n}function yo(n){let e={};if(n){let r=n.indexOf("#");r>=0&&(e.hash=n.substring(r),n=n.substring(0,r));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function mw(n,e,r,i={}){let{window:o=document.defaultView,v5Compat:l=!1}=i,c=o.history,d="POP",h=null,g=m();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function m(){return(c.state||{idx:null}).idx}function y(){d="POP";let P=m(),D=P==null?null:P-g;g=P,h&&h({action:d,location:E.location,delta:D})}function w(P,D){d="PUSH";let b=Fc(E.location,P,D);g=m()+1;let A=hp(b,g),C=E.createHref(b);try{c.pushState(A,"",C)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;o.location.assign(C)}l&&h&&h({action:d,location:E.location,delta:1})}function R(P,D){d="REPLACE";let b=Fc(E.location,P,D);g=m();let A=hp(b,g),C=E.createHref(b);c.replaceState(A,"",C),l&&h&&h({action:d,location:E.location,delta:0})}function x(P){return gw(P)}let E={get action(){return d},get location(){return n(o,c)},listen(P){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(fp,y),h=P,()=>{o.removeEventListener(fp,y),h=null}},createHref(P){return e(o,P)},createURL:x,encodeLocation(P){let D=x(P);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:w,replace:R,go(P){return c.go(P)}};return E}function gw(n,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),pt(r,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:ho(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function Hm(n,e,r="/"){return vw(n,e,r,!1)}function vw(n,e,r,i){let o=typeof e=="string"?yo(e):e,l=Qn(o.pathname||"/",r);if(l==null)return null;let c=Wm(n);yw(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let g=Ow(l);d=Iw(c[h],g,i)}return d}function Wm(n,e=[],r=[],i="",o=!1){let l=(c,d,h=o,g)=>{let m={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(i)&&h)return;pt(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length)}let y=qn([i,m.relativePath]),w=r.concat(m);c.children&&c.children.length>0&&(pt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Wm(c.children,e,w,y,h)),!(c.path==null&&!c.index)&&e.push({path:y,score:Cw(y,c.index),routesMeta:w})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let h of Km(c.path))l(c,d,!0,h)}),e}function Km(n){let e=n.split("/");if(e.length===0)return[];let[r,...i]=e,o=r.endsWith("?"),l=r.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let c=Km(i.join("/")),d=[];return d.push(...c.map(h=>h===""?l:[l,h].join("/"))),o&&d.push(...c),d.map(h=>n.startsWith("/")&&h===""?"/":h)}function yw(n){n.sort((e,r)=>e.score!==r.score?r.score-e.score:Tw(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var ww=/^:[\w-]+$/,_w=3,Sw=2,kw=1,Ew=10,bw=-2,pp=n=>n==="*";function Cw(n,e){let r=n.split("/"),i=r.length;return r.some(pp)&&(i+=bw),e&&(i+=Sw),r.filter(o=>!pp(o)).reduce((o,l)=>o+(ww.test(l)?_w:l===""?kw:Ew),i)}function Tw(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function Iw(n,e,r=!1){let{routesMeta:i}=n,o={},l="/",c=[];for(let d=0;d<i.length;++d){let h=i[d],g=d===i.length-1,m=l==="/"?e:e.slice(l.length)||"/",y=al({path:h.relativePath,caseSensitive:h.caseSensitive,end:g},m),w=h.route;if(!y&&g&&r&&!i[i.length-1].route.index&&(y=al({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},m)),!y)return null;Object.assign(o,y.params),c.push({params:o,pathname:qn([l,y.pathname]),pathnameBase:Lw(qn([l,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(l=qn([l,y.pathnameBase]))}return c}function al(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[r,i]=Rw(n.path,n.caseSensitive,n.end),o=e.match(r);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((g,{paramName:m,isOptional:y},w)=>{if(m==="*"){let x=d[w]||"";c=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}const R=d[w];return y&&!R?g[m]=void 0:g[m]=(R||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function Rw(n,e=!1,r=!0){In(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(i.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function Ow(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return In(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Qn(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=n.charAt(r);return i&&i!=="/"?null:n.slice(r)||"/"}function Aw(n,e="/"){let{pathname:r,search:i="",hash:o=""}=typeof n=="string"?yo(n):n;return{pathname:r?r.startsWith("/")?r:xw(r,e):e,search:Nw(i),hash:Dw(o)}}function xw(n,e){let r=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function mc(n,e,r,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Pw(n){return n.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function qm(n){let e=Pw(n);return e.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase)}function Gm(n,e,r,i=!1){let o;typeof n=="string"?o=yo(n):(o={...n},pt(!o.pathname||!o.pathname.includes("?"),mc("?","pathname","search",o)),pt(!o.pathname||!o.pathname.includes("#"),mc("#","pathname","hash",o)),pt(!o.search||!o.search.includes("#"),mc("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,d;if(c==null)d=r;else{let y=e.length-1;if(!i&&c.startsWith("..")){let w=c.split("/");for(;w[0]==="..";)w.shift(),y-=1;o.pathname=w.join("/")}d=y>=0?e[y]:"/"}let h=Aw(o,d),g=c&&c!=="/"&&c.endsWith("/"),m=(l||c===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(g||m)&&(h.pathname+="/"),h}var qn=n=>n.join("/").replace(/\/\/+/g,"/"),Lw=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Nw=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Dw=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Uw(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Jm=["POST","PUT","PATCH","DELETE"];new Set(Jm);var jw=["GET",...Jm];new Set(jw);var ci=k.createContext(null);ci.displayName="DataRouter";var yl=k.createContext(null);yl.displayName="DataRouterState";k.createContext(!1);var Qm=k.createContext({isTransitioning:!1});Qm.displayName="ViewTransition";var $w=k.createContext(new Map);$w.displayName="Fetchers";var Mw=k.createContext(null);Mw.displayName="Await";var On=k.createContext(null);On.displayName="Navigation";var wl=k.createContext(null);wl.displayName="Location";var Xn=k.createContext({outlet:null,matches:[],isDataRoute:!1});Xn.displayName="Route";var cd=k.createContext(null);cd.displayName="RouteError";function Fw(n,{relative:e}={}){pt(wo(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=k.useContext(On),{hash:o,pathname:l,search:c}=_o(n,{relative:e}),d=l;return r!=="/"&&(d=l==="/"?r:qn([r,l])),i.createHref({pathname:d,search:c,hash:o})}function wo(){return k.useContext(wl)!=null}function Zn(){return pt(wo(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(wl).location}var Ym="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Xm(n){k.useContext(On).static||k.useLayoutEffect(n)}function zw(){let{isDataRoute:n}=k.useContext(Xn);return n?e0():Bw()}function Bw(){pt(wo(),"useNavigate() may be used only in the context of a <Router> component.");let n=k.useContext(ci),{basename:e,navigator:r}=k.useContext(On),{matches:i}=k.useContext(Xn),{pathname:o}=Zn(),l=JSON.stringify(qm(i)),c=k.useRef(!1);return Xm(()=>{c.current=!0}),k.useCallback((h,g={})=>{if(In(c.current,Ym),!c.current)return;if(typeof h=="number"){r.go(h);return}let m=Gm(h,JSON.parse(l),o,g.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:qn([e,m.pathname])),(g.replace?r.replace:r.push)(m,g.state,g)},[e,r,l,o,n])}k.createContext(null);function _o(n,{relative:e}={}){let{matches:r}=k.useContext(Xn),{pathname:i}=Zn(),o=JSON.stringify(qm(r));return k.useMemo(()=>Gm(n,JSON.parse(o),i,e==="path"),[n,o,i,e])}function Vw(n,e,r,i,o){pt(wo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=k.useContext(On),{matches:c}=k.useContext(Xn),d=c[c.length-1],h=d?d.params:{},g=d?d.pathname:"/",m=d?d.pathnameBase:"/",y=d&&d.route;{let b=y&&y.path||"";Zm(g,!y||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let w=Zn(),R;R=w;let x=R.pathname||"/",E=x;if(m!=="/"){let b=m.replace(/^\//,"").split("/");E="/"+x.replace(/^\//,"").split("/").slice(b.length).join("/")}let P=Hm(n,{pathname:E});return In(y||P!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),In(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Gw(P&&P.map(b=>Object.assign({},b,{params:Object.assign({},h,b.params),pathname:qn([m,l.encodeLocation?l.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?m:qn([m,l.encodeLocation?l.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),c,r,i,o)}function Hw(){let n=Zw(),e=Uw(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),r=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:l},"ErrorBoundary")," or"," ",k.createElement("code",{style:l},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),r?k.createElement("pre",{style:o},r):null,c)}var Ww=k.createElement(Hw,null),Kw=class extends k.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?k.createElement(Xn.Provider,{value:this.props.routeContext},k.createElement(cd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function qw({routeContext:n,match:e,children:r}){let i=k.useContext(ci);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Xn.Provider,{value:n},r)}function Gw(n,e=[],r=null,i=null,o=null){if(n==null){if(!r)return null;if(r.errors)n=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)n=r.matches;else return null}let l=n,c=r?.errors;if(c!=null){let g=l.findIndex(m=>m.route.id&&c?.[m.route.id]!==void 0);pt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let d=!1,h=-1;if(r)for(let g=0;g<l.length;g++){let m=l[g];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=g),m.route.id){let{loaderData:y,errors:w}=r,R=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!w||w[m.route.id]===void 0);if(m.route.lazy||R){d=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((g,m,y)=>{let w,R=!1,x=null,E=null;r&&(w=c&&m.route.id?c[m.route.id]:void 0,x=m.route.errorElement||Ww,d&&(h<0&&y===0?(Zm("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,E=null):h===y&&(R=!0,E=m.route.hydrateFallbackElement||null)));let P=e.concat(l.slice(0,y+1)),D=()=>{let b;return w?b=x:R?b=E:m.route.Component?b=k.createElement(m.route.Component,null):m.route.element?b=m.route.element:b=g,k.createElement(qw,{match:m,routeContext:{outlet:g,matches:P,isDataRoute:r!=null},children:b})};return r&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?k.createElement(Kw,{location:r.location,revalidation:r.revalidation,component:x,error:w,children:D(),routeContext:{outlet:null,matches:P,isDataRoute:!0},unstable_onError:i}):D()},null)}function dd(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jw(n){let e=k.useContext(ci);return pt(e,dd(n)),e}function Qw(n){let e=k.useContext(yl);return pt(e,dd(n)),e}function Yw(n){let e=k.useContext(Xn);return pt(e,dd(n)),e}function fd(n){let e=Yw(n),r=e.matches[e.matches.length-1];return pt(r.route.id,`${n} can only be used on routes that contain a unique "id"`),r.route.id}function Xw(){return fd("useRouteId")}function Zw(){let n=k.useContext(cd),e=Qw("useRouteError"),r=fd("useRouteError");return n!==void 0?n:e.errors?.[r]}function e0(){let{router:n}=Jw("useNavigate"),e=fd("useNavigate"),r=k.useRef(!1);return Xm(()=>{r.current=!0}),k.useCallback(async(o,l={})=>{In(r.current,Ym),r.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...l}))},[n,e])}var mp={};function Zm(n,e,r){!e&&!mp[n]&&(mp[n]=!0,In(!1,r))}k.memo(t0);function t0({routes:n,future:e,state:r,unstable_onError:i}){return Vw(n,void 0,r,i,e)}function n0({basename:n="/",children:e=null,location:r,navigationType:i="POP",navigator:o,static:l=!1}){pt(!wo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=k.useMemo(()=>({basename:c,navigator:o,static:l,future:{}}),[c,o,l]);typeof r=="string"&&(r=yo(r));let{pathname:h="/",search:g="",hash:m="",state:y=null,key:w="default"}=r,R=k.useMemo(()=>{let x=Qn(h,c);return x==null?null:{location:{pathname:x,search:g,hash:m,state:y,key:w},navigationType:i}},[c,h,g,m,y,w,i]);return In(R!=null,`<Router basename="${c}"> is not able to match the URL "${h}${g}${m}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:k.createElement(On.Provider,{value:d},k.createElement(wl.Provider,{children:e,value:R}))}var sl="get",il="application/x-www-form-urlencoded";function _l(n){return n!=null&&typeof n.tagName=="string"}function r0(n){return _l(n)&&n.tagName.toLowerCase()==="button"}function s0(n){return _l(n)&&n.tagName.toLowerCase()==="form"}function i0(n){return _l(n)&&n.tagName.toLowerCase()==="input"}function o0(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function a0(n,e){return n.button===0&&(!e||e==="_self")&&!o0(n)}var Ha=null;function l0(){if(Ha===null)try{new FormData(document.createElement("form"),0),Ha=!1}catch{Ha=!0}return Ha}var u0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gc(n){return n!=null&&!u0.has(n)?(In(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${il}"`),null):n}function c0(n,e){let r,i,o,l,c;if(s0(n)){let d=n.getAttribute("action");i=d?Qn(d,e):null,r=n.getAttribute("method")||sl,o=gc(n.getAttribute("enctype"))||il,l=new FormData(n)}else if(r0(n)||i0(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||d.getAttribute("action");if(i=h?Qn(h,e):null,r=n.getAttribute("formmethod")||d.getAttribute("method")||sl,o=gc(n.getAttribute("formenctype"))||gc(d.getAttribute("enctype"))||il,l=new FormData(d,n),!l0()){let{name:g,type:m,value:y}=n;if(m==="image"){let w=g?`${g}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else g&&l.append(g,y)}}else{if(_l(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=sl,i=null,o=il,c=n}return l&&o==="text/plain"&&(c=l,l=void 0),{action:i,method:r.toLowerCase(),encType:o,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function hd(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function d0(n,e,r){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${r}`:e&&Qn(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function f0(n,e){if(n.id in e)return e[n.id];try{let r=await import(n.module);return e[n.id]=r,r}catch(r){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function h0(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function p0(n,e,r){let i=await Promise.all(n.map(async o=>{let l=e.routes[o.route.id];if(l){let c=await f0(l,r);return c.links?c.links():[]}return[]}));return y0(i.flat(1).filter(h0).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function gp(n,e,r,i,o,l){let c=(h,g)=>r[g]?h.route.id!==r[g].route.id:!0,d=(h,g)=>r[g].pathname!==h.pathname||r[g].route.path?.endsWith("*")&&r[g].params["*"]!==h.params["*"];return l==="assets"?e.filter((h,g)=>c(h,g)||d(h,g)):l==="data"?e.filter((h,g)=>{let m=i.routes[h.route.id];if(!m||!m.hasLoader)return!1;if(c(h,g)||d(h,g))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function m0(n,e,{includeHydrateFallback:r}={}){return g0(n.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function g0(n){return[...new Set(n)]}function v0(n){let e={},r=Object.keys(n).sort();for(let i of r)e[i]=n[i];return e}function y0(n,e){let r=new Set;return new Set(e),n.reduce((i,o)=>{let l=JSON.stringify(v0(o));return r.has(l)||(r.add(l),i.push({key:l,link:o})),i},[])}function eg(){let n=k.useContext(ci);return hd(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function w0(){let n=k.useContext(yl);return hd(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var pd=k.createContext(void 0);pd.displayName="FrameworkContext";function tg(){let n=k.useContext(pd);return hd(n,"You must render this element inside a <HydratedRouter> element"),n}function _0(n,e){let r=k.useContext(pd),[i,o]=k.useState(!1),[l,c]=k.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:g,onMouseLeave:m,onTouchStart:y}=e,w=k.useRef(null);k.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let E=D=>{D.forEach(b=>{c(b.isIntersecting)})},P=new IntersectionObserver(E,{threshold:.5});return w.current&&P.observe(w.current),()=>{P.disconnect()}}},[n]),k.useEffect(()=>{if(i){let E=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(E)}}},[i]);let R=()=>{o(!0)},x=()=>{o(!1),c(!1)};return r?n!=="intent"?[l,w,{}]:[l,w,{onFocus:to(d,R),onBlur:to(h,x),onMouseEnter:to(g,R),onMouseLeave:to(m,x),onTouchStart:to(y,R)}]:[!1,w,{}]}function to(n,e){return r=>{n&&n(r),r.defaultPrevented||e(r)}}function S0({page:n,...e}){let{router:r}=eg(),i=k.useMemo(()=>Hm(r.routes,n,r.basename),[r.routes,n,r.basename]);return i?k.createElement(E0,{page:n,matches:i,...e}):null}function k0(n){let{manifest:e,routeModules:r}=tg(),[i,o]=k.useState([]);return k.useEffect(()=>{let l=!1;return p0(n,e,r).then(c=>{l||o(c)}),()=>{l=!0}},[n,e,r]),i}function E0({page:n,matches:e,...r}){let i=Zn(),{manifest:o,routeModules:l}=tg(),{basename:c}=eg(),{loaderData:d,matches:h}=w0(),g=k.useMemo(()=>gp(n,e,h,o,i,"data"),[n,e,h,o,i]),m=k.useMemo(()=>gp(n,e,h,o,i,"assets"),[n,e,h,o,i]),y=k.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let x=new Set,E=!1;if(e.forEach(D=>{let b=o.routes[D.route.id];!b||!b.hasLoader||(!g.some(A=>A.route.id===D.route.id)&&D.route.id in d&&l[D.route.id]?.shouldRevalidate||b.hasClientLoader?E=!0:x.add(D.route.id))}),x.size===0)return[];let P=d0(n,c,"data");return E&&x.size>0&&P.searchParams.set("_routes",e.filter(D=>x.has(D.route.id)).map(D=>D.route.id).join(",")),[P.pathname+P.search]},[c,d,i,o,g,e,n,l]),w=k.useMemo(()=>m0(m,o),[m,o]),R=k0(m);return k.createElement(k.Fragment,null,y.map(x=>k.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...r})),w.map(x=>k.createElement("link",{key:x,rel:"modulepreload",href:x,...r})),R.map(({key:x,link:E})=>k.createElement("link",{key:x,nonce:r.nonce,...E})))}function b0(...n){return e=>{n.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var ng=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ng&&(window.__reactRouterVersion="7.9.1")}catch{}function C0({basename:n,children:e,window:r}){let i=k.useRef();i.current==null&&(i.current=hw({window:r,v5Compat:!0}));let o=i.current,[l,c]=k.useState({action:o.action,location:o.location}),d=k.useCallback(h=>{k.startTransition(()=>c(h))},[c]);return k.useLayoutEffect(()=>o.listen(d),[o,d]),k.createElement(n0,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:o})}var rg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sg=k.forwardRef(function({onClick:e,discover:r="render",prefetch:i="none",relative:o,reloadDocument:l,replace:c,state:d,target:h,to:g,preventScrollReset:m,viewTransition:y,...w},R){let{basename:x}=k.useContext(On),E=typeof g=="string"&&rg.test(g),P,D=!1;if(typeof g=="string"&&E&&(P=g,ng))try{let he=new URL(window.location.href),be=g.startsWith("//")?new URL(he.protocol+g):new URL(g),De=Qn(be.pathname,x);be.origin===he.origin&&De!=null?g=De+be.search+be.hash:D=!0}catch{In(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=Fw(g,{relative:o}),[A,C,$]=_0(i,w),F=O0(g,{replace:c,state:d,target:h,preventScrollReset:m,relative:o,viewTransition:y});function G(he){e&&e(he),he.defaultPrevented||F(he)}let le=k.createElement("a",{...w,...$,href:P||b,onClick:D||l?e:G,ref:b0(R,C),target:h,"data-discover":!E&&r==="render"?"true":void 0});return A&&!E?k.createElement(k.Fragment,null,le,k.createElement(S0,{page:b})):le});sg.displayName="Link";var T0=k.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:d,children:h,...g},m){let y=_o(c,{relative:g.relative}),w=Zn(),R=k.useContext(yl),{navigator:x,basename:E}=k.useContext(On),P=R!=null&&N0(y)&&d===!0,D=x.encodeLocation?x.encodeLocation(y).pathname:y.pathname,b=w.pathname,A=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;r||(b=b.toLowerCase(),A=A?A.toLowerCase():null,D=D.toLowerCase()),A&&E&&(A=Qn(A,E)||A);const C=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let $=b===D||!o&&b.startsWith(D)&&b.charAt(C)==="/",F=A!=null&&(A===D||!o&&A.startsWith(D)&&A.charAt(D.length)==="/"),G={isActive:$,isPending:F,isTransitioning:P},le=$?e:void 0,he;typeof i=="function"?he=i(G):he=[i,$?"active":null,F?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let be=typeof l=="function"?l(G):l;return k.createElement(sg,{...g,"aria-current":le,className:he,ref:m,style:be,to:c,viewTransition:d},typeof h=="function"?h(G):h)});T0.displayName="NavLink";var I0=k.forwardRef(({discover:n="render",fetcherKey:e,navigate:r,reloadDocument:i,replace:o,state:l,method:c=sl,action:d,onSubmit:h,relative:g,preventScrollReset:m,viewTransition:y,...w},R)=>{let x=P0(),E=L0(d,{relative:g}),P=c.toLowerCase()==="get"?"get":"post",D=typeof d=="string"&&rg.test(d),b=A=>{if(h&&h(A),A.defaultPrevented)return;A.preventDefault();let C=A.nativeEvent.submitter,$=C?.getAttribute("formmethod")||c;x(C||A.currentTarget,{fetcherKey:e,method:$,navigate:r,replace:o,state:l,relative:g,preventScrollReset:m,viewTransition:y})};return k.createElement("form",{ref:R,method:P,action:E,onSubmit:i?h:b,...w,"data-discover":!D&&n==="render"?"true":void 0})});I0.displayName="Form";function R0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ig(n){let e=k.useContext(ci);return pt(e,R0(n)),e}function O0(n,{target:e,replace:r,state:i,preventScrollReset:o,relative:l,viewTransition:c}={}){let d=zw(),h=Zn(),g=_o(n,{relative:l});return k.useCallback(m=>{if(a0(m,e)){m.preventDefault();let y=r!==void 0?r:ho(h)===ho(g);d(n,{replace:y,state:i,preventScrollReset:o,relative:l,viewTransition:c})}},[h,d,g,r,i,e,n,o,l,c])}var A0=0,x0=()=>`__${String(++A0)}__`;function P0(){let{router:n}=ig("useSubmit"),{basename:e}=k.useContext(On),r=Xw();return k.useCallback(async(i,o={})=>{let{action:l,method:c,encType:d,formData:h,body:g}=c0(i,e);if(o.navigate===!1){let m=o.fetcherKey||x0();await n.fetch(m,r,o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:g,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await n.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:g,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,r])}function L0(n,{relative:e}={}){let{basename:r}=k.useContext(On),i=k.useContext(Xn);pt(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),l={..._o(n||".",{relative:e})},c=Zn();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),h=d.getAll("index");if(h.some(m=>m==="")){d.delete("index"),h.filter(y=>y).forEach(y=>d.append("index",y));let m=d.toString();l.search=m?`?${m}`:""}}return(!n||n===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(l.pathname=l.pathname==="/"?r:qn([r,l.pathname])),ho(l)}function N0(n,{relative:e}={}){let r=k.useContext(Qm);pt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=ig("useViewTransitionState"),o=_o(n,{relative:e});if(!r.isTransitioning)return!1;let l=Qn(r.currentLocation.pathname,i)||r.currentLocation.pathname,c=Qn(r.nextLocation.pathname,i)||r.nextLocation.pathname;return al(o.pathname,c)!=null||al(o.pathname,l)!=null}const zs={p16897f80:"M33.9329 3.71H38.7209V10.304H41.2549V12.32H33.9329V10.304H36.4529V5.726H33.9329V3.71ZM37.4749 2.688C37.0176 2.688 36.6629 2.57133 36.4109 2.338C36.1589 2.10467 36.0329 1.77333 36.0329 1.344C36.0329 0.914667 36.1589 0.583334 36.4109 0.350001C36.6629 0.116667 37.0176 0 37.4749 0C37.9416 0 38.2963 0.116667 38.5389 0.350001C38.7909 0.583334 38.9169 0.914667 38.9169 1.344C38.9169 1.77333 38.7909 2.10467 38.5389 2.338C38.2963 2.57133 37.9416 2.688 37.4749 2.688Z",p1ac03e00:"M21.4955 1.48401V3.71001H25.2615V5.72601H21.4955V9.32401C21.4955 9.73468 21.5702 10.0473 21.7195 10.262C21.8688 10.4673 22.0882 10.57 22.3775 10.57C22.6762 10.57 22.9188 10.444 23.1055 10.192C23.2922 9.94001 23.4415 9.52934 23.5535 8.96001H25.5555C25.4995 10.136 25.1915 11.0367 24.6315 11.662C24.0808 12.278 23.3108 12.586 22.3215 12.586C21.3228 12.586 20.5575 12.306 20.0255 11.746C19.4935 11.186 19.2275 10.3833 19.2275 9.33801V5.72601H17.6175V3.71001H19.2275V1.48401H21.4955Z",p1c133f80:"M45.7377 12.586C44.907 12.586 44.179 12.404 43.5537 12.04C42.9377 11.6667 42.4617 11.144 42.1257 10.472C41.799 9.79067 41.6357 8.988 41.6357 8.064C41.6357 7.112 41.8037 6.29533 42.1397 5.614C42.485 4.92333 42.9703 4.39133 43.5957 4.018C44.221 3.63533 44.9583 3.444 45.8077 3.444C46.573 3.444 47.2357 3.60267 47.7957 3.92C48.365 4.228 48.813 4.66667 49.1397 5.236C49.4663 5.80533 49.6437 6.47733 49.6717 7.252H47.6417C47.5203 6.68267 47.301 6.244 46.9837 5.936C46.6663 5.61867 46.2697 5.46 45.7937 5.46C45.1777 5.46 44.6923 5.68867 44.3377 6.146C43.9923 6.594 43.8197 7.23333 43.8197 8.064C43.8197 8.85733 43.9877 9.47333 44.3237 9.912C44.669 10.3507 45.1403 10.57 45.7377 10.57C46.1577 10.57 46.5123 10.4393 46.8017 10.178C47.1003 9.91667 47.3197 9.548 47.4597 9.072H49.5037C49.4477 9.79067 49.2517 10.416 48.9157 10.948C48.589 11.4707 48.1503 11.8767 47.5997 12.166C47.0583 12.446 46.4377 12.586 45.7377 12.586Z",p2eac9c00:"M13.1487 12.586C12.3087 12.586 11.5807 12.3993 10.9647 12.026C10.3487 11.6527 9.87271 11.1253 9.53671 10.444C9.20071 9.76267 9.03271 8.95533 9.03271 8.022C9.03271 7.07933 9.20071 6.26733 9.53671 5.586C9.87271 4.90467 10.3487 4.37733 10.9647 4.004C11.5807 3.63067 12.3087 3.444 13.1487 3.444C13.9887 3.444 14.7167 3.63067 15.3327 4.004C15.9487 4.37733 16.4247 4.90467 16.7607 5.586C17.0967 6.26733 17.2647 7.07933 17.2647 8.022C17.2647 8.95533 17.0967 9.76267 16.7607 10.444C16.4247 11.1253 15.9487 11.6527 15.3327 12.026C14.726 12.3993 13.998 12.586 13.1487 12.586ZM13.1487 10.57C13.7647 10.57 14.2407 10.346 14.5767 9.898C14.9127 9.45 15.0807 8.82467 15.0807 8.022C15.0807 7.21 14.9127 6.58 14.5767 6.132C14.2407 5.684 13.7647 5.46 13.1487 5.46C12.542 5.46 12.066 5.684 11.7207 6.132C11.3847 6.58 11.2167 7.21 11.2167 8.022C11.2167 8.82467 11.3847 9.45 11.7207 9.898C12.066 10.346 12.542 10.57 13.1487 10.57Z",p7476d00:"M29.0582 1.48401V3.71001H32.8242V5.72601H29.0582V9.32401C29.0582 9.73468 29.1329 10.0473 29.2822 10.262C29.4316 10.4673 29.6509 10.57 29.9402 10.57C30.2389 10.57 30.4816 10.444 30.6682 10.192C30.8549 9.94001 31.0042 9.52934 31.1162 8.96001H33.1182C33.0622 10.136 32.7542 11.0367 32.1942 11.662C31.6436 12.278 30.8736 12.586 29.8842 12.586C28.8856 12.586 28.1202 12.306 27.5882 11.746C27.0562 11.186 26.7902 10.3833 26.7902 9.33801V5.72601H25.1802V3.71001H26.7902V1.48401H29.0582Z",p7638900:"M3.92 12.586C3.108 12.586 2.408 12.432 1.82 12.124C1.24133 11.816 0.793333 11.3773 0.476 10.808C0.158667 10.2293 0 9.54333 0 8.74999V7.41999H2.324V8.666C2.324 9.23533 2.45933 9.67399 2.73 9.98199C3.01 10.2807 3.40667 10.43 3.92 10.43C4.43333 10.43 4.82533 10.2807 5.096 9.98199C5.376 9.67399 5.516 9.23533 5.516 8.666V3.388H0.798V1.12H7.882V8.74999C7.882 9.54333 7.72333 10.2293 7.406 10.808C7.08867 11.3773 6.63133 11.816 6.034 12.124C5.446 12.432 4.74133 12.586 3.92 12.586Z"},D0="modulepreload",U0=function(n){return"/"+n},vp={},So=function(e,r,i){let o=Promise.resolve();if(r&&r.length>0){let c=function(g){return Promise.all(g.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");o=c(r.map(g=>{if(g=U0(g),g in vp)return;vp[g]=!0;const m=g.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${y}`))return;const w=document.createElement("link");if(w.rel=m?"stylesheet":D0,m||(w.as="script"),w.crossOrigin="",w.href=g,h&&w.setAttribute("nonce",h),document.head.appendChild(w),m)return new Promise((R,x)=>{w.addEventListener("load",R),w.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return o.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},j0=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...r)=>So(async()=>{const{default:i}=await Promise.resolve().then(()=>di);return{default:i}},[]).then(({default:i})=>i(...r)):e=fetch,(...r)=>e(...r)};class md extends Error{constructor(e,r="FunctionsError",i){super(e),this.name=r,this.context=i}}class $0 extends md{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class yp extends md{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class wp extends md{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var zc;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(zc||(zc={}));var M0=function(n,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(m){try{g(i.next(m))}catch(y){c(y)}}function h(m){try{g(i.throw(m))}catch(y){c(y)}}function g(m){m.done?l(m.value):o(m.value).then(d,h)}g((i=i.apply(n,e||[])).next())})};class F0{constructor(e,{headers:r={},customFetch:i,region:o=zc.Any}={}){this.url=e,this.headers=r,this.region=o,this.fetch=j0(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var i;return M0(this,void 0,void 0,function*(){try{const{headers:o,method:l,body:c}=r;let d={},{region:h}=r;h||(h=this.region);const g=new URL(`${this.url}/${e}`);h&&h!=="any"&&(d["x-region"]=h,g.searchParams.set("forceFunctionRegion",h));let m;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",m=c):typeof c=="string"?(d["Content-Type"]="text/plain",m=c):typeof FormData<"u"&&c instanceof FormData?m=c:(d["Content-Type"]="application/json",m=JSON.stringify(c)));const y=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),o),body:m}).catch(E=>{throw new $0(E)}),w=y.headers.get("x-relay-error");if(w&&w==="true")throw new yp(y);if(!y.ok)throw new wp(y);let R=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),x;return R==="application/json"?x=yield y.json():R==="application/octet-stream"?x=yield y.blob():R==="text/event-stream"?x=y:R==="multipart/form-data"?x=yield y.formData():x=yield y.text(),{data:x,error:null,response:y}}catch(o){return{data:null,error:o,response:o instanceof wp||o instanceof yp?o.context:void 0}}})}}var yt={},Bs={},Vs={},Hs={},Ws={},Ks={},z0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ui=z0();const B0=ui.fetch,og=ui.fetch.bind(ui),ag=ui.Headers,V0=ui.Request,H0=ui.Response,di=Object.freeze(Object.defineProperty({__proto__:null,Headers:ag,Request:V0,Response:H0,default:og,fetch:B0},Symbol.toStringTag,{value:"Module"})),W0=nw(di);var Wa={},_p;function lg(){if(_p)return Wa;_p=1,Object.defineProperty(Wa,"__esModule",{value:!0});class n extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Wa.default=n,Wa}var Sp;function ug(){if(Sp)return Ks;Sp=1;var n=Ks&&Ks.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ks,"__esModule",{value:!0});const e=n(W0),r=n(lg());class i{constructor(l){var c,d;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(c=l.shouldThrowOnError)!==null&&c!==void 0?c:!1,this.signal=l.signal,this.isMaybeSingle=(d=l.isMaybeSingle)!==null&&d!==void 0?d:!1,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,c){return this.headers=new Headers(this.headers),this.headers.set(l,c),this}then(l,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let h=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var m,y,w,R;let x=null,E=null,P=null,D=g.status,b=g.statusText;if(g.ok){if(this.method!=="HEAD"){const F=await g.text();F===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?E=F:E=JSON.parse(F))}const C=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),$=(w=g.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");C&&$&&$.length>1&&(P=parseInt($[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(x={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,P=null,D=406,b="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const C=await g.text();try{x=JSON.parse(C),Array.isArray(x)&&g.status===404&&(E=[],x=null,D=200,b="OK")}catch{g.status===404&&C===""?(D=204,b="No Content"):x={message:C}}if(x&&this.isMaybeSingle&&(!((R=x?.details)===null||R===void 0)&&R.includes("0 rows"))&&(x=null,D=200,b="OK"),x&&this.shouldThrowOnError)throw new r.default(x)}return{error:x,data:E,count:P,status:D,statusText:b}});return this.shouldThrowOnError||(h=h.catch(g=>{var m,y,w;return{error:{message:`${(m=g?.name)!==null&&m!==void 0?m:"FetchError"}: ${g?.message}`,details:`${(y=g?.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(w=g?.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),h.then(l,c)}returns(){return this}overrideTypes(){return this}}return Ks.default=i,Ks}var kp;function cg(){if(kp)return Ws;kp=1;var n=Ws&&Ws.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ws,"__esModule",{value:!0});const e=n(ug());class r extends e.default{select(o){let l=!1;const c=(o??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:c,foreignTable:d,referencedTable:h=d}={}){const g=h?`${h}.order`:"order",m=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${m?`${m},`:""}${o}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:c=l}={}){const d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${o}`),this}range(o,l,{foreignTable:c,referencedTable:d=c}={}){const h=typeof d>"u"?"offset":`${d}.offset`,g=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${o}`),this.url.searchParams.set(g,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:c=!1,buffers:d=!1,wal:h=!1,format:g="text"}={}){var m;const y=[o?"analyze":null,l?"verbose":null,c?"settings":null,d?"buffers":null,h?"wal":null].filter(Boolean).join("|"),w=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${w}"; options=${y};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return Ws.default=r,Ws}var Ep;function gd(){if(Ep)return Hs;Ep=1;var n=Hs&&Hs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Hs,"__esModule",{value:!0});const e=n(cg());class r extends e.default{eq(o,l){return this.url.searchParams.append(o,`eq.${l}`),this}neq(o,l){return this.url.searchParams.append(o,`neq.${l}`),this}gt(o,l){return this.url.searchParams.append(o,`gt.${l}`),this}gte(o,l){return this.url.searchParams.append(o,`gte.${l}`),this}lt(o,l){return this.url.searchParams.append(o,`lt.${l}`),this}lte(o,l){return this.url.searchParams.append(o,`lte.${l}`),this}like(o,l){return this.url.searchParams.append(o,`like.${l}`),this}likeAllOf(o,l){return this.url.searchParams.append(o,`like(all).{${l.join(",")}}`),this}likeAnyOf(o,l){return this.url.searchParams.append(o,`like(any).{${l.join(",")}}`),this}ilike(o,l){return this.url.searchParams.append(o,`ilike.${l}`),this}ilikeAllOf(o,l){return this.url.searchParams.append(o,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(o,l){return this.url.searchParams.append(o,`ilike(any).{${l.join(",")}}`),this}is(o,l){return this.url.searchParams.append(o,`is.${l}`),this}in(o,l){const c=Array.from(new Set(l)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(o,`in.(${c})`),this}contains(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cs.{${l.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(l)}`),this}containedBy(o,l){return typeof l=="string"?this.url.searchParams.append(o,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(o,`cd.{${l.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(l)}`),this}rangeGt(o,l){return this.url.searchParams.append(o,`sr.${l}`),this}rangeGte(o,l){return this.url.searchParams.append(o,`nxl.${l}`),this}rangeLt(o,l){return this.url.searchParams.append(o,`sl.${l}`),this}rangeLte(o,l){return this.url.searchParams.append(o,`nxr.${l}`),this}rangeAdjacent(o,l){return this.url.searchParams.append(o,`adj.${l}`),this}overlaps(o,l){return typeof l=="string"?this.url.searchParams.append(o,`ov.${l}`):this.url.searchParams.append(o,`ov.{${l.join(",")}}`),this}textSearch(o,l,{config:c,type:d}={}){let h="";d==="plain"?h="pl":d==="phrase"?h="ph":d==="websearch"&&(h="w");const g=c===void 0?"":`(${c})`;return this.url.searchParams.append(o,`${h}fts${g}.${l}`),this}match(o){return Object.entries(o).forEach(([l,c])=>{this.url.searchParams.append(l,`eq.${c}`)}),this}not(o,l,c){return this.url.searchParams.append(o,`not.${l}.${c}`),this}or(o,{foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.or`:"or";return this.url.searchParams.append(d,`(${o})`),this}filter(o,l,c){return this.url.searchParams.append(o,`${l}.${c}`),this}}return Hs.default=r,Hs}var bp;function dg(){if(bp)return Vs;bp=1;var n=Vs&&Vs.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Vs,"__esModule",{value:!0});const e=n(gd());class r{constructor(o,{headers:l={},schema:c,fetch:d}){this.url=o,this.headers=new Headers(l),this.schema=c,this.fetch=d}select(o,{head:l=!1,count:c}={}){const d=l?"HEAD":"GET";let h=!1;const g=(o??"*").split("").map(m=>/\s/.test(m)&&!h?"":(m==='"'&&(h=!h),m)).join("");return this.url.searchParams.set("select",g),c&&this.headers.append("Prefer",`count=${c}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:c=!0}={}){var d;const h="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const g=o.reduce((m,y)=>m.concat(Object.keys(y)),[]);if(g.length>0){const m=[...new Set(g)].map(y=>`"${y}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:c=!1,count:d,defaultToNull:h=!0}={}){var g;const m="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const y=o.reduce((w,R)=>w.concat(Object.keys(R)),[]);if(y.length>0){const w=[...new Set(y)].map(R=>`"${R}"`);this.url.searchParams.set("columns",w.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(o,{count:l}={}){var c;const d="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:o}={}){var l;const c="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return Vs.default=r,Vs}var Cp;function K0(){if(Cp)return Bs;Cp=1;var n=Bs&&Bs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Bs,"__esModule",{value:!0});const e=n(dg()),r=n(gd());class i{constructor(l,{headers:c={},schema:d,fetch:h}={}){this.url=l,this.headers=new Headers(c),this.schemaName=d,this.fetch=h}from(l){const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new i(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:d=!1,get:h=!1,count:g}={}){var m;let y;const w=new URL(`${this.url}/rpc/${l}`);let R;d||h?(y=d?"HEAD":"GET",Object.entries(c).filter(([E,P])=>P!==void 0).map(([E,P])=>[E,Array.isArray(P)?`{${P.join(",")}}`:`${P}`]).forEach(([E,P])=>{w.searchParams.append(E,P)})):(y="POST",R=c);const x=new Headers(this.headers);return g&&x.set("Prefer",`count=${g}`),new r.default({method:y,url:w,headers:x,schema:this.schemaName,body:R,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}}return Bs.default=i,Bs}var Tp;function q0(){if(Tp)return yt;Tp=1;var n=yt&&yt.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(yt,"__esModule",{value:!0}),yt.PostgrestError=yt.PostgrestBuilder=yt.PostgrestTransformBuilder=yt.PostgrestFilterBuilder=yt.PostgrestQueryBuilder=yt.PostgrestClient=void 0;const e=n(K0());yt.PostgrestClient=e.default;const r=n(dg());yt.PostgrestQueryBuilder=r.default;const i=n(gd());yt.PostgrestFilterBuilder=i.default;const o=n(cg());yt.PostgrestTransformBuilder=o.default;const l=n(ug());yt.PostgrestBuilder=l.default;const c=n(lg());return yt.PostgrestError=c.default,yt.default={PostgrestClient:e.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default},yt}var G0=q0();const J0=Bm(G0),{PostgrestClient:Q0,PostgrestQueryBuilder:nC,PostgrestFilterBuilder:rC,PostgrestTransformBuilder:sC,PostgrestBuilder:iC,PostgrestError:oC}=J0;class Y0{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const i=this.getWebSocketConstructor();return new i(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const X0="2.15.5",Z0=`realtime-js/${X0}`,e_="1.0.0",Bc=1e4,t_=1e3,n_=100;var ao;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(ao||(ao={}));var ft;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(ft||(ft={}));var pn;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(pn||(pn={}));var Vc;(function(n){n.websocket="websocket"})(Vc||(Vc={}));var us;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(us||(us={}));class r_{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,r,i)}_decodeBroadcast(e,r,i){const o=r.getUint8(1),l=r.getUint8(2);let c=this.HEADER_LENGTH+2;const d=i.decode(e.slice(c,c+o));c=c+o;const h=i.decode(e.slice(c,c+l));c=c+l;const g=JSON.parse(i.decode(e.slice(c,e.byteLength)));return{ref:null,topic:d,event:h,payload:g}}}class fg{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var He;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(He||(He={}));const Ip=(n,e,r={})=>{var i;const o=(i=r.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((l,c)=>(l[c]=s_(c,n,e,o),l),{})},s_=(n,e,r,i)=>{const o=e.find(d=>d.name===n),l=o?.type,c=r[n];return l&&!i.includes(l)?hg(l,c):Hc(c)},hg=(n,e)=>{if(n.charAt(0)==="_"){const r=n.slice(1,n.length);return l_(e,r)}switch(n){case He.bool:return i_(e);case He.float4:case He.float8:case He.int2:case He.int4:case He.int8:case He.numeric:case He.oid:return o_(e);case He.json:case He.jsonb:return a_(e);case He.timestamp:return u_(e);case He.abstime:case He.date:case He.daterange:case He.int4range:case He.int8range:case He.money:case He.reltime:case He.text:case He.time:case He.timestamptz:case He.timetz:case He.tsrange:case He.tstzrange:return Hc(e);default:return Hc(e)}},Hc=n=>n,i_=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},o_=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},a_=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},l_=(n,e)=>{if(typeof n!="string")return n;const r=n.length-1,i=n[r];if(n[0]==="{"&&i==="}"){let l;const c=n.slice(1,r);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(d=>hg(e,d))}return n},u_=n=>typeof n=="string"?n.replace(" ","T"):n,pg=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class vc{constructor(e,r,i={},o=Bc){this.channel=e,this.event=r,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var i;return this._hasReceived(e)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Rp;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Rp||(Rp={}));class lo{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:l,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lo.syncState(this.state,o,l,c),this.pendingDiffs.forEach(h=>{this.state=lo.syncDiff(this.state,h,l,c)}),this.pendingDiffs=[],d()}),this.channel._on(i.diff,{},o=>{const{onJoin:l,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=lo.syncDiff(this.state,o,l,c),d())}),this.onJoin((o,l,c)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:c})}),this.onLeave((o,l,c)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,i,o){const l=this.cloneDeep(e),c=this.transformState(r),d={},h={};return this.map(l,(g,m)=>{c[g]||(h[g]=m)}),this.map(c,(g,m)=>{const y=l[g];if(y){const w=m.map(P=>P.presence_ref),R=y.map(P=>P.presence_ref),x=m.filter(P=>R.indexOf(P.presence_ref)<0),E=y.filter(P=>w.indexOf(P.presence_ref)<0);x.length>0&&(d[g]=x),E.length>0&&(h[g]=E)}else d[g]=m}),this.syncDiff(l,{joins:d,leaves:h},i,o)}static syncDiff(e,r,i,o){const{joins:l,leaves:c}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(l,(d,h)=>{var g;const m=(g=e[d])!==null&&g!==void 0?g:[];if(e[d]=this.cloneDeep(h),m.length>0){const y=e[d].map(R=>R.presence_ref),w=m.filter(R=>y.indexOf(R.presence_ref)<0);e[d].unshift(...w)}i(d,m,h)}),this.map(c,(d,h)=>{let g=e[d];if(!g)return;const m=h.map(y=>y.presence_ref);g=g.filter(y=>m.indexOf(y.presence_ref)<0),e[d]=g,o(d,g,h),g.length===0&&delete e[d]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(i=>r(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,i)=>{const o=e[i];return"metas"in o?r[i]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[i]=o,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Op;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Op||(Op={}));var uo;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(uo||(uo={}));var Wn;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Wn||(Wn={}));class vd{constructor(e,r={config:{}},i){this.topic=e,this.params=r,this.socket=i,this.bindings={},this.state=ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new vc(this,pn.join,this.params,this.timeout),this.rejoinTimer=new fg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ft.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pn.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new lo(this),this.broadcastEndpointURL=pg(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var i,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==ft.closed){const{config:{broadcast:c,presence:d,private:h}}=this.params,g=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(R=>R.filter))!==null&&o!==void 0?o:[],m=!!this.bindings[uo.PRESENCE]&&this.bindings[uo.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,y={},w={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:m}),postgres_changes:g,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(R=>e?.(Wn.CHANNEL_ERROR,R)),this._onClose(()=>e?.(Wn.CLOSED)),this.updateJoinPayload(Object.assign({config:w},y)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:R})=>{var x;if(this.socket.setAuth(),R===void 0){e?.(Wn.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,P=(x=E?.length)!==null&&x!==void 0?x:0,D=[];for(let b=0;b<P;b++){const A=E[b],{filter:{event:C,schema:$,table:F,filter:G}}=A,le=R&&R[b];if(le&&le.event===C&&le.schema===$&&le.table===F&&le.filter===G)D.push(Object.assign(Object.assign({},A),{id:le.id}));else{this.unsubscribe(),this.state=ft.errored,e?.(Wn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,e&&e(Wn.SUBSCRIBED);return}}).receive("error",R=>{this.state=ft.errored,e?.(Wn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(R).join(", ")||"error")))}).receive("timeout",()=>{e?.(Wn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,i){return this.state===ft.joined&&e===uo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,i)}async send(e,r={}){var i,o;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:c}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=g.body)===null||o===void 0?void 0:o.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,d,h;const g=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&l("ok"),g.receive("ok",()=>l("ok")),g.receive("error",()=>l("error")),g.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ft.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pn.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new vc(this,pn.leave,{},e),i.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ft.closed,this.bindings={}}async _fetchWithTimeout(e,r,i){const o=new AbortController,l=setTimeout(()=>o.abort(),i),c=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(l),c}_push(e,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new vc(this,e,r,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>n_){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,i){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,i){var o,l;const c=e.toLocaleLowerCase(),{close:d,error:h,leave:g,join:m}=pn;if(i&&[d,h,g,m].indexOf(c)>=0&&i!==this._joinRef())return;let w=this._onMessage(c,r,i);if(r&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(R=>{var x,E,P;return((x=R.filter)===null||x===void 0?void 0:x.event)==="*"||((P=(E=R.filter)===null||E===void 0?void 0:E.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===c}).map(R=>R.callback(w,i)):(l=this.bindings[c])===null||l===void 0||l.filter(R=>{var x,E,P,D,b,A;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in R){const C=R.id,$=(x=R.filter)===null||x===void 0?void 0:x.event;return C&&((E=r.ids)===null||E===void 0?void 0:E.includes(C))&&($==="*"||$?.toLocaleLowerCase()===((P=r.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const C=(b=(D=R?.filter)===null||D===void 0?void 0:D.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return C==="*"||C===((A=r?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return R.type.toLocaleLowerCase()===c}).map(R=>{if(typeof w=="object"&&"ids"in w){const x=w.data,{schema:E,table:P,commit_timestamp:D,type:b,errors:A}=x;w=Object.assign(Object.assign({},{schema:E,table:P,commit_timestamp:D,eventType:b,new:{},old:{},errors:A}),this._getPayloadRecords(x))}R.callback(w,i)})}_isClosed(){return this.state===ft.closed}_isJoined(){return this.state===ft.joined}_isJoining(){return this.state===ft.joining}_isLeaving(){return this.state===ft.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,i){const o=e.toLocaleLowerCase(),l={type:o,filter:r,callback:i};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,r){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&vd.isEqual(o.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const i in e)if(e[i]!==r[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(pn.close,{},e)}_onError(e){this._on(pn.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ft.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Ip(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Ip(e.columns,e.old_record)),r}}const yc=()=>{},Ka={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},c_=[1e3,2e3,5e3,1e4],d_=1e4,f_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class h_{constructor(e,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Bc,this.transport=null,this.heartbeatIntervalMs=Ka.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yc,this.ref=0,this.reconnectTimer=null,this.logger=yc,this.conn=null,this.sendBuffer=[],this.serializer=new r_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...c)=>So(async()=>{const{default:d}=await Promise.resolve().then(()=>di);return{default:d}},void 0).then(({default:d})=>d(...c)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...c)=>l(...c)},!(!((i=r?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Vc.websocket}`,this.httpEndpoint=pg(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Y0.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:e_}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,i){this.logger(e,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case ao.connecting:return us.Connecting;case ao.open:return us.Open;case ao.closing:return us.Closing;default:return us.Closed}}isConnected(){return this.connectionState()===us.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const i=`realtime:${e}`,o=this.getChannels().find(l=>l.topic===i);if(o)return o;{const l=new vd(`realtime:${e}`,r,this);return this.channels.push(l),l}}push(e){const{topic:r,event:i,payload:o,ref:l}=e,c=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${r} ${i} (${l})`,o),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(t_,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Ka.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:l,ref:c}=r,d=c?`(${c})`:"",h=l.status||"";this.log("receive",`${h} ${i} ${o} ${d}`.trim(),l),this.channels.filter(g=>g._isMember(i)).forEach(g=>g._trigger(o,l,c)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(pn.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const i=e.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${e}${i}${o}`}_workerObjectUrl(e){let r;if(e)r=e;else{const i=new Blob([f_],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const o={access_token:r,version:Z0};r&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(pn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(r)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new fg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ka.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,i,o,l,c,d,h,g,m;if(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(i=e?.timeout)!==null&&i!==void 0?i:Bc,this.heartbeatIntervalMs=(o=e?.heartbeatIntervalMs)!==null&&o!==void 0?o:Ka.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:yc,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e?.reconnectAfterMs)!==null&&h!==void 0?h:(y=>c_[y-1]||d_),this.encode=(g=e?.encode)!==null&&g!==void 0?g:((y,w)=>w(JSON.stringify(y))),this.decode=(m=e?.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class yd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ht(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class p_ extends yd{constructor(e,r,i){super(e),this.name="StorageApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Wc extends yd{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var m_=function(n,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(m){try{g(i.next(m))}catch(y){c(y)}}function h(m){try{g(i.throw(m))}catch(y){c(y)}}function g(m){m.done?l(m.value):o(m.value).then(d,h)}g((i=i.apply(n,e||[])).next())})};const mg=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...r)=>So(async()=>{const{default:i}=await Promise.resolve().then(()=>di);return{default:i}},void 0).then(({default:i})=>i(...r)):e=fetch,(...r)=>e(...r)},g_=()=>m_(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield So(()=>Promise.resolve().then(()=>di),void 0)).Response:Response}),Kc=n=>{if(Array.isArray(n))return n.map(r=>Kc(r));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([r,i])=>{const o=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=Kc(i)}),e},v_=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var hs=function(n,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(m){try{g(i.next(m))}catch(y){c(y)}}function h(m){try{g(i.throw(m))}catch(y){c(y)}}function g(m){m.done?l(m.value):o(m.value).then(d,h)}g((i=i.apply(n,e||[])).next())})};const wc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),y_=(n,e,r)=>hs(void 0,void 0,void 0,function*(){const i=yield g_();n instanceof i&&!r?.noResolveJson?n.json().then(o=>{const l=n.status||500,c=o?.statusCode||l+"";e(new p_(wc(o),l,c))}).catch(o=>{e(new Wc(wc(o),o))}):e(new Wc(wc(n),n))}),w_=(n,e,r,i)=>{const o={method:n,headers:e?.headers||{}};return n==="GET"||!i?o:(v_(i)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(i)):o.body=i,e?.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),r))};function ko(n,e,r,i,o,l){return hs(this,void 0,void 0,function*(){return new Promise((c,d)=>{n(r,w_(e,i,o,l)).then(h=>{if(!h.ok)throw h;return i?.noResolveJson?h:h.json()}).then(h=>c(h)).catch(h=>y_(h,d,i))})})}function ll(n,e,r,i){return hs(this,void 0,void 0,function*(){return ko(n,"GET",e,r,i)})}function Tn(n,e,r,i,o){return hs(this,void 0,void 0,function*(){return ko(n,"POST",e,i,o,r)})}function qc(n,e,r,i,o){return hs(this,void 0,void 0,function*(){return ko(n,"PUT",e,i,o,r)})}function __(n,e,r,i){return hs(this,void 0,void 0,function*(){return ko(n,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),i)})}function gg(n,e,r,i,o){return hs(this,void 0,void 0,function*(){return ko(n,"DELETE",e,i,o,r)})}var xt=function(n,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(m){try{g(i.next(m))}catch(y){c(y)}}function h(m){try{g(i.throw(m))}catch(y){c(y)}}function g(m){m.done?l(m.value):o(m.value).then(d,h)}g((i=i.apply(n,e||[])).next())})};const S_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ap={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class k_{constructor(e,r={},i,o){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=i,this.fetch=mg(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,i,o){return xt(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},Ap),o);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const h=c.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),h&&l.append("metadata",this.encodeMetadata(h)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",c.cacheControl),h&&l.append("metadata",this.encodeMetadata(h))):(l=i,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),o?.headers&&(d=Object.assign(Object.assign({},d),o.headers));const g=this._removeEmptyFolders(r),m=this._getFinalPath(g),y=yield(e=="PUT"?qc:Tn)(this.fetch,`${this.url}/object/${m}`,l,Object.assign({headers:d},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:g,id:y.Id,fullPath:y.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ht(l))return{data:null,error:l};throw l}})}upload(e,r,i){return xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,i)})}uploadToSignedUrl(e,r,i,o){return xt(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),d=new URL(this.url+`/object/upload/sign/${c}`);d.searchParams.set("token",r);try{let h;const g=Object.assign({upsert:Ap.upsert},o),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&i instanceof Blob?(h=new FormData,h.append("cacheControl",g.cacheControl),h.append("",i)):typeof FormData<"u"&&i instanceof FormData?(h=i,h.append("cacheControl",g.cacheControl)):(h=i,m["cache-control"]=`max-age=${g.cacheControl}`,m["content-type"]=g.contentType);const y=yield qc(this.fetch,d.toString(),h,{headers:m});return{data:{path:l,fullPath:y.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(ht(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,r){return xt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const o=Object.assign({},this.headers);r?.upsert&&(o["x-upsert"]="true");const l=yield Tn(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),c=new URL(this.url+l.url),d=c.searchParams.get("token");if(!d)throw new yd("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:d},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ht(i))return{data:null,error:i};throw i}})}update(e,r,i){return xt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,i)})}move(e,r,i){return xt(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ht(o))return{data:null,error:o};throw o}})}copy(e,r,i){return xt(this,void 0,void 0,function*(){try{return{data:{path:(yield Tn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ht(o))return{data:null,error:o};throw o}})}createSignedUrl(e,r,i){return xt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),l=yield Tn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const c=i?.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ht(o))return{data:null,error:o};throw o}})}createSignedUrls(e,r,i){return xt(this,void 0,void 0,function*(){try{const o=yield Tn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),l=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ht(o))return{data:null,error:o};throw o}})}download(e,r){return xt(this,void 0,void 0,function*(){const o=typeof r?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(r?.transform||{}),c=l?`?${l}`:"";try{const d=this._getFinalPath(e);return{data:yield(yield ll(this.fetch,`${this.url}/${o}/${d}${c}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(ht(d))return{data:null,error:d};throw d}})}info(e){return xt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const i=yield ll(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Kc(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ht(i))return{data:null,error:i};throw i}})}exists(e){return xt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield __(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ht(i)&&i instanceof Wc){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,r){const i=this._getFinalPath(e),o=[],l=r?.download?`download=${r.download===!0?"":r.download}`:"";l!==""&&o.push(l);const d=typeof r?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(r?.transform||{});h!==""&&o.push(h);let g=o.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${i}${g}`)}}}remove(e){return xt(this,void 0,void 0,function*(){try{return{data:yield gg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ht(r))return{data:null,error:r};throw r}})}list(e,r,i){return xt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},S_),r),{prefix:e||""});return{data:yield Tn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ht(o))return{data:null,error:o};throw o}})}listV2(e,r){return xt(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield Tn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ht(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const E_="2.12.1",b_={"X-Client-Info":`storage-js/${E_}`};var qs=function(n,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(m){try{g(i.next(m))}catch(y){c(y)}}function h(m){try{g(i.throw(m))}catch(y){c(y)}}function g(m){m.done?l(m.value):o(m.value).then(d,h)}g((i=i.apply(n,e||[])).next())})};class C_{constructor(e,r={},i,o){this.shouldThrowOnError=!1;const l=new URL(e);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href,this.headers=Object.assign(Object.assign({},b_),r),this.fetch=mg(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return qs(this,void 0,void 0,function*(){try{return{data:yield ll(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ht(e))return{data:null,error:e};throw e}})}getBucket(e){return qs(this,void 0,void 0,function*(){try{return{data:yield ll(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ht(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return qs(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ht(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return qs(this,void 0,void 0,function*(){try{return{data:yield qc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ht(i))return{data:null,error:i};throw i}})}emptyBucket(e){return qs(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ht(r))return{data:null,error:r};throw r}})}deleteBucket(e){return qs(this,void 0,void 0,function*(){try{return{data:yield gg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ht(r))return{data:null,error:r};throw r}})}}class T_ extends C_{constructor(e,r={},i,o){super(e,r,i,o)}from(e){return new k_(this.url,this.headers,e,this.fetch)}}const I_="2.57.4";let ro="";typeof Deno<"u"?ro="deno":typeof document<"u"?ro="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ro="react-native":ro="node";const R_={"X-Client-Info":`supabase-js-${ro}/${I_}`},O_={headers:R_},A_={schema:"public"},x_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},P_={};var L_=function(n,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(m){try{g(i.next(m))}catch(y){c(y)}}function h(m){try{g(i.throw(m))}catch(y){c(y)}}function g(m){m.done?l(m.value):o(m.value).then(d,h)}g((i=i.apply(n,e||[])).next())})};const N_=n=>{let e;return n?e=n:typeof fetch>"u"?e=og:e=fetch,(...r)=>e(...r)},D_=()=>typeof Headers>"u"?ag:Headers,U_=(n,e,r)=>{const i=N_(r),o=D_();return(l,c)=>L_(void 0,void 0,void 0,function*(){var d;const h=(d=yield e())!==null&&d!==void 0?d:n;let g=new o(c?.headers);return g.has("apikey")||g.set("apikey",n),g.has("Authorization")||g.set("Authorization",`Bearer ${h}`),i(l,Object.assign(Object.assign({},c),{headers:g}))})};var j_=function(n,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(m){try{g(i.next(m))}catch(y){c(y)}}function h(m){try{g(i.throw(m))}catch(y){c(y)}}function g(m){m.done?l(m.value):o(m.value).then(d,h)}g((i=i.apply(n,e||[])).next())})};function $_(n){return n.endsWith("/")?n:n+"/"}function M_(n,e){var r,i;const{db:o,auth:l,realtime:c,global:d}=n,{db:h,auth:g,realtime:m,global:y}=e,w={db:Object.assign(Object.assign({},h),o),auth:Object.assign(Object.assign({},g),l),realtime:Object.assign(Object.assign({},m),c),storage:{},global:Object.assign(Object.assign(Object.assign({},y),d),{headers:Object.assign(Object.assign({},(r=y?.headers)!==null&&r!==void 0?r:{}),(i=d?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>j_(this,void 0,void 0,function*(){return""})};return n.accessToken?w.accessToken=n.accessToken:delete w.accessToken,w}function F_(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL($_(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const vg="2.71.1",ei=30*1e3,Gc=3,_c=Gc*ei,z_="http://localhost:9999",B_="supabase.auth.token",V_={"X-Client-Info":`gotrue-js/${vg}`},Jc="X-Supabase-Api-Version",yg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},H_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,W_=600*1e3;class wd extends Error{constructor(e,r,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function Te(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class K_ extends wd{constructor(e,r,i){super(e,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function q_(n){return Te(n)&&n.name==="AuthApiError"}class wg extends wd{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Nr extends wd{constructor(e,r,i,o){super(e,i,o),this.name=r,this.status=i}}class Ir extends Nr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function G_(n){return Te(n)&&n.name==="AuthSessionMissingError"}class qa extends Nr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ga extends Nr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ja extends Nr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function J_(n){return Te(n)&&n.name==="AuthImplicitGrantRedirectError"}class xp extends Nr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qc extends Nr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Sc(n){return Te(n)&&n.name==="AuthRetryableFetchError"}class Pp extends Nr{constructor(e,r,i){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class Yc extends Nr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ul="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lp=` 	
\r=`.split(""),Q_=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Lp.length;e+=1)n[Lp[e].charCodeAt(0)]=-2;for(let e=0;e<ul.length;e+=1)n[ul[e].charCodeAt(0)]=e;return n})();function Np(n,e,r){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;r(ul[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;r(ul[i]),e.queuedBits-=6}}function _g(n,e,r){const i=Q_[n];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Dp(n){const e=[],r=c=>{e.push(String.fromCodePoint(c))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=c=>{Z_(c,i,r)};for(let c=0;c<n.length;c+=1)_g(n.charCodeAt(c),o,l);return e.join("")}function Y_(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function X_(n,e){for(let r=0;r<n.length;r+=1){let i=n.charCodeAt(r);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(n.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}Y_(i,e)}}function Z_(n,e,r){if(e.utf8seq===0){if(n<=127){r(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function eS(n){const e=[],r={queue:0,queuedBits:0},i=o=>{e.push(o)};for(let o=0;o<n.length;o+=1)_g(n.charCodeAt(o),r,i);return new Uint8Array(e)}function tS(n){const e=[];return X_(n,r=>e.push(r)),new Uint8Array(e)}function nS(n){const e=[],r={queue:0,queuedBits:0},i=o=>{e.push(o)};return n.forEach(o=>Np(o,r,i)),Np(null,r,i),e.join("")}function rS(n){return Math.round(Date.now()/1e3)+n}function sS(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const hn=()=>typeof window<"u"&&typeof document<"u",ns={tested:!1,writable:!1},Sg=()=>{if(!hn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ns.tested)return ns.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ns.tested=!0,ns.writable=!0}catch{ns.tested=!0,ns.writable=!1}return ns.writable};function iS(n){const e={},r=new URL(n);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return r.searchParams.forEach((i,o)=>{e[o]=i}),e}const kg=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...r)=>So(async()=>{const{default:i}=await Promise.resolve().then(()=>di);return{default:i}},void 0).then(({default:i})=>i(...r)):e=fetch,(...r)=>e(...r)},oS=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",ti=async(n,e,r)=>{await n.setItem(e,JSON.stringify(r))},rs=async(n,e)=>{const r=await n.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},br=async(n,e)=>{await n.removeItem(e)};class Sl{constructor(){this.promise=new Sl.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Sl.promiseConstructor=Promise;function kc(n){const e=n.split(".");if(e.length!==3)throw new Yc("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!H_.test(e[i]))throw new Yc("JWT not in base64url format");return{header:JSON.parse(Dp(e[0])),payload:JSON.parse(Dp(e[1])),signature:eS(e[2]),raw:{header:e[0],payload:e[1]}}}async function aS(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function lS(n,e){return new Promise((i,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await n(l);if(!e(l,null,c)){i(c);return}}catch(c){if(!e(l,c)){o(c);return}}})()})}function uS(n){return("0"+n.toString(16)).substr(-2)}function cS(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let o="";for(let l=0;l<56;l++)o+=r.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(e),Array.from(e,uS).join("")}async function dS(n){const r=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(i);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function fS(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const r=await dS(n);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gs(n,e,r=!1){const i=cS();let o=i;r&&(o+="/PASSWORD_RECOVERY"),await ti(n,`${e}-code-verifier`,o);const l=await fS(i);return[l,i===l?"plain":"s256"]}const hS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pS(n){const e=n.headers.get(Jc);if(!e||!e.match(hS))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function mS(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function gS(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Js(n){if(!vS.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ec(){const n={};return new Proxy(n,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Up(n){return JSON.parse(JSON.stringify(n))}var yS=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const as=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),wS=[502,503,504];async function jp(n){var e;if(!oS(n))throw new Qc(as(n),0);if(wS.includes(n.status))throw new Qc(as(n),n.status);let r;try{r=await n.json()}catch(l){throw new wg(as(l),l)}let i;const o=pS(n);if(o&&o.getTime()>=yg["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new Pp(as(r),n.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Ir}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new Pp(as(r),n.status,r.weak_password.reasons);throw new K_(as(r),n.status||500,i)}const _S=(n,e,r,i)=>{const o={method:n,headers:e?.headers||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),r))};async function xe(n,e,r,i){var o;const l=Object.assign({},i?.headers);l[Jc]||(l[Jc]=yg["2024-01-01"].name),i?.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const c=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(c.redirect_to=i.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",h=await SS(n,e,r+d,{headers:l,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(h):{data:Object.assign({},h),error:null}}async function SS(n,e,r,i,o,l){const c=_S(e,i,o,l);let d;try{d=await n(r,Object.assign({},c))}catch(h){throw console.error(h),new Qc(as(h),0)}if(d.ok||await jp(d),i?.noResolveJson)return d;try{return await d.json()}catch(h){await jp(h)}}function Vn(n){var e;let r=null;CS(n)&&(r=Object.assign({},n),n.expires_at||(r.expires_at=rS(n.expires_in)));const i=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:r,user:i},error:null}}function $p(n){const e=Vn(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Rr(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function kS(n){return{data:n,error:null}}function ES(n){const{action_link:e,email_otp:r,hashed_token:i,redirect_to:o,verification_type:l}=n,c=yS(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:r,hashed_token:i,redirect_to:o,verification_type:l},h=Object.assign({},c);return{data:{properties:d,user:h},error:null}}function bS(n){return n}function CS(n){return n.access_token&&n.refresh_token&&n.expires_in}const bc=["global","local","others"];var TS=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};class IS{constructor({url:e="",headers:r={},fetch:i}){this.url=e,this.headers=r,this.fetch=kg(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=bc[0]){if(bc.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bc.join(", ")}`);try{return await xe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Te(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,r={}){try{return await xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Rr})}catch(i){if(Te(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:r}=e,i=TS(e,["options"]),o=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:ES,redirectTo:r?.redirectTo})}catch(r){if(Te(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await xe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Rr})}catch(r){if(Te(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,i,o,l,c,d,h;try{const g={nextPage:null,lastPage:0,total:0},m=await xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:bS});if(m.error)throw m.error;const y=await m.json(),w=(c=m.headers.get("x-total-count"))!==null&&c!==void 0?c:0,R=(h=(d=m.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return R.length>0&&(R.forEach(x=>{const E=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(x.split(";")[1].split("=")[1]);g[`${P}Page`]=E}),g.total=parseInt(w)),{data:Object.assign(Object.assign({},y),g),error:null}}catch(g){if(Te(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){Js(e);try{return await xe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Rr})}catch(r){if(Te(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Js(e);try{return await xe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Rr})}catch(i){if(Te(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,r=!1){Js(e);try{return await xe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Rr})}catch(i){if(Te(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Js(e.userId);try{const{data:r,error:i}=await xe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:i}}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Js(e.userId),Js(e.id);try{return{data:await xe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}}}function Mp(n={}){return{getItem:e=>n[e]||null,setItem:(e,r)=>{n[e]=r},removeItem:e=>{delete n[e]}}}function RS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Qs={debug:!!(globalThis&&Sg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Eg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class OS extends Eg{}async function AS(n,e,r){Qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Qs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,o.name);try{return await r()}finally{Qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,o.name)}}else{if(e===0)throw Qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new OS(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Qs.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}RS();const xS={url:z_,storageKey:B_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:V_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Fp(n,e,r){return await r()}const Ys={};class po{constructor(e){var r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=po.nextInstanceID,po.nextInstanceID+=1,this.instanceID>0&&hn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},xS),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new IS({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=kg(o.fetch),this.lock=o.lock||Fp,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:hn()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=AS:this.lock=Fp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Sg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mp(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Mp(this.memoryStorage)),hn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=Ys[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Ys[this.storageKey]=Object.assign(Object.assign({},Ys[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Ys[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ys[this.storageKey]=Object.assign(Object.assign({},Ys[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${vg}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=iS(window.location.href);let i="none";if(this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce"),hn()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:l}=await this._getSessionFromURL(r,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),J_(l)){const h=(e=l.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Te(r)?{error:r}:{error:new wg("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,i,o;try{const l=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Vn}),{data:c,error:d}=l;if(d||!c)return{data:{user:null,session:null},error:d};const h=c.session,g=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:g,session:h},error:null}}catch(l){if(Te(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var r,i,o;try{let l;if("email"in e){const{email:m,password:y,options:w}=e;let R=null,x=null;this.flowType==="pkce"&&([R,x]=await Gs(this.storage,this.storageKey)),l=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:m,password:y,data:(r=w?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:R,code_challenge_method:x},xform:Vn})}else if("phone"in e){const{phone:m,password:y,options:w}=e;l=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:y,data:(i=w?.data)!==null&&i!==void 0?i:{},channel:(o=w?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:Vn})}else throw new Ga("You must provide either an email or phone number and a password");const{data:c,error:d}=l;if(d||!c)return{data:{user:null,session:null},error:d};const h=c.session,g=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:g,session:h},error:null}}catch(l){if(Te(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let r;if("email"in e){const{email:l,password:c,options:d}=e;r=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:$p})}else if("phone"in e){const{phone:l,password:c,options:d}=e;r=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:$p})}else throw new Ga("You must provide either an email or phone number and a password");const{data:i,error:o}=r;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new qa}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(Te(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,i,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,i,o,l,c,d,h,g,m,y,w,R;let x,E;if("message"in e)x=e.message,E=e.signature;else{const{chain:P,wallet:D,statement:b,options:A}=e;let C;if(hn())if(typeof D=="object")C=D;else{const F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))C=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=D}const $=new URL((r=A?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in C&&C.signIn){const F=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A?.signInWithSolana),{version:"1",domain:$.host,uri:$.href}),b?{statement:b}:null));let G;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")G=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)G=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in G&&"signature"in G&&(typeof G.signedMessage=="string"||G.signedMessage instanceof Uint8Array)&&G.signature instanceof Uint8Array)x=typeof G.signedMessage=="string"?G.signedMessage:new TextDecoder().decode(G.signedMessage),E=G.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${$.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${$.href}`,`Issued At: ${(o=(i=A?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=A?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((c=A?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((d=A?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((h=A?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((g=A?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((y=(m=A?.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||y===void 0)&&y.length?["Resources",...A.signInWithSolana.resources.map(G=>`- ${G}`)]:[]].join(`
`);const F=await C.signMessage(new TextEncoder().encode(x),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=F}}try{const{data:P,error:D}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:nS(E)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(R=e.options)===null||R===void 0?void 0:R.captchaToken}}:null),xform:Vn});if(D)throw D;return!P||!P.session||!P.user?{data:{user:null,session:null},error:new qa}:(P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),{data:Object.assign({},P),error:D})}catch(P){if(Te(P))return{data:{user:null,session:null},error:P};throw P}}async _exchangeCodeForSession(e){const r=await rs(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{const{data:l,error:c}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Vn});if(await br(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new qa}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:c})}catch(l){if(Te(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:r,provider:i,token:o,access_token:l,nonce:c}=e,d=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Vn}),{data:h,error:g}=d;return g?{data:{user:null,session:null},error:g}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new qa}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:g})}catch(r){if(Te(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,i,o,l,c;try{if("email"in e){const{email:d,options:h}=e;let g=null,m=null;this.flowType==="pkce"&&([g,m]=await Gs(this.storage,this.storageKey));const{error:y}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=h?.data)!==null&&r!==void 0?r:{},create_user:(i=h?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:g,code_challenge_method:m},redirectTo:h?.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in e){const{phone:d,options:h}=e,{data:g,error:m}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=h?.data)!==null&&o!==void 0?o:{},create_user:(l=h?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(c=h?.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:g?.message_id},error:m}}throw new Ga("You must provide either an email or phone number.")}catch(d){if(Te(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var r,i;try{let o,l;"options"in e&&(o=(r=e.options)===null||r===void 0?void 0:r.redirectTo,l=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:c,error:d}=await xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:Vn});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const h=c.session,g=c.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:g,session:h},error:null}}catch(o){if(Te(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var r,i,o;try{let l=null,c=null;return this.flowType==="pkce"&&([l,c]=await Gs(this.storage,this.storageKey)),await xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:kS})}catch(l){if(Te(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new Ir;const{error:o}=await xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(Te(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:i,type:o,options:l}=e,{error:c}=await xe(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){const{phone:i,type:o,options:l}=e,{data:c,error:d}=await xe(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return{data:{user:null,session:null,messageId:c?.message_id},error:d}}throw new Ga("You must provide either an email or phone number and a type")}catch(r){if(Te(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await rs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<_c:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const c=await rs(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=Ec()}if(this.storage.isServer&&e.user){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(h,g,m)=>(!c&&g==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,g,m))})}return{data:{session:e},error:null}}const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Rr}):await this._useSession(async r=>{var i,o,l;const{data:c,error:d}=r;if(d)throw d;return!(!((i=c.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ir}:await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:Rr})})}catch(r){if(Te(r))return G_(r)&&(await this._removeSession(),await br(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async i=>{const{data:o,error:l}=i;if(l)throw l;if(!o.session)throw new Ir;const c=o.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await Gs(this.storage,this.storageKey));const{data:g,error:m}=await xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:c.access_token,xform:Rr});if(m)throw m;return c.user=g.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(i){if(Te(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ir;const r=Date.now()/1e3;let i=r,o=!0,l=null;const{payload:c}=kc(e.access_token);if(c.exp&&(i=c.exp,o=i<=r),o){const{session:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;l={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(r){if(Te(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var i;if(!e){const{data:c,error:d}=r;if(d)throw d;e=(i=c.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new Ir;const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Te(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!hn())throw new Ja("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ja(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new xp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ja("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new xp("No code detected.");const{data:b,error:A}=await this._exchangeCodeForSession(e.code);if(A)throw A;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:l,refresh_token:c,expires_in:d,expires_at:h,token_type:g}=e;if(!l||!d||!c||!g)throw new Ja("No session defined in URL");const m=Math.round(Date.now()/1e3),y=parseInt(d);let w=m+y;h&&(w=parseInt(h));const R=w-m;R*1e3<=ei&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${R}s, should have been closer to ${y}s`);const x=w-y;m-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,w,m):m-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,w,m);const{data:E,error:P}=await this._getUser(l);if(P)throw P;const D={provider_token:i,provider_refresh_token:o,access_token:l,expires_in:y,expires_at:w,refresh_token:c,token_type:g,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:D,redirectType:e.type},error:null}}catch(i){if(Te(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await rs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:o,error:l}=r;if(l)return{error:l};const c=(i=o.session)===null||i===void 0?void 0:i.access_token;if(c){const{error:d}=await this.admin.signOut(c,e);if(d&&!(q_(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await br(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=sS(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async r=>{var i,o;try{const{data:{session:l},error:c}=r;if(c)throw c;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Gs(this.storage,this.storageKey,!0));try{return await xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(Te(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:i,error:o}=await this._useSession(async l=>{var c,d,h,g,m;const{data:y,error:w}=l;if(w)throw w;const R=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await xe(this.fetch,"GET",R,{headers:this.headers,jwt:(m=(g=y.session)===null||g===void 0?void 0:g.access_token)!==null&&m!==void 0?m:void 0})});if(o)throw o;return hn()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(Te(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var i,o;const{data:l,error:c}=r;if(c)throw c;return await xe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await lS(async o=>(o>0&&await aS(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Vn})),(o,l)=>{const c=200*Math.pow(2,o);return l&&Sc(l)&&Date.now()+c-i<ei})}catch(i){if(this._debug(r,"error",i),Te(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),hn()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await rs(this.storage,this.storageKey);if(o&&this.userStorage){let c=await rs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:o.user},await ti(this.userStorage,this.storageKey+"-user",c)),o.user=(e=c?.user)!==null&&e!==void 0?e:Ec()}else if(o&&!o.user&&!o.user){const c=await rs(this.storage,this.storageKey+"-user");c&&c?.user?(o.user=c.user,await br(this.storage,this.storageKey+"-user"),await ti(this.storage,this.storageKey,o)):o.user=Ec()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const l=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<_c;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${_c}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:c}=await this._callRefreshToken(o.refresh_token);c&&(console.error(c),Sc(c)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(o.access_token);!d&&c?.user?(o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(i,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var r,i;if(!e)throw new Ir;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Sl;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new Ir;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={session:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(o,"error",l),Te(l)){const c={session:null,error:l};return Sc(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(c),c}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,r,i=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,r)}catch(h){l.push(h)}});if(await Promise.all(c),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await ti(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const l=Up(o);await ti(this.storage,this.storageKey,l)}else{const o=Up(r);await ti(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await br(this.storage,this.storageKey),await br(this.storage,this.storageKey+"-code-verifier"),await br(this.storage,this.storageKey+"-user"),this.userStorage&&await br(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&hn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ei);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-e)/ei);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${ei}ms, refresh threshold is ${Gc} ticks`),o<=Gc&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Eg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!hn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,i){const o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,c]=await Gs(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});o.push(d.toString())}if(i?.queryParams){const l=new URLSearchParams(i.queryParams);o.push(l.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var i;const{data:o,error:l}=r;return l?{data:null,error:l}:await xe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var i,o;const{data:l,error:c}=r;if(c)return{data:null,error:c};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:h,error:g}=await xe(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});return g?{data:null,error:g}:(e.factorType==="totp"&&(!((o=h?.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:l}=r;if(l)return{data:null,error:l};const{data:c,error:d}=await xe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:d})})}catch(r){if(Te(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:l}=r;return l?{data:null,error:l}:await xe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(Te(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const i=e?.factors||[],o=i.filter(c=>c.factor_type==="totp"&&c.status==="verified"),l=i.filter(c=>c.factor_type==="phone"&&c.status==="verified");return{data:{all:i,totp:o,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,i;const{data:{session:o},error:l}=e;if(l)return{data:null,error:l};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=kc(o.access_token);let d=null;c.aal&&(d=c.aal);let h=d;((i=(r=o.user.factors)===null||r===void 0?void 0:r.filter(y=>y.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(h="aal2");const m=c.amr||[];return{data:{currentLevel:d,nextLevel:h,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(e,r={keys:[]}){let i=r.keys.find(d=>d.kid===e);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(d=>d.kid===e),i&&this.jwks_cached_at+W_>o)return i;const{data:l,error:c}=await xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,i=l.keys.find(d=>d.kid===e),!i)?null:i}async getClaims(e,r={}){try{let i=e;if(!i){const{data:R,error:x}=await this.getSession();if(x||!R.session)return{data:null,error:x};i=R.session.access_token}const{header:o,payload:l,signature:c,raw:{header:d,payload:h}}=kc(i);r?.allowExpired||mS(l.exp);const g=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!g){const{error:R}=await this.getUser(i);if(R)throw R;return{data:{claims:l,header:o,signature:c},error:null}}const m=gS(o.alg),y=await crypto.subtle.importKey("jwk",g,m,!0,["verify"]);if(!await crypto.subtle.verify(m,y,c,tS(`${d}.${h}`)))throw new Yc("Invalid JWT signature");return{data:{claims:l,header:o,signature:c},error:null}}catch(i){if(Te(i))return{data:null,error:i};throw i}}}po.nextInstanceID=0;const PS=po;class LS extends PS{constructor(e){super(e)}}var NS=function(n,e,r,i){function o(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(m){try{g(i.next(m))}catch(y){c(y)}}function h(m){try{g(i.throw(m))}catch(y){c(y)}}function g(m){m.done?l(m.value):o(m.value).then(d,h)}g((i=i.apply(n,e||[])).next())})};class DS{constructor(e,r,i){var o,l,c;this.supabaseUrl=e,this.supabaseKey=r;const d=F_(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,g={db:A_,realtime:P_,auth:Object.assign(Object.assign({},x_),{storageKey:h}),global:O_},m=M_(i??{},g);this.storageKey=(o=m.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=m.global.headers)!==null&&l!==void 0?l:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(y,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=m.auth)!==null&&c!==void 0?c:{},this.headers,m.global.fetch),this.fetch=U_(r,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new Q0(new URL("rest/v1",d).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new T_(this.storageUrl.href,this.headers,this.fetch,i?.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new F0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},i={}){return this.rest.rpc(e,r,i)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return NS(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(r=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:i,storage:o,userStorage:l,storageKey:c,flowType:d,lock:h,debug:g},m,y){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new LS({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),m),storageKey:c,autoRefreshToken:e,persistSession:r,detectSessionInUrl:i,storage:o,userStorage:l,flowType:d,lock:h,debug:g,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(R=>R.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new h_(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,i)=>{this._handleTokenChanged(r,"CLIENT",i?.access_token)})}_handleTokenChanged(e,r,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const US=(n,e,r)=>new DS(n,e,r);function jS(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}jS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $S="https://gwbreyzphmxbakkgevbv.supabase.co",MS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd3YnJleXpwaG14YmFra2dldmJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgwNTE0MjAsImV4cCI6MjA3MzYyNzQyMH0.OPmm-SXGM0OEjfCohcVxDecN4GoNUAr05Xol7VHqIFs",Cc=US($S,MS);function FS(n){const[e,r]=k.useState(null),[i,o]=k.useState(!1),[l,c]=k.useState(!1),[d,h]=k.useState(null),g=k.useCallback(async()=>{if(!(!n||n==="home")){o(!0),h(null);try{const{data:x,error:E}=await Cc.from("notes").select("*").eq("title",n).single();if(E&&E.code!=="PGRST116")throw E;r(x||null)}catch(x){h(x instanceof Error?x.message:"Failed to load note")}finally{o(!1)}}},[n]),m=k.useCallback(async x=>{if(!(!n||n==="home")){c(!0),h(null);try{if(e){const{data:E,error:P}=await Cc.from("notes").update({content:x,updated_at:new Date().toISOString()}).eq("id",e.id).select().single();if(P)throw P;r(E)}else{const{data:E,error:P}=await Cc.from("notes").insert({title:n,content:x}).select().single();if(P)throw P;r(E)}}catch(E){h(E instanceof Error?E.message:"Failed to save note")}finally{c(!1)}}},[n,e]),[y,w]=k.useState(null),R=k.useCallback(x=>{y&&clearTimeout(y);const E=setTimeout(()=>{m(x)},1e3);w(E)},[m,y]);return k.useEffect(()=>()=>{y&&clearTimeout(y)},[y]),k.useEffect(()=>{g()},[g]),{note:e,loading:i,saving:l,error:d,saveNote:R,loadNote:g}}var zS=Object.defineProperty,BS=(n,e)=>{for(var r in e)zS(n,r,{get:e[r],enumerable:!0})},VS="@liveblocks/core",kl="3.7.1",HS="esm",Qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},WS="https://liveblocks.io/docs/errors/dupes",KS=" ";function qS(n){console.error(n)}function _d(n,e,r){const i=Symbol.for(n),o=`${e} (${r})`;if(!Qa[i])Qa[i]=o;else if(Qa[i]!==o){const l=[`Multiple copies of Liveblocks are being loaded in your project. This will cause issues! See ${WS+KS}`,"","Conflicts:",`- ${n} ${Qa[i]} (already loaded)`,`- ${n} ${o} (trying to load this now)`].join(`
`);qS(l)}}function Fe(){const n=new Set;function e(c){return n.add(c),()=>n.delete(c)}function r(c){const d=e(h=>(d(),c(h)));return d}async function i(c){let d;return new Promise(h=>{d=e(g=>{(c===void 0||c(g))&&h(g)})}).finally(()=>d?.())}function o(c){let d=!1;for(const h of n)h(c),d=!0;return d}function l(){return n.size}return{notify:o,subscribe:e,subscribeOnce:r,count:l,waitUntil:i,dispose(){n.clear()},observable:{subscribe:e,subscribeOnce:r,waitUntil:i}}}function GS(){const n=Fe();let e=null;function r(){e=[]}function i(){if(e!==null){for(const l of e)n.notify(l);e=null}}function o(l){return e!==null?(e.push(l),!1):n.notify(l)}return{...n,notify:o,pause:r,unpause:i,dispose(){n.dispose(),e!==null&&(e.length=0)}}}var xr=(n=>n);function nn(n){throw new Error(n)}function Sd(n){return Object.entries(n)}function JS(n){return Object.keys(n)}function QS(n,e){return typeof e<"u"?Object.create(n,e):Object.create(n)}function Gn(n){try{return JSON.parse(n)}catch{return}}function mo(n){return JSON.parse(JSON.stringify(n))}function YS(n){try{const e=n.replace(/-/g,"+").replace(/_/g,"/");return decodeURIComponent(atob(e).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch{return atob(n)}}function Xc(n){return n.filter(e=>e!=null)}function Eo(n){const e={...n};return Object.keys(n).forEach(r=>{const i=r;e[i]===void 0&&delete e[i]}),e}function XS(n){return new Promise(e=>setTimeout(e,n))}async function zp(n,e,r){let i;const o=new Promise((l,c)=>{i=setTimeout(()=>{c(new Error(r))},e)});return Promise.race([n,o]).finally(()=>clearTimeout(i))}function Bp(n){let e=null;return()=>(e===null&&(e=n().catch(r=>{throw setTimeout(()=>{e=null},5e3),r})),e)}function ZS(n,e){for(let r=n.length-1;r>=0;r--)if(e(n[r],r,n))return r;return-1}var ss=Symbol("kSinks"),cl=Symbol("kTrigger"),si=null,cs=null;function nt(n){if(si!==null){n();return}si=new Set;try{n()}finally{for(const e of si)e[cl]();si=null}}function kd(n){si||nn("Expected to be in an active batch"),si.add(n)}function bg(n,e){let r=!1;const i={...n};return Object.keys(e).forEach(o=>{const l=o,c=e[l];i[l]!==c&&(c===void 0?delete i[l]:i[l]=c,r=!0)}),r?i:n}var Ed=class{equals;#e;[ss];constructor(n){this.equals=n??Object.is,this.#e=Fe(),this[ss]=new Set,this.get=this.get.bind(this),this.subscribe=this.subscribe.bind(this),this.subscribeOnce=this.subscribeOnce.bind(this)}dispose(){this.#e.dispose(),this.#e="(disposed)",this.equals="(disposed)"}get hasWatchers(){if(this.#e.count()>0)return!0;for(const n of this[ss])if(n.hasWatchers)return!0;return!1}[cl](){this.#e.notify();for(const n of this[ss])kd(n)}subscribe(n){return this.#e.count()===0&&this.get(),this.#e.subscribe(n)}subscribeOnce(n){const e=this.subscribe(()=>(e(),n()));return e}waitUntil(){throw new Error("waitUntil not supported on Signals")}markSinksDirty(){for(const n of this[ss])n.markDirty()}addSink(n){this[ss].add(n)}removeSink(n){this[ss].delete(n)}asReadonly(){return this}},zt=class extends Ed{#e;constructor(n,e){super(e),this.#e=xr(n)}dispose(){super.dispose(),this.#e="(disposed)"}get(){return cs?.add(this),this.#e}set(n){nt(()=>{typeof n=="function"&&(n=n(this.#e)),this.equals(this.#e,n)||(this.#e=xr(n),this.markSinksDirty(),kd(this))})}},ek=class extends zt{constructor(n){super(xr(Eo(n)))}set(){throw new Error("Don't call .set() directly, use .patch()")}patch(n){super.set(e=>bg(e,n))}},tk=Symbol(),Ye=class Zc extends Ed{#e;#t;#n;#r;#i;static from(...e){const r=e.pop();if(typeof r!="function"&&nn("Invalid .from() call, last argument expected to be a function"),typeof e[e.length-1]=="function"){const i=r,o=e.pop();return new Zc(e,o,i)}else{const i=r;return new Zc(e,i)}}constructor(e,r,i){super(i),this.#t=!0,this.#e=tk,this.#r=e,this.#n=new Set,this.#i=r}dispose(){for(const e of this.#n)e.removeSink(this);this.#e="(disposed)",this.#n="(disposed)",this.#r="(disposed)",this.#i="(disposed)"}get isDirty(){return this.#t}#s(){const e=cs;let r;cs=new Set;try{r=this.#i(...this.#r.map(i=>i.get()))}finally{const i=this.#n;this.#n=new Set;for(const o of cs)this.#n.add(o),i.delete(o);for(const o of i)o.removeSink(this);for(const o of this.#n)o.addSink(this);cs=e}return this.#t=!1,this.equals(this.#e,r)?!1:(this.#e=r,!0)}markDirty(){this.#t||(this.#t=!0,this.markSinksDirty())}get(){return this.#t&&this.#s(),cs?.add(this),this.#e}[cl](){if(!this.hasWatchers)return;this.#s()&&super[cl]()}},vn=class extends Ed{#e;constructor(n){super(),this.#e=n}dispose(){super.dispose(),this.#e="(disposed)"}get(){return cs?.add(this),this.#e}mutate(n){nt(()=>{const e=n?n(this.#e):!0;e!==null&&typeof e=="object"&&"then"in e&&nn("MutableSignal.mutate() does not support async callbacks"),e!==!1&&(this.markSinksDirty(),kd(this))})}};function nk(n,e,r){let i=0,o=n.length;for(;i<o;){const l=i+(o-i>>1);r(e,n[l])?o=l:i=l+1}return i}var ds=class so{#e;#t;constructor(e,r){this.#t=r,this.#e=e}static with(e){return so.fromAlreadySorted([],e)}static from(e,r){const i=new so([],r);for(const o of e)i.add(o);return i}static fromAlreadySorted(e,r){return new so(e,r)}clone(){return new so(this.#e.slice(),this.#t)}add(e){const r=nk(this.#e,e,this.#t);this.#e.splice(r,0,e)}clear(){const e=this.#e.length>0;return this.#e.length=0,e}removeBy(e,r=Number.POSITIVE_INFINITY){let i=0;for(let o=0;o<this.#e.length;o++)if(e(this.#e[o])){if(this.#e.splice(o,1),i++,i>=r)break;o--}return i>0}remove(e){const r=this.#e.indexOf(e);return r>=0?(this.#e.splice(r,1),!0):!1}at(e){return this.#e[e]}get length(){return this.#e.length}*filter(e){for(const r of this.#e)e(r)&&(yield r)}*findAllRight(e){for(let r=this.#e.length-1;r>=0;r--){const i=this.#e[r];e(i,r)&&(yield i)}}[Symbol.iterator](){return this.#e[Symbol.iterator]()}*iterReversed(){for(let e=this.#e.length-1;e>=0;e--)yield this.#e[e]}find(e,r){const i=this.findIndex(e,r);return i>-1?this.#e.at(i):void 0}findIndex(e,r=0){for(let i=Math.max(0,r);i<this.#e.length;i++)if(e(this.#e[i],i))return i;return-1}findRight(e,r){const i=this.findIndexRight(e,r);return i>-1?this.#e.at(i):void 0}findIndexRight(e,r=this.#e.length-1){for(let i=Math.min(r,this.#e.length-1);i>=0;i--)if(e(this.#e[i],i))return i;return-1}get rawArray(){return this.#e}},rk=class{#e;#t;signal;constructor(){this.#e=new Map,this.#t=ds.from([],(n,e)=>{const r=e.lastMessageAt??e.createdAt,i=n.lastMessageAt??n.createdAt;return r<i?!0:r===i?e.id<n.id:!1}),this.signal=new vn(this)}getEvenIfDeleted(n){return this.#e.get(n)}markDeleted(n){const e=this.#e.get(n);e===void 0||e.deletedAt!==void 0||this.upsert({...e,deletedAt:new Date().toISOString()})}upsert(n){this.signal.mutate(()=>{const e=this.#e.get(n.id);if(e!==void 0){if(e.deletedAt!==void 0)return!1;this.#t.remove(e),this.#e.delete(e.id)}return n.deletedAt===void 0&&this.#t.add(n),this.#e.set(n.id,n),!0})}findMany(n){return Array.from(this.#t.filter(e=>{if(n.metadata===void 0)return!0;for(const[r,i]of Object.entries(n.metadata))if(i===null){if(r in e.metadata)return!1}else if(typeof i=="string"){if(e.metadata[r]!==i)return!1}else{const o=e.metadata[r];if(!Array.isArray(o)||!i.every(l=>o.includes(l)))return!1}return!0}))}};function ed(n){const e=n.editedAt?new Date(n.editedAt):void 0,r=new Date(n.createdAt),i=n.reactions.map(o=>({...o,createdAt:new Date(o.createdAt)}));if(n.body)return{...n,reactions:i,createdAt:r,editedAt:e};{const o=new Date(n.deletedAt);return{...n,reactions:i,createdAt:r,editedAt:e,deletedAt:o}}}function Cr(n){const e=new Date(n.createdAt),r=new Date(n.updatedAt),i=n.comments.map(o=>ed(o));return{...n,createdAt:e,updatedAt:r,comments:i}}function sk(n){return{...n,createdAt:new Date(n.createdAt)}}function is(n){const e=new Date(n.notifiedAt),r=n.readAt?new Date(n.readAt):null;if("activities"in n){const i=n.activities.map(o=>({...o,createdAt:new Date(o.createdAt)}));return{...n,notifiedAt:e,readAt:r,activities:i}}return{...n,notifiedAt:e,readAt:r}}function Tr(n){const e=new Date(n.createdAt);return{...n,createdAt:e}}function Tc(n){const e=new Date(n.deletedAt);return{...n,deletedAt:e}}function Ic(n){const e=new Date(n.deletedAt);return{...n,deletedAt:e}}function Rc(n){const e=new Date(n.deletedAt);return{...n,deletedAt:e}}function Vp(n){const e=new Date(n.createdAt),r=new Date(n.updatedAt),i=n.members.map(o=>({...o,addedAt:new Date(o.addedAt)}));return{...n,createdAt:e,updatedAt:r,members:i}}function kt(n,e){throw new Error(e)}function we(n,e="Expected value to be non-nullable"){return n}var Ar={};BS(Ar,{error:()=>Pr,errorWithTitle:()=>Rg,warn:()=>Lt,warnWithTitle:()=>ok});var Cg="background:#0e0d12;border-radius:9999px;color:#fff;padding:3px 7px;font-family:sans-serif;font-weight:600;",ik="font-weight:600";function Tg(n){return typeof window>"u"?console[n]:((e,...r)=>console[n]("%cLiveblocks",Cg,e,...r))}var Lt=Tg("warn"),Pr=Tg("error");function Ig(n){return typeof window>"u"?console[n]:((e,r,...i)=>console[n](`%cLiveblocks%c ${e}`,Cg,ik,r,...i))}var ok=Ig("warn"),Rg=Ig("error");function ak(n){return n!=null}function Yn(n){return n!==null&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"}function td(n){return Yn(n)&&typeof n.startsWith=="string"}var go=class Og extends Error{response;details;constructor(e,r,i){super(e),this.name="HttpError",this.response=r,this.details=i}static async fromResponse(e){let r;try{r=await e.text()}catch{}const i=r?Gn(r):void 0;let o;Yn(i)&&(o=i);let l="";l||=typeof o?.message=="string"?o.message:"",l||=typeof o?.error=="string"?o.error:"",i===void 0&&(l||=r||""),l||=e.statusText;let c;try{c=new URL(e.url).pathname}catch{}l+=c!==void 0?` (got status ${e.status} from ${c})`:` (got status ${e.status})`;const d=o;return new Og(l,e,d)}get status(){return this.response.status}},lk=n=>n instanceof go&&n.status>=400&&n.status<500;async function co(n,e,r,i=lk){const o=r.length>0?r[r.length-1]:0;let l=0;for(;;){l++;try{return await n()}catch(d){if(i(d))throw d;if(l>=e)throw new Error(`Failed after ${e} attempts: ${String(d)}`)}const c=r[l-1]??o;Lt(`Attempt ${l} was unsuccessful. Retrying in ${c} milliseconds.`),await XS(c)}}function Ag(){let n,e;return[new Promise((i,o)=>{n=i,e=o}),n,e]}function bd(){const[n,e,r]=Ag();return{promise:n,resolve:e,reject:r}}function uk(n,e){return e!==null&&typeof e=="object"&&!Array.isArray(e)?Object.keys(e).sort().reduce((r,i)=>(r[i]=e[i],r),{}):e}function dl(n){return JSON.stringify(n,uk)}function Jn(n){try{return JSON.stringify(n)}catch(e){throw console.error(`Could not stringify: ${e.message}`),console.error(n),e}}var ck=50,dk=class{input;resolve;reject;promise;constructor(n){this.input=n;const{promise:e,resolve:r,reject:i}=bd();this.promise=e,this.resolve=r,this.reject=i}},Or=class{#e=[];#t;#n;#r;#i;error=!1;constructor(n,e){this.#t=n,this.#n=e.size??ck,this.#r=e.delay}#s(){this.#i!==void 0&&(clearTimeout(this.#i),this.#i=void 0)}#o(){this.#e.length===this.#n?this.#a():this.#e.length===1&&(this.#s(),this.#i=setTimeout(()=>void this.#a(),this.#r))}async#a(){if(this.#e.length===0)return;const n=this.#e.splice(0),e=n.map(r=>r.input);try{const r=await this.#t(e);this.error=!1,n.forEach((i,o)=>{const l=r?.[o];Array.isArray(r)?n.length!==r.length?i.reject(new Error(`Callback must return an array of the same length as the number of provided items. Expected ${n.length}, but got ${r.length}.`)):l instanceof Error?i.reject(l):i.resolve(l):i.reject(new Error("Callback must return an array."))})}catch(r){this.error=!0,n.forEach(i=>{i.reject(r)})}}get(n){const e=this.#e.find(i=>dl(i.input)===dl(n));if(e)return e.promise;const r=new dk(n);return this.#e.push(r),this.#o(),r.promise}clear(){this.#e=[],this.error=!1,this.#s()}};function oi(n){const e=new vn(new Map);function r(m){return dl(m)}function i(m){e.mutate(y=>{if(Array.isArray(m))for(const w of m)y.set(w.key,w.state);else y.set(m.key,m.state)})}function o(m){e.mutate(y=>{if(Array.isArray(m))for(const w of m)y.delete(r(w));else y.clear()})}async function l(m){const y=r(m);if(!e.get().has(y))try{i({key:y,state:{isLoading:!0}});const R=await n.get(m);i({key:y,state:{isLoading:!1,data:R}})}catch(R){i({key:y,state:{isLoading:!1,error:R}})}}function c(m){i(m.map(y=>({key:r(y[0]),state:{isLoading:!1,data:y[1]}})))}function d(m){const y=r(m);return e.get().get(y)}function h(m){const y=r(m);return e.get().get(y)?.data}function g(){return[...e.get().keys()]}return{subscribe:e.subscribe,enqueue:l,setData:c,getItemState:d,getData:h,invalidate:o,batch:n,_cacheKeys:g}}function fk(n,e){const r=[];for(let i=0,o=n.length;i<o;i+=e)r.push(n.slice(i,i+e));return r}var Rn=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((e,r)=>e+=(r&=63)<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r<63?"_":"-",""),hk="th",pk="cm",mk="at";function Cd(n){return`${n}_${Rn()}`}function xg(){return Cd(hk)}function fl(){return Cd(pk)}function gk(){return Cd(mk)}var Ge=class extends Map{#e;constructor(n,e){super(e),this.#e=n}getOrCreate(n,e){if(super.has(n))return super.get(n);{const i=(e??this.#e??nn("DefaultMap used without a factory function"))(n);return this.set(n,i),i}}},vk=/^[a-zA-Z_][a-zA-Z0-9_]*$/;function Ya(n){let e=[];const r=Object.entries(n),i=[],o=[],l=[];return r.forEach(([c,d])=>{if(!vk.test(c))throw new Error("Key must only contain letters, numbers, _");Kp(d)?i.push([c,d]):Yn(d)&&(td(d)?o.push([c,d]):l.push([c,d]))}),e=[...Hp(i),...Wp(o)],l.forEach(([c,d])=>{const h=Object.entries(d),g=[],m=[];h.forEach(([y,w])=>{if(yk(y))throw new Error("Key cannot be empty");Kp(w)?g.push([qp(c,y),w]):td(w)&&m.push([qp(c,y),w])}),e=[...e,...Hp(g),...Wp(m)]}),e.map(({key:c,operator:d,value:h})=>`${c}${d}${Pg(h)}`).join(" ")}var Hp=n=>{const e=[];return n.forEach(([r,i])=>{e.push({key:r,operator:":",value:i})}),e},Wp=n=>{const e=[];return n.forEach(([r,i])=>{"startsWith"in i&&typeof i.startsWith=="string"&&e.push({key:r,operator:"^",value:i.startsWith})}),e},Kp=n=>typeof n=="string"||typeof n=="number"||typeof n=="boolean"||n===null,qp=(n,e)=>e?`${n}[${Pg(e)}]`:n,yk=n=>!n||n.toString().trim()==="";function Pg(n){const e=JSON.stringify(n);return typeof n!="string"||e.includes("'")?e:`'${e.slice(1,-1).replace(/\\"/g,'"')}'`}function wk(n){const e=new URLSearchParams;for(const[r,i]of Object.entries(n))i!=null&&e.set(r,i.toString());return e}function _k(n,e,r){const i=new URL(e,n);return r!==void 0&&(i.search=(r instanceof URLSearchParams?r:wk(r)).toString()),i.toString()}function ge(n,...e){return n.reduce((r,i,o)=>r+encodeURIComponent(e[o-1]??"")+i)}function Sk({baseUrl:n,authManager:e,currentUserId:r,fetchPolyfill:i}){const o=new kk(n,i);async function l(T){const J=await o.get(ge`/v2/c/rooms/${T.roomId}/threads/delta`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}),{since:T.since.toISOString()},{signal:T.signal});return{threads:{updated:J.data.map(Cr),deleted:J.deletedThreads.map(Tc)},inboxNotifications:{updated:J.inboxNotifications.map(is),deleted:J.deletedInboxNotifications.map(Ic)},subscriptions:{updated:J.subscriptions.map(Tr),deleted:J.deletedSubscriptions.map(Rc)},requestedAt:new Date(J.meta.requestedAt),permissionHints:J.meta.permissionHints}}async function c(T){let J;T.query&&(J=Ya(T.query));const ie=50;try{const ue=await o.get(ge`/v2/c/rooms/${T.roomId}/threads`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}),{cursor:T.cursor,query:J,limit:ie});return{threads:ue.data.map(Cr),inboxNotifications:ue.inboxNotifications.map(is),subscriptions:ue.subscriptions.map(Tr),nextCursor:ue.meta.nextCursor,requestedAt:new Date(ue.meta.requestedAt),permissionHints:ue.meta.permissionHints}}catch(ue){if(ue instanceof go&&ue.status===404)return{threads:[],inboxNotifications:[],subscriptions:[],nextCursor:null,requestedAt:new Date(Date.now()-360*60*1e3),permissionHints:{}};throw ue}}async function d(T){const J=T.commentId??fl(),ie=T.threadId??xg(),ue=await o.post(ge`/v2/c/rooms/${T.roomId}/threads`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}),{id:ie,comment:{id:J,body:T.body,attachmentIds:T.attachmentIds},metadata:T.metadata});return Cr(ue)}async function h(T){await o.delete(ge`/v2/c/rooms/${T.roomId}/threads/${T.threadId}`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}))}async function g(T){const J=await o.rawGet(ge`/v2/c/rooms/${T.roomId}/thread-with-notification/${T.threadId}`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}));if(J.ok){const ie=await J.json();return{thread:Cr(ie.thread),inboxNotification:ie.inboxNotification?is(ie.inboxNotification):void 0,subscription:ie.subscription?Tr(ie.subscription):void 0}}else{if(J.status===404)return{thread:void 0,inboxNotification:void 0,subscription:void 0};throw new Error(`There was an error while getting thread ${T.threadId}.`)}}async function m(T){return await o.post(ge`/v2/c/rooms/${T.roomId}/threads/${T.threadId}/metadata`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}),T.metadata)}async function y(T){const J=T.commentId??fl(),ie=await o.post(ge`/v2/c/rooms/${T.roomId}/threads/${T.threadId}/comments`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}),{id:J,body:T.body,attachmentIds:T.attachmentIds});return ed(ie)}async function w(T){const J=await o.post(ge`/v2/c/rooms/${T.roomId}/threads/${T.threadId}/comments/${T.commentId}`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}),{body:T.body,attachmentIds:T.attachmentIds});return ed(J)}async function R(T){await o.delete(ge`/v2/c/rooms/${T.roomId}/threads/${T.threadId}/comments/${T.commentId}`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}))}async function x(T){const J=await o.post(ge`/v2/c/rooms/${T.roomId}/threads/${T.threadId}/comments/${T.commentId}/reactions`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}),{emoji:T.emoji});return sk(J)}async function E(T){await o.delete(ge`/v2/c/rooms/${T.roomId}/threads/${T.threadId}/comments/${T.commentId}/reactions/${T.emoji}`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}))}async function P(T){await o.post(ge`/v2/c/rooms/${T.roomId}/threads/${T.threadId}/mark-as-resolved`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}))}async function D(T){await o.post(ge`/v2/c/rooms/${T.roomId}/threads/${T.threadId}/mark-as-unresolved`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}))}async function b(T){const J=await o.post(ge`/v2/c/rooms/${T.roomId}/threads/${T.threadId}/subscribe`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}));return Tr(J)}async function A(T){await o.post(ge`/v2/c/rooms/${T.roomId}/threads/${T.threadId}/unsubscribe`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}))}async function C(T){const J=T.roomId,ie=T.signal,ue=T.attachment,We=ie?new DOMException(`Upload of attachment ${T.attachment.id} was aborted.`,"AbortError"):void 0;if(ie?.aborted)throw We;const at=Je=>{if(ie?.aborted)throw We;if(Je instanceof go&&Je.status===413)throw Je;return!1},Nt=5*1024*1024,Bt=10,wt=[2e3,2e3,2e3,2e3,2e3,2e3,2e3,2e3,2e3,2e3];function Rt(Je){const Et=[];let Gt=0;for(;Gt<Je.size;){const Vt=Math.min(Gt+Nt,Je.size);Et.push({partNumber:Et.length+1,part:Je.slice(Gt,Vt)}),Gt=Vt}return Et}if(ue.size<=Nt)return co(async()=>o.putBlob(ge`/v2/c/rooms/${J}/attachments/${ue.id}/upload/${encodeURIComponent(ue.name)}`,await e.getAuthValue({requestedScope:"comments:read",roomId:J}),ue.file,{fileSize:ue.size},{signal:ie}),Bt,wt,at);{let Je;const Et=[],Gt=await co(async()=>o.post(ge`/v2/c/rooms/${J}/attachments/${ue.id}/multipart/${encodeURIComponent(ue.name)}`,await e.getAuthValue({requestedScope:"comments:read",roomId:J}),void 0,{signal:ie},{fileSize:ue.size}),Bt,wt,at);try{Je=Gt.uploadId;const Vt=Rt(ue.file);if(ie?.aborted)throw We;const sr=fk(Vt,5);for(const xn of sr){const wn=[];for(const{part:Mr,partNumber:sn}of xn)wn.push(co(async()=>o.putBlob(ge`/v2/c/rooms/${J}/attachments/${ue.id}/multipart/${Gt.uploadId}/${String(sn)}`,await e.getAuthValue({requestedScope:"comments:read",roomId:J}),Mr,void 0,{signal:ie}),Bt,wt,at));Et.push(...await Promise.all(wn))}if(ie?.aborted)throw We;const $r=Et.sort((xn,wn)=>xn.partNumber-wn.partNumber);return o.post(ge`/v2/c/rooms/${J}/attachments/${ue.id}/multipart/${Je}/complete`,await e.getAuthValue({requestedScope:"comments:read",roomId:J}),{parts:$r},{signal:ie})}catch(Vt){if(Je&&Vt?.name&&(Vt.name==="AbortError"||Vt.name==="TimeoutError"))try{await o.rawDelete(ge`/v2/c/rooms/${J}/attachments/${ue.id}/multipart/${Je}`,await e.getAuthValue({requestedScope:"comments:read",roomId:J}))}catch{}throw Vt}}}const $=new Ge(T=>{const J=new Or(async ie=>{const ue=ie.flat(),{urls:We}=await o.post(ge`/v2/c/rooms/${T}/attachments/presigned-urls`,await e.getAuthValue({requestedScope:"comments:read",roomId:T}),{attachmentIds:ue});return We.map(at=>at??new Error("There was an error while getting this attachment's URL"))},{delay:50});return oi(J)});function F(T){return $.getOrCreate(T)}function G(T){return F(T.roomId).batch.get(T.attachmentId)}async function le(T){const{chatId:J,attachment:ie,signal:ue}=T;if(r.get()===void 0)throw new Error("Attachment upload requires an authenticated user.");const at=5*1024*1024;if(T.attachment.file.size<=at)await o.putBlob(ge`/v2/c/chats/${J}/attachments/${ie.id}/upload/${encodeURIComponent(ie.file.name)}`,await e.getAuthValue({requestedScope:"comments:read"}),ie.file,{fileSize:ie.file.size},{signal:ue});else{const Nt=await o.post(ge`/v2/c/chats/${J}/attachments/${ie.id}/multipart/${encodeURIComponent(ie.file.name)}`,await e.getAuthValue({requestedScope:"comments:read"}),void 0,{signal:ue},{fileSize:ie.file.size});try{const Bt=[],wt=[];let Rt=0;for(;Rt<ie.file.size;){const Je=Math.min(Rt+at,ie.file.size);wt.push({number:wt.length+1,part:ie.file.slice(Rt,Je)}),Rt=Je}Bt.push(...await Promise.all(wt.map(async({number:Je,part:Et})=>await o.putBlob(ge`/v2/c/chats/${J}/attachments/${ie.id}/multipart/${Nt.uploadId}/${String(Je)}`,await e.getAuthValue({requestedScope:"comments:read"}),Et,void 0,{signal:ue})))),await o.post(ge`/v2/c/chats/${J}/attachments/${ie.id}/multipart/${Nt.uploadId}/complete`,await e.getAuthValue({requestedScope:"comments:read"}),{parts:Bt.sort((Je,Et)=>Je.number-Et.number)},{signal:ue})}catch(Bt){try{await o.delete(ge`/v2/c/chats/${J}/attachments/${ie.id}/multipart/${Nt.uploadId}`,await e.getAuthValue({requestedScope:"comments:read"}))}catch{}throw Bt}}}const he=new Ge(T=>{const J=new Or(async ie=>{const ue=ie.flat(),{urls:We}=await o.post(ge`/v2/c/chats/${T}/attachments/presigned-urls`,await e.getAuthValue({requestedScope:"comments:read"}),{attachmentIds:ue});return We.map(at=>at??new Error("There was an error while getting this attachment's URL"))},{delay:50});return oi(J)});function be(T){return he.getOrCreate(T)}function De(T){return be(T.chatId).batch.get(T.attachmentId)}async function je(T){return o.get(ge`/v2/c/rooms/${T.roomId}/subscription-settings`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}),void 0,{signal:T.signal})}async function Ue(T){return o.post(ge`/v2/c/rooms/${T.roomId}/subscription-settings`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}),T.settings)}const te=new Ge(T=>new Or(async J=>{const ie=J.flat();return await o.post(ge`/v2/c/rooms/${T}/inbox-notifications/read`,await e.getAuthValue({requestedScope:"comments:read",roomId:T}),{inboxNotificationIds:ie}),ie},{delay:50}));async function Y(T){return te.getOrCreate(T.roomId).get(T.inboxNotificationId)}async function ke(T){if(T.mention.kind!=="user"&&T.mention.kind!=="group")return kt(T.mention,"Unexpected mention kind");await o.rawPost(ge`/v2/c/rooms/${T.roomId}/text-mentions`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}),{userId:T.mention.kind==="user"?T.mention.id:void 0,groupId:T.mention.kind==="group"?T.mention.id:void 0,userIds:T.mention.kind==="group"?T.mention.userIds:void 0,mentionId:T.mentionId})}async function fe(T){await o.rawDelete(ge`/v2/c/rooms/${T.roomId}/text-mentions/${T.mentionId}`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}))}async function K(T){return o.rawGet(ge`/v2/c/rooms/${T.roomId}/y-version/${T.versionId}`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}))}async function re(T){await o.rawPost(ge`/v2/c/rooms/${T.roomId}/version`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}))}async function Z(T){await o.rawPost(ge`/v2/c/rooms/${T.roomId}/text-metadata`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}),{type:T.type,rootKey:T.rootKey})}async function L(T){const J=await o.post(ge`/v2/c/rooms/${T.roomId}/ai/contextual-prompt`,await e.getAuthValue({requestedScope:"room:read",roomId:T.roomId}),{prompt:T.prompt,context:{beforeSelection:T.context.beforeSelection,selection:T.context.selection,afterSelection:T.context.afterSelection},previous:T.previous},{signal:T.signal});if(!J||J.content.length===0)throw new Error("No content returned from server");return J.content[0].text}async function z(T){const J=await o.get(ge`/v2/c/rooms/${T.roomId}/versions`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}));return{versions:J.versions.map(({createdAt:ie,...ue})=>({createdAt:new Date(ie),...ue})),requestedAt:new Date(J.meta.requestedAt)}}async function _e(T){const J=await o.get(ge`/v2/c/rooms/${T.roomId}/versions/delta`,await e.getAuthValue({requestedScope:"comments:read",roomId:T.roomId}),{since:T.since.toISOString()},{signal:T.signal});return{versions:J.versions.map(({createdAt:ie,...ue})=>({createdAt:new Date(ie),...ue})),requestedAt:new Date(J.meta.requestedAt)}}async function B(T){return await(await o.rawGet(ge`/v2/c/rooms/${T.roomId}/storage`,await e.getAuthValue({requestedScope:"room:read",roomId:T.roomId}))).json()}async function ee(T){return o.rawPost(ge`/v2/c/rooms/${T.roomId}/send-message`,await e.getAuthValue({requestedScope:"room:read",roomId:T.roomId}),{nonce:T.nonce,messages:T.messages})}async function de(T){let ie;T?.query&&(ie=Ya(T.query));const ue=await o.get(ge`/v2/c/inbox-notifications`,await e.getAuthValue({requestedScope:"comments:read"}),{cursor:T?.cursor,limit:50,query:ie}),We=ue.groups.map(Vp);return yn.setData(We.map(at=>[at.id,at])),{inboxNotifications:ue.inboxNotifications.map(is),threads:ue.threads.map(Cr),subscriptions:ue.subscriptions.map(Tr),nextCursor:ue.meta.nextCursor,requestedAt:new Date(ue.meta.requestedAt)}}async function Ee(T){let J;T?.query&&(J=Ya(T.query));const ie=await o.get(ge`/v2/c/inbox-notifications/delta`,await e.getAuthValue({requestedScope:"comments:read"}),{since:T.since.toISOString(),query:J},{signal:T.signal});return{inboxNotifications:{updated:ie.inboxNotifications.map(is),deleted:ie.deletedInboxNotifications.map(Ic)},threads:{updated:ie.threads.map(Cr),deleted:ie.deletedThreads.map(Tc)},subscriptions:{updated:ie.subscriptions.map(Tr),deleted:ie.deletedSubscriptions.map(Rc)},requestedAt:new Date(ie.meta.requestedAt)}}async function Re(){const{count:T}=await o.get(ge`/v2/c/inbox-notifications/count`,await e.getAuthValue({requestedScope:"comments:read"}));return T}async function Pe(){await o.post(ge`/v2/c/inbox-notifications/read`,await e.getAuthValue({requestedScope:"comments:read"}),{inboxNotificationIds:"all"})}async function st(T){await o.post(ge`/v2/c/inbox-notifications/read`,await e.getAuthValue({requestedScope:"comments:read"}),{inboxNotificationIds:T})}const rn=new Or(async T=>{const J=T.flat();return await st(J),J},{delay:50});async function jr(T){await rn.get(T)}async function An(){await o.delete(ge`/v2/c/inbox-notifications`,await e.getAuthValue({requestedScope:"comments:read"}))}async function er(T){await o.delete(ge`/v2/c/inbox-notifications/${T}`,await e.getAuthValue({requestedScope:"comments:read"}))}async function tr(T){return o.get(ge`/v2/c/notification-settings`,await e.getAuthValue({requestedScope:"comments:read"}),void 0,{signal:T?.signal})}async function ms(T){return o.post(ge`/v2/c/notification-settings`,await e.getAuthValue({requestedScope:"comments:read"}),T)}async function nr(T){let J;T?.query&&(J=Ya(T.query));const ue=await o.get(ge`/v2/c/threads`,await e.getAuthValue({requestedScope:"comments:read"}),{cursor:T?.cursor,query:J,limit:50});return{threads:ue.threads.map(Cr),inboxNotifications:ue.inboxNotifications.map(is),subscriptions:ue.subscriptions.map(Tr),nextCursor:ue.meta.nextCursor,requestedAt:new Date(ue.meta.requestedAt),permissionHints:ue.meta.permissionHints}}async function gs(T){const J=await o.get(ge`/v2/c/threads/delta`,await e.getAuthValue({requestedScope:"comments:read"}),{since:T.since.toISOString()},{signal:T.signal});return{threads:{updated:J.threads.map(Cr),deleted:J.deletedThreads.map(Tc)},inboxNotifications:{updated:J.inboxNotifications.map(is),deleted:J.deletedInboxNotifications.map(Ic)},subscriptions:{updated:J.subscriptions.map(Tr),deleted:J.deletedSubscriptions.map(Rc)},requestedAt:new Date(J.meta.requestedAt),permissionHints:J.meta.permissionHints}}const rr=new Or(async T=>{const J=T.flat(),{groups:ie}=await o.post(ge`/v2/c/groups/find`,await e.getAuthValue({requestedScope:"comments:read"}),{groupIds:J}),ue=new Map;for(const We of ie)ue.set(We.id,Vp(We));return J.map(We=>ue.get(We))},{delay:50}),yn=oi(rr);function it(T){return rr.get(T)}return{getThreads:c,getThreadsSince:l,createThread:d,getThread:g,deleteThread:h,editThreadMetadata:m,createComment:y,editComment:w,deleteComment:R,addReaction:x,removeReaction:E,markThreadAsResolved:P,markThreadAsUnresolved:D,subscribeToThread:b,unsubscribeFromThread:A,markRoomInboxNotificationAsRead:Y,getSubscriptionSettings:je,updateSubscriptionSettings:Ue,createTextMention:ke,deleteTextMention:fe,getTextVersion:K,createTextVersion:re,reportTextEditor:Z,listTextVersions:z,listTextVersionsSince:_e,getAttachmentUrl:G,uploadAttachment:C,getOrCreateAttachmentUrlsStore:F,uploadChatAttachment:le,getOrCreateChatAttachmentUrlsStore:be,getChatAttachmentUrl:De,streamStorage:B,sendMessages:ee,getInboxNotifications:de,getInboxNotificationsSince:Ee,getUnreadInboxNotificationsCount:Re,markAllInboxNotificationsAsRead:Pe,markInboxNotificationAsRead:jr,deleteAllInboxNotifications:An,deleteInboxNotification:er,getNotificationSettings:tr,updateNotificationSettings:ms,getUserThreads_experimental:nr,getUserThreadsSince_experimental:gs,groupsStore:yn,getGroup:it,executeContextualPrompt:L}}function Td(n){return n.type==="public"?n.publicApiKey:n.token.raw}var kk=class{#e;#t;constructor(n,e){this.#e=n,this.#t=e}async#n(n,e,r,i){n.startsWith("/v2/c/")||nn("This client can only be used to make /v2/c/* requests");const o=_k(this.#e,n,i);return await this.#t(o,{...r,headers:{"Content-Type":"application/json; charset=utf-8",...r?.headers,Authorization:`Bearer ${Td(e)}`,"X-LB-Client":kl}})}async#r(n,e,r,i){const o=await this.#n(n,e,r,i);if(!o.ok)throw await go.fromResponse(o);let l;try{l=await o.json()}catch{l={}}return l}async rawGet(n,e,r,i){return await this.#n(n,e,i,r)}async rawPost(n,e,r){return await this.#n(n,e,{method:"POST",body:Jn(r)})}async rawDelete(n,e){return await this.#n(n,e,{method:"DELETE"})}async get(n,e,r,i){return await this.#r(n,e,i,r)}async post(n,e,r,i,o){return await this.#r(n,e,{...i,method:"POST",body:Jn(r)},o)}async delete(n,e){return await this.#r(n,e,{method:"DELETE"})}async putBlob(n,e,r,i,o){return await this.#r(n,e,{...o,method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:r},i)}};function Ek(n,e){if(n===e)return[0,0];const r=n.split("."),i=e.split("."),o=Math.min(r.length,i.length);let l=0;for(;l<o&&r[l]===i[l];l++);const c=r.length-l,d=i.length-l;return[c,d]}function bk(n,e){const r=n.split(".");if(e<1||e>r.length+1)throw new Error("Invalid number of levels");const i=[];e>r.length&&i.push("*");for(let o=r.length-e+1;o<r.length;o++){const l=r.slice(0,o);l.length>0&&i.push(l.join(".")+".*")}return i.push(n),i}var Ck=class{#e;constructor(n){this.#e=n}get current(){return this.#e}allowPatching(n){const e=this;let r=!0;const i={...this.#e,patch(o){if(r){e.#e=Object.assign({},e.#e,o);for(const l of Object.entries(o)){const[c,d]=l;c!=="patch"&&(this[c]=d)}}else throw new Error("Can no longer patch stale context")}};n(i),r=!1}},Tk=1,Lg=class{id;#e;#t;#n;#r;#i;#s;events;#o;#a;#u;get#d(){const n=this.#n.values()[Symbol.iterator]().next();if(n.done)throw new Error("No states defined yet");return n.value}get currentState(){if(this.#r===null)throw this.#e===0?new Error("Not started yet"):new Error("Already stopped");return this.#r}start(){if(this.#e!==0)throw new Error("State machine has already started");return this.#e=1,this.#r=this.#d,this.#c(null),this}stop(){if(this.#e!==1)throw new Error("Cannot stop a state machine that hasn't started yet");this.#h(null),this.#e=2,this.#r=null}constructor(n){this.id=Tk++,this.#e=0,this.#r=null,this.#n=new Set,this.#a=new Map,this.#o=[],this.#u=new Set,this.#i=new Map,this.#t=new Ck(n),this.#s={didReceiveEvent:Fe(),willTransition:Fe(),didIgnoreEvent:Fe(),willExitState:Fe(),didEnterState:Fe()},this.events={didReceiveEvent:this.#s.didReceiveEvent.observable,willTransition:this.#s.willTransition.observable,didIgnoreEvent:this.#s.didIgnoreEvent.observable,willExitState:this.#s.willExitState.observable,didEnterState:this.#s.didEnterState.observable}}get context(){return this.#t.current}addState(n){if(this.#e!==0)throw new Error("Already started");return this.#n.add(n),this}onEnter(n,e){if(this.#e!==0)throw new Error("Already started");if(this.#a.has(n))throw new Error(`enter/exit function for ${n} already exists`);return this.#a.set(n,e),this}onEnterAsync(n,e,r,i,o){return this.onEnter(n,()=>{const l=new AbortController,c=l.signal,d=o?setTimeout(()=>{const g=new Error("Timed out");this.#l({type:"ASYNC_ERROR",reason:g},i)},o):void 0;let h=!1;return e(this.#t.current,c).then(g=>{c.aborted||(h=!0,this.#l({type:"ASYNC_OK",data:g},r))},g=>{c.aborted||(h=!0,this.#l({type:"ASYNC_ERROR",reason:g},i))}),()=>{clearTimeout(d),h||l.abort()}})}#f(n){const e=[];if(n==="*")for(const r of this.#n)e.push(r);else if(n.endsWith(".*")){const r=n.slice(0,-1);for(const i of this.#n)i.startsWith(r)&&e.push(i)}else{const r=n;this.#n.has(r)&&e.push(r)}if(e.length===0)throw new Error(`No states match ${JSON.stringify(n)}`);return e}addTransitions(n,e){if(this.#e!==0)throw new Error("Already started");for(const r of this.#f(n)){let i=this.#i.get(r);i===void 0&&(i=new Map,this.#i.set(r,i));for(const[o,l]of Object.entries(e)){if(i.has(o))throw new Error(`Trying to set transition "${o}" on "${r}" (via "${n}"), but a transition already exists there.`);const c=l;if(this.#u.add(o),c!==void 0){const d=typeof c=="function"?c:()=>c;i.set(o,d)}}}return this}addTimedTransition(n,e,r){return this.onEnter(n,()=>{const i=typeof e=="function"?e(this.#t.current):e,o=setTimeout(()=>{this.#l({type:"TIMER"},r)},i);return()=>{clearTimeout(o)}})}#p(n){return this.#i.get(this.currentState)?.get(n)}#h(n){this.#s.willExitState.notify(this.currentState),this.#t.allowPatching(e=>{n=n??this.#o.length;for(let r=0;r<n;r++)this.#o.pop()?.(e)})}#c(n){const e=bk(this.currentState,n??this.currentState.split(".").length+1);this.#t.allowPatching(r=>{for(const i of e){const l=this.#a.get(i)?.(r);typeof l=="function"?this.#o.push(l):this.#o.push(null)}}),this.#s.didEnterState.notify(this.currentState)}send(n){if(!this.#u.has(n.type))throw new Error(`Invalid event ${JSON.stringify(n.type)}`);if(this.#e===2)return;const e=this.#p(n.type);if(e!==void 0)return this.#l(n,e);this.#s.didIgnoreEvent.notify(n)}#l(n,e){this.#s.didReceiveEvent.notify(n);const r=this.currentState,o=(typeof e=="function"?e:()=>e)(n,this.#t.current);let l,c;if(o===null){this.#s.didIgnoreEvent.notify(n);return}if(typeof o=="string"?l=o:(l=o.target,c=Array.isArray(o.effect)?o.effect:[o.effect]),!this.#n.has(l))throw new Error(`Invalid next state name: ${JSON.stringify(l)}`);this.#s.willTransition.notify({from:r,to:l});const[d,h]=Ek(this.currentState,l);if(d>0&&this.#h(d),this.#r=l,c!==void 0){const g=c;this.#t.allowPatching(m=>{for(const y of g)typeof y=="function"?y(m,n):m.patch(y)})}h>0&&this.#c(h)}},Hn=(n=>(n[n.UPDATE_PRESENCE=100]="UPDATE_PRESENCE",n[n.USER_JOINED=101]="USER_JOINED",n[n.USER_LEFT=102]="USER_LEFT",n[n.BROADCASTED_EVENT=103]="BROADCASTED_EVENT",n[n.ROOM_STATE=104]="ROOM_STATE",n[n.INITIAL_STORAGE_STATE=200]="INITIAL_STORAGE_STATE",n[n.UPDATE_STORAGE=201]="UPDATE_STORAGE",n[n.REJECT_STORAGE_OP=299]="REJECT_STORAGE_OP",n[n.UPDATE_YDOC=300]="UPDATE_YDOC",n[n.THREAD_CREATED=400]="THREAD_CREATED",n[n.THREAD_DELETED=407]="THREAD_DELETED",n[n.THREAD_METADATA_UPDATED=401]="THREAD_METADATA_UPDATED",n[n.THREAD_UPDATED=408]="THREAD_UPDATED",n[n.COMMENT_CREATED=402]="COMMENT_CREATED",n[n.COMMENT_EDITED=403]="COMMENT_EDITED",n[n.COMMENT_DELETED=404]="COMMENT_DELETED",n[n.COMMENT_REACTION_ADDED=405]="COMMENT_REACTION_ADDED",n[n.COMMENT_REACTION_REMOVED=406]="COMMENT_REACTION_REMOVED",n))(Hn||{});function Gp(n){return n===4999||n>=4e3&&n<4100}function Ik(n){return n>=4100&&n<4200}function Jp(n){return n===1013||n>=4200&&n<4300}function Rk(n){return n==="initial"||n==="disconnected"}function Ng(n){const e=n.currentState;switch(e){case"@ok.connected":case"@ok.awaiting-pong":return"connected";case"@idle.initial":return"initial";case"@auth.busy":case"@auth.backoff":case"@connecting.busy":case"@connecting.backoff":case"@idle.zombie":return n.context.successCount>0?"reconnecting":"connecting";case"@idle.failed":return"disconnected";default:return kt(e,"Unknown state")}}var Dg=[250,500,1e3,2e3,4e3,8e3,1e4],Xa=Dg[0]-1,Ok=[2e3,3e4,6e4,3e5],Ak=3e4,xk=2e3,Pk=1e4,Lk=1e4,mn=class extends Error{constructor(n){super(n)}};function Ug(n,e){return e.find(r=>r>n)??e[e.length-1]}function Xs(n){n.patch({backoffDelay:Ug(n.backoffDelay,Dg)})}function Qp(n){n.patch({backoffDelay:Ug(n.backoffDelay,Ok)})}function Yp(n){n.patch({successCount:0})}function ni(n,e){const r=n===2?Pr:n===1?Lt:(()=>{});return()=>{r(e)}}function Xp(n){const e="Connection to Liveblocks websocket server";return r=>{n instanceof Error?Lt(`${e} could not be established. ${String(n)}`):Lt(jg(n)?`${e} closed prematurely (code: ${n.code}). Retrying in ${r.backoffDelay}ms.`:`${e} could not be established.`)}}function Oc(n){const e=[`code: ${n.code}`];return n.reason&&e.push(`reason: ${n.reason}`),r=>{Lt(`Connection to Liveblocks websocket server closed (${e.join(", ")}). Retrying in ${r.backoffDelay}ms.`)}}var Nk=ni(1,"Connection to WebSocket closed permanently. Won't retry.");function jg(n){return!(n instanceof Error)&&n.type==="close"}function Dk(n){const e=new Date().getTime();function r(...o){Lt(`${((new Date().getTime()-e)/1e3).toFixed(2)} [FSM #${n.id}]`,...o)}const i=[n.events.didReceiveEvent.subscribe(o=>r(`Event ${o.type}`)),n.events.willTransition.subscribe(({from:o,to:l})=>r("Transitioning",o,"",l)),n.events.didIgnoreEvent.subscribe(o=>r("Ignored event",o.type,o,"(current state won't handle it)"))];return()=>{for(const o of i)o()}}function Uk(n){const e=Fe(),r=Fe(),i=Fe();let o=null;const l=n.events.didEnterState.subscribe(()=>{const c=Ng(n);c!==o&&e.notify(c),o==="connected"&&c!=="connected"?i.notify():o!=="connected"&&c==="connected"&&r.notify(),o=c});return{statusDidChange:e.observable,didConnect:r.observable,didDisconnect:i.observable,unsubscribe:l}}var Za=n=>e=>e.patch(n);function jk(n,e){const r=GS();r.pause();const i=Fe();function o(b,A){return()=>{i.notify({message:b,code:A})}}const l={successCount:0,authValue:null,socket:null,backoffDelay:Xa},c=new Lg(l).addState("@idle.initial").addState("@idle.failed").addState("@idle.zombie").addState("@auth.busy").addState("@auth.backoff").addState("@connecting.busy").addState("@connecting.backoff").addState("@ok.connected").addState("@ok.awaiting-pong");c.addTransitions("*",{RECONNECT:{target:"@auth.backoff",effect:[Xs,Yp]},DISCONNECT:"@idle.initial"}),c.onEnter("@idle.*",Yp).addTransitions("@idle.*",{CONNECT:(b,A)=>A.authValue!==null?"@connecting.busy":"@auth.busy"}),c.addTransitions("@auth.backoff",{NAVIGATOR_ONLINE:{target:"@auth.busy",effect:Za({backoffDelay:Xa})}}).addTimedTransition("@auth.backoff",b=>b.backoffDelay,"@auth.busy").onEnterAsync("@auth.busy",()=>zp(n.authenticate(),Pk,"Timed out during auth"),b=>({target:"@connecting.busy",effect:Za({authValue:b.data})}),b=>b.reason instanceof mn?{target:"@idle.failed",effect:[ni(2,b.reason.message),o(b.reason.message,-1)]}:{target:"@auth.backoff",effect:[Xs,ni(2,`Authentication failed: ${b.reason instanceof Error?b.reason.message:String(b.reason)}`)]});const d=b=>c.send({type:"EXPLICIT_SOCKET_ERROR",event:b}),h=b=>c.send({type:"EXPLICIT_SOCKET_CLOSE",event:b}),g=b=>b.data==="pong"?c.send({type:"PONG"}):r.notify(b);function m(b){b&&(b.removeEventListener("error",d),b.removeEventListener("close",h),b.removeEventListener("message",g),b.close())}c.addTransitions("@connecting.backoff",{NAVIGATOR_ONLINE:{target:"@connecting.busy",effect:Za({backoffDelay:Xa})}}).addTimedTransition("@connecting.backoff",b=>b.backoffDelay,"@connecting.busy").onEnterAsync("@connecting.busy",async(b,A)=>{let C=null,$=null;const F=new Promise((G,le)=>{if(b.authValue===null)throw new Error("No auth authValue");const he=n.createSocket(b.authValue);$=he;function be(te){C=te,he.removeEventListener("message",g),le(te)}const[De,je]=Ag();e.waitForActorId||je();function Ue(te){Gn(te.data)?.type===104&&je()}he.addEventListener("message",g),e.waitForActorId&&he.addEventListener("message",Ue),he.addEventListener("error",be),he.addEventListener("close",be),he.addEventListener("open",()=>{he.addEventListener("error",d),he.addEventListener("close",h);const te=()=>{he.removeEventListener("error",be),he.removeEventListener("close",be),he.removeEventListener("message",Ue)};De.then(()=>{G([he,te])})})});return zp(F,Lk,"Timed out during websocket connection").then(([G,le])=>{if(le(),A.aborted)throw new Error("Aborted");if(C)throw C;return G}).catch(G=>{throw m($),G})},b=>({target:"@ok.connected",effect:Za({socket:b.data,backoffDelay:Xa})}),b=>{const A=b.reason;if(A instanceof mn)return{target:"@idle.failed",effect:[ni(2,A.message),o(A.message,-1)]};if(jg(A)){if(A.code===4109)return"@auth.busy";if(Jp(A.code))return{target:"@connecting.backoff",effect:[Qp,Xp(A)]};if(Gp(A.code))return{target:"@idle.failed",effect:[ni(2,A.reason),o(A.reason,A.code)]}}return{target:"@auth.backoff",effect:[Xs,Xp(A)]}});const y={target:"@ok.awaiting-pong",effect:b=>{b.socket?.send("ping")}},w=()=>(typeof document<"u"?document:void 0)?.visibilityState==="hidden"&&n.canZombie()?"@idle.zombie":y;if(c.addTimedTransition("@ok.connected",Ak,w).addTransitions("@ok.connected",{NAVIGATOR_OFFLINE:w,WINDOW_GOT_FOCUS:y}),c.addTransitions("@idle.zombie",{WINDOW_GOT_FOCUS:"@connecting.backoff"}),c.onEnter("@ok.*",b=>{b.patch({successCount:b.successCount+1});const A=setTimeout(r.unpause,0);return C=>{m(C.socket),C.patch({socket:null}),clearTimeout(A),r.pause()}}).addTransitions("@ok.awaiting-pong",{PONG:"@ok.connected"}).addTimedTransition("@ok.awaiting-pong",xk,{target:"@connecting.busy",effect:ni(1,"Received no pong from server, assume implicit connection loss.")}).addTransitions("@ok.*",{EXPLICIT_SOCKET_ERROR:(b,A)=>A.socket?.readyState===1?null:{target:"@connecting.backoff",effect:Xs},EXPLICIT_SOCKET_CLOSE:b=>Gp(b.event.code)?{target:"@idle.failed",effect:[Nk,o(b.event.reason,b.event.code)]}:Ik(b.event.code)?b.event.code===4109?"@auth.busy":{target:"@auth.backoff",effect:[Xs,Oc(b.event)]}:Jp(b.event.code)?{target:"@connecting.backoff",effect:[Qp,Oc(b.event)]}:{target:"@connecting.backoff",effect:[Xs,Oc(b.event)]}}),typeof document<"u"){const b=typeof document<"u"?document:void 0,A=typeof window<"u"?window:void 0,C=A??b;c.onEnter("*",$=>{function F(){c.send({type:"NAVIGATOR_OFFLINE"})}function G(){c.send({type:"NAVIGATOR_ONLINE"})}function le(){b?.visibilityState==="visible"&&c.send({type:"WINDOW_GOT_FOCUS"})}return A?.addEventListener("online",G),A?.addEventListener("offline",F),C?.addEventListener("visibilitychange",le),()=>{C?.removeEventListener("visibilitychange",le),A?.removeEventListener("online",G),A?.removeEventListener("offline",F),m($.socket)}})}const R=[],{statusDidChange:x,didConnect:E,didDisconnect:P,unsubscribe:D}=Uk(c);return R.push(D),e.enableDebugLogging&&R.push(Dk(c)),c.start(),{machine:c,cleanups:R,events:{statusDidChange:x,didConnect:E,didDisconnect:P,onMessage:r.observable,onConnectionError:i.observable}}}var $g=class{#e;#t;events;constructor(n,e=!1,r=!0){const{machine:i,events:o,cleanups:l}=jk(n,{waitForActorId:r,enableDebugLogging:e});this.#e=i,this.events=o,this.#t=l}getStatus(){try{return Ng(this.#e)}catch{return"initial"}}get authValue(){return this.#e.context.authValue}connect(){this.#e.send({type:"CONNECT"})}reconnect(){this.#e.send({type:"RECONNECT"})}disconnect(){this.#e.send({type:"DISCONNECT"})}destroy(){this.#e.stop();let n;for(;n=this.#t.pop();)n()}send(n){const e=this.#e.context?.socket;e===null?Lt("Cannot send: not connected yet",n):e.readyState!==1?Lt("Cannot send: WebSocket no longer open",n):e.send(n)}_privateSendMachineEvent(n){this.#e.send(n)}},ve=Symbol();function $k(n,e){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++)if(!Object.is(n[r],e[r]))return!1;return!0}function Mk(n,e){if(!Yn(n)||!Yn(e))return!1;const r=Object.keys(n);return r.length!==Object.keys(e).length?!1:r.every(i=>Object.prototype.hasOwnProperty.call(e,i)&&Object.is(n[i],e[i]))}function Pt(n,e){if(Object.is(n,e))return!0;const r=Array.isArray(n),i=Array.isArray(e);return r||i?!r||!i?!1:$k(n,e):Mk(n,e)}function ol(n,e){if(!Yn(n)||!Yn(e))return Pt(n,e);const r=Object.keys(n);return r.length!==Object.keys(e).length?!1:r.every(i=>Object.prototype.hasOwnProperty.call(e,i)&&Pt(n[i],e[i]))}var Fk=class{#e;#t;#n;#r;#i;#s;constructor(n,e,r){this.#r=n,this.#i=e,this.#s=r,this.#e=new Map,this.#t=new Ge(()=>new Set),this.#n=ds.with(r)}get(n){return this.#e.get(n)}getOrThrow(n){return this.get(n)??nn(`Item with id ${n} not found`)}get sorted(){return this.#n}getParentId(n){const e=this.getOrThrow(n);return this.#i(e)}getParent(n){const e=this.getParentId(n);return e?this.getOrThrow(e):null}getChildren(n){const e=this.#t.get(n);return e?Array.from(e).map(r=>this.#e.get(r)):[]}*walkUp(n,e){let r=n;do{const i=this.getOrThrow(r);(!e||e(i))&&(yield i),r=this.#i(i)}while(r!==null)}*walkLeft(n,e){const r=this.getOrThrow(n),i=ds.from(this.getSiblings(n),this.#s);for(const o of i.iterReversed())this.#s(r,o)||(!e||e(o))&&(yield o)}*walkRight(n,e){const r=this.getOrThrow(n),i=ds.from(this.getSiblings(n),this.#s);for(const o of i)this.#s(o,r)||(!e||e(o))&&(yield o)}*walkDown(n,e){const r=ds.from(this.getChildren(n),this.#s).rawArray;for(let i=r.length-1;i>=0;i--){const o=r[i];yield*this.walkDown(this.#r(o),e),(!e||e(o))&&(yield o)}}getSiblings(n){const e=this.getOrThrow(n),r=this.getParentId(n);return this.getChildren(r).filter(i=>i!==e)}[Symbol.iterator](){return this.#n[Symbol.iterator]()}upsert(n){const e=this.#r(n),r=this.#e.get(e);if(r){if(this.#i(r)!==this.#i(n))throw new Error("Cannot upsert parent ID changes that change the tree structure. Remove the entry first, and recreate it");this.#n.remove(r)}this.#e.set(e,n),this.#n.add(n);const i=this.#i(n);this.#t.getOrCreate(i).add(e)}remove(n){const e=this.#e.get(n);if(!e)return!1;if(this.#t.get(n))throw new Error(`Cannot remove item '${n}' while it still has children. Remove children first.`);const i=this.#i(e),o=this.#t.get(i);return o&&(o.delete(n),o.size===0&&this.#t.delete(i)),this.#n.remove(e),this.#t.delete(n),this.#e.delete(n),!0}clear(){return this.#e.size===0?!1:(this.#t.clear(),this.#e.clear(),this.#n.clear(),!0)}};function nd(n){return n.includes("room:write")}function Mg(n){return n.includes("comments:write")||n.includes("room:write")}function zk(n){return Yn(n)&&(n.k==="acc"||n.k==="id"||n.k==="sec-legacy")}function Zp(n){const e=n.split(".");if(e.length!==3)throw new Error("Authentication error: invalid JWT token");const r=Gn(YS(e[1]));if(!(r&&zk(r)))throw new Error("Authentication error: expected a valid token but did not get one. Hint: if you are using a callback, ensure the room is passed when creating the token. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientCallback");return{raw:n,parsed:r}}var em=Object.freeze({}),Bk=Array.from(new Set("null")),Vk=Array.from(new Set("true")),Hk=Array.from(new Set("false")),Wk=Array.from(new Set("nulltruefalse"));function Ac(n,e){const r=n[n.length-1];return e.includes(r)?n.slice(0,-1):n}var Kk=class{#e="";#t;#n=0;#r=!1;#i=-1;#s=-1;#o=[];constructor(n=""){this.append(n)}get source(){return this.#e}get json(){return this.#t===void 0&&(this.#t=this.#f()),this.#t}get#a(){return this.#i>=0}append(n){n&&(this.#e===""&&(n=n.trimStart()),this.#e+=n,this.#t=void 0)}#u(n){if(this.#a)return"";const e=n.charAt(n.length-1);if(e==="")return"";if(e==="-")return"0";if(!Wk.includes(e))return"";if(Bk.includes(e)){if(n.endsWith("nul"))return"l";if(n.endsWith("nu"))return"ll";if(n.endsWith("n"))return"ull"}if(Vk.includes(e)){if(n.endsWith("tru"))return"e";if(n.endsWith("tr"))return"ue";if(n.endsWith("t"))return"rue"}if(Hk.includes(e)){if(n.endsWith("fals"))return"e";if(n.endsWith("fal"))return"se";if(n.endsWith("fa"))return"lse";if(n.endsWith("f"))return"alse"}return""}#d(){const n=this.#e.slice(this.#n);for(let e=0;e<n.length;e++){const r=n[e],i=this.#n+e;this.#a?this.#r?this.#r=!1:r==="\\"?this.#r=!0:r==='"'&&(this.#s=this.#i,this.#i=-1):r==='"'?this.#i=i:r==="{"?this.#o.push("}"):r==="["?this.#o.push("]"):r==="}"&&this.#o.length>0&&this.#o[this.#o.length-1]==="}"?this.#o.pop():r==="]"&&this.#o.length>0&&this.#o[this.#o.length-1]==="]"&&this.#o.pop()}this.#n=this.#e.length}#f(){this.#d();let n=this.#e;if(n.charAt(0)!=="{")return em;if(n.endsWith("}")){const r=Gn(n);if(r)return r}this.#a&&(this.#r&&(n=n.slice(0,-1)),n+='"'),n=n.trimEnd(),n=Ac(n,",."),n=n+this.#u(n);const e=this.#o.reduceRight((r,i)=>r+i,"");{const r=Gn(n+e);if(r)return r}return this.#a?n=n.slice(0,this.#i):(n=Ac(n,":"),n.endsWith('"')&&(n=n.slice(0,this.#s))),n=Ac(n,","),n+=e,Gn(n)??em}};function tm(n,e,r,i){const o=ZS(n,l=>l.type===e.type&&r(l)===r(e));o>-1?n[o]=e:(rd(n[n.length-1],i),n.push(e))}function rd(n,e){n?.type==="reasoning"&&(n.endedAt??=e)}function qk(n,e){if(e===null)return;const r=new Date().toISOString(),i=n[n.length-1];switch(e.type){case"text-delta":i?.type==="text"?i.text+=e.textDelta:(rd(i,r),n.push({type:"text",text:e.textDelta}));break;case"reasoning-delta":i?.type==="reasoning"?i.text+=e.textDelta:(rd(i,r),n.push({type:"reasoning",text:e.textDelta,startedAt:r}));break;case"tool-stream":{const o=Gk(e.invocationId,e.name);n.push(o);break}case"tool-delta":{i?.type==="tool-invocation"&&i.stage==="receiving"&&i.__appendDelta?.(e.delta);break}case"tool-invocation":tm(n,e,o=>o.invocationId,r);break;case"retrieval":tm(n,e,o=>o.id,r);break;default:return kt(e,"Unhandled case")}}function Gk(n,e,r=""){const i=new Kk(r);return{type:"tool-invocation",stage:"receiving",invocationId:n,name:e,get partialArgsText(){return i.source},get partialArgs(){return i.json},__appendDelta(o){i.append(o)}}}var Jk=4e3,Qk=class{#e;#t;#n;constructor(){this.#e=new Set,this.#t=new Ge(()=>new Map),this.#n=void 0}registerLayer(n){const e=n;return this.#e.has(e)&&nn(`Layer '${e}' already exists, provide a unique layer id`),this.#e.add(e),e}deregisterLayer(n){this.#e.delete(n);let e=!1;for(const[r,i]of this.#t)i.delete(n)&&(e=!0),i.size===0&&this.#t.delete(r);e&&this.invalidate()}get(){return this.#n??=this.#r()}invalidate(){this.#n=void 0}#r(){return Array.from(this.#t.values()).flatMap(n=>Array.from(n.values()).slice(-1).filter(ak))}updateKnowledge(n,e,r){this.#e.has(n)||nn(`Unknown layer key: ${n}`),this.#t.getOrCreate(e).set(n,r),this.invalidate()}};function xc(){return new Date().toISOString()}var Pc=Symbol("*");function Yk(){const n=new Ge(c=>new Ge(d=>new zt(void 0))),e=new Ge(c=>{const[d,h]=Gn(c);return Ye.from(()=>(h!==void 0?n.getOrCreate(h).getOrCreate(d):void 0)?.get()??n.getOrCreate(Pc).getOrCreate(d).get())});function r(c,d){const h=JSON.stringify(d!==void 0?[c,d]:[c]);return e.getOrCreate(h)}function i(c,d,h){if(!d.execute&&!d.render)throw new Error("A tool definition must have an execute() function, a render() function, or both.");const g=h??Pc;return n.getOrCreate(g).getOrCreate(c).set(d),()=>o(g,c)}function o(c,d){const h=n.get(c);if(h===void 0)return;const g=h.get(d);g!==void 0&&g.set(void 0)}function l(c){const d=n.get(Pc),h=n.get(c);return Array.from([...d?.entries()??[],...h?.entries()??[]]).flatMap(([g,m])=>{const y=m.get();return y&&(y.enabled??!0)?[{name:g,description:y.description,parameters:y.parameters}]:[]})}return{getToolDescriptions:l,getTool:r,registerTool:i}}function Xk(n,e){const r=new Set,i=new Set,o=new Ge(C=>new vn(new Fk($=>$.id,$=>$.parentId,($,F)=>$.createdAt<F.createdAt))),l=new vn(new Map);function c(C,$,F,G){const le=`ms_${Rn()}`,he=xc();return m($==="user"?{id:le,chatId:C,role:$,parentId:F,createdAt:he,content:G,_optimistic:!0}:{id:le,chatId:C,role:$,parentId:F,createdAt:he,status:"generating",contentSoFar:[],copilotId:G,_optimistic:!0}),le}function d(C){nt(()=>{for(const $ of C)m($)})}function h(C,$){const F=o.get(C);if(!F)return;const G=F.get().get($);!G||G.deletedAt||(G.role==="assistant"&&G.status!=="completed"?m({...G,deletedAt:xc(),contentSoFar:[]}):m({...G,deletedAt:xc(),content:[]}))}function g(C){const $=o.get(C);$!==void 0&&$.mutate(F=>F.clear())}function m(C){nt(()=>{if(o.getOrCreate(C.chatId).mutate(F=>F.upsert(C)),C.role==="assistant"&&C.status==="generating"?l.mutate(F=>{F.set(C.id,structuredClone(C))}):l.mutate(F=>{F.delete(C.id)}),C.role==="assistant"&&C.status==="awaiting-tool"){if(r.has(C.id))for(const F of C.contentSoFar.filter(G=>G.type==="tool-invocation"&&G.stage==="executing")){if(!i.has(F.invocationId))i.add(F.invocationId);else continue;const G=n.getTool(F.name,C.chatId).get()?.execute;G&&(async()=>{const le=await G(F.args,{name:F.name,invocationId:F.invocationId});return await e(C.chatId,C.id,F.invocationId,le??{data:{}},{copilotId:C.copilotId})})().catch(le=>{Pr(`Error trying to respond to tool-call: ${String(le)} (in execute())`)})}}else C.role==="assistant"&&C.status==="generating"||r.delete(C.id)})}function y(C,$){l.mutate(F=>{const G=F.get(C);return G===void 0?!1:(qk(G.contentSoFar,$),F.set(C,G),!0)})}function*w(){for(const C of o.values())for(const $ of C.get())$.role==="assistant"&&$.status==="generating"&&!$._optimistic&&(yield $)}function R(){nt(()=>{l.mutate(C=>{let $=!1;for(const[F,G]of C)G._optimistic||(C.delete(F),$=!0);return $}),d(Array.from(w()).map(C=>({...C,status:"failed",errorReason:"Lost connection"})))})}function x(C){for(const $ of o.values()){const F=$.get().get(C);if(F)return F}}function E(C){const $=C.next();return $.done?void 0:$.value}function P(C,$){function F(be){if(!be.deletedAt)return!0;for(const De of C.walkDown(be.id,je=>!je.deletedAt))return!0;return!1}function G(be){const De=[];let je=null;for(const Ue of C.walkUp(be.id)){const te=E(C.walkLeft(Ue.id,F))?.id??null,Y=E(C.walkRight(Ue.id,F))?.id??null;if(!Ue.deletedAt||te||Y){const ke={...Ue,navigation:{parent:null,prev:te,next:Y}};je!==null&&(je.navigation.parent=ke.id),je=ke,De.push(ke)}}return De.reverse()}function le(){const be=C.sorted.findRight(De=>!De.deletedAt);return be?G(be):[]}if($===null)return le();const he=C.get($);if(!he)return le();for(const be of C.walkUp(he.id)){for(const De of C.walkDown(be.id,je=>!je.deletedAt))return G(De);if(!be.deletedAt)return G(be)}return le()}const D=new Ge(C=>new Ge($=>{const F=Ye.from(()=>{const G=o.getOrCreate(C).get();return P(G,$)},ol);return Ye.from(()=>{const G=l.get();return F.get().map(le=>{if(le.role!=="assistant"||le.status!=="generating")return le;const he=G.get(le.id);return he===void 0?le:{...le,contentSoFar:he.contentSoFar}})},Pt)}));function b(C,$){return D.getOrCreate(C).getOrCreate($||null)}function A(C){return o.getOrCreate(C).get().sorted.findRight(G=>G.role==="assistant"&&!G.deletedAt)?.copilotId}return{getMessageById:x,getChatMessagesForBranch:b,getLastUsedCopilotId:A,createOptimistically:c,upsert:m,upsertMany:d,remove:h,removeByChatId:g,addDelta:y,failAllPending:R,markMine(C){r.add(C)},*getAutoExecutingMessageIds(){for(const C of r){const $=x(C);$?.role==="assistant"&&$.status==="awaiting-tool"&&$.contentSoFar.some(G=>G.type==="tool-invocation"&&G.stage==="executing"?typeof n.getTool(G.name,$.chatId).get()?.execute=="function":!1)&&(yield $.id)}}}}function Zk(){const n=new rk;function e(c){nt(()=>{for(const d of c)n.upsert(d)})}function r(c){n.upsert(c)}function i(c){n.markDeleted(c)}function o(c){return n.getEvenIfDeleted(c)}function l(c){return n.signal.get().findMany(c)}return{getChatById:o,findMany:l,upsert:r,upsertMany:e,markDeleted:i}}function eE(n){const e=new $g(n.delegates,n.enableDebugLogging,!1),r=Zk(),i=Yk(),o=Xk(i,De),l={staticSessionInfoSig:new zt(null),dynamicSessionInfoSig:new zt(null),pendingCmds:new Map,chatsStore:r,messagesStore:o,toolsStore:i,knowledge:new Qk},c=25;let d=[],h=null;function g(){const te=d;d=[],h!==null&&(clearTimeout(h),h=null),nt(()=>{for(const{id:Y,delta:ke}of te)l.messagesStore.addDelta(Y,ke)})}function m(te,Y){d.push({id:te,delta:Y}),h===null&&(h=setTimeout(g,c))}let y;function w(te){const Y=e.authValue;if(Y!==null){const ke=Td(Y);if(ke!==y)if(y=ke,Y.type==="secret"){const fe=Y.token.parsed;l.staticSessionInfoSig.set({userId:fe.k==="sec-legacy"?fe.id:fe.uid,userInfo:fe.k==="sec-legacy"?fe.info:fe.ui})}else l.staticSessionInfoSig.set({userId:void 0,userInfo:void 0})}}let R;function x(te){te==="reconnecting"?R=setTimeout(()=>{},n.lostConnectionTimeout):clearTimeout(R)}function E(){}function P(){g()}function D(te){if(typeof te.data!="string")return;const Y=Gn(te.data);if(!Y)return;const ke="cmdId"in Y?Y.cmdId:Y.event==="cmd-failed"?Y.failedCmdId:void 0,fe=l.pendingCmds.get(ke);if(ke&&!fe){Lt("Ignoring unexpected command response. Already timed out, or not for us?",Y);return}if("event"in Y)if(Y.event==="delta"){const{id:K,delta:re}=Y;m(K,re)}else nt(()=>{switch(g(),Y.event){case"cmd-failed":fe?.reject(new Error(Y.error));break;case"settle":{l.messagesStore.upsert(Y.message);break}case"warning":Lt(Y.message);break;case"error":Pr(Y.error);break;case"rebooted":l.messagesStore.failAllPending();break;case"sync":for(const K of Y["-messages"]??[])l.messagesStore.remove(K.chatId,K.id);for(const K of Y["-chats"]??[])l.chatsStore.markDeleted(K),l.messagesStore.removeByChatId(K);for(const K of Y.clear??[])l.messagesStore.removeByChatId(K);Y.chats&&l.chatsStore.upsertMany(Y.chats),Y.messages&&l.messagesStore.upsertMany(Y.messages);break;default:return kt(Y,"Unhandled case")}});else switch(Y.cmd){case"get-chats":l.chatsStore.upsertMany(Y.chats);break;case"get-or-create-chat":l.chatsStore.upsert(Y.chat);break;case"delete-chat":l.chatsStore.markDeleted(Y.chatId),l.messagesStore.removeByChatId(Y.chatId);break;case"get-message-tree":l.chatsStore.upsert(Y.chat),l.messagesStore.upsertMany(Y.messages);break;case"delete-message":l.messagesStore.remove(Y.chatId,Y.messageId);break;case"clear-chat":l.messagesStore.removeByChatId(Y.chatId);break;case"ask-in-chat":Y.sourceMessage&&l.messagesStore.upsert(Y.sourceMessage),l.messagesStore.upsert(Y.targetMessage);break;case"abort-ai":break;case"set-tool-result":Y.ok&&l.messagesStore.upsert(Y.message);break;default:return kt(Y,"Unhandled case")}fe?.resolve(Y)}e.events.onMessage.subscribe(D),e.events.statusDidChange.subscribe(w),e.events.statusDidChange.subscribe(x),e.events.didConnect.subscribe(E),e.events.didDisconnect.subscribe(P),e.events.onConnectionError.subscribe(({message:te,code:Y})=>{});function b(){e.getStatus()==="initial"&&e.connect()}async function A(te){b(),e.getStatus()!=="connected"&&await e.events.didConnect.waitUntil();const{promise:Y,resolve:ke,reject:fe}=bd(),K=AbortSignal.timeout(Jk);K.addEventListener("abort",()=>fe(K.reason),{once:!0});const re=Rn(7);return l.pendingCmds.set(re,{resolve:ke,reject:fe}),C({...te,cmdId:re}),Y.finally(()=>{l.pendingCmds.delete(re)}).catch(Z=>{throw Pr(Z.message),Z})}function C(te){e.send(JSON.stringify({...te}))}function $(te={}){return A({cmd:"get-chats",cursor:te.cursor,query:te.query})}function F(te,Y){return A({cmd:"get-or-create-chat",id:te,options:Y})}function G(te){return A({cmd:"get-message-tree",chatId:te})}function le(te){return l.knowledge.registerLayer(te)}function he(te){l.knowledge.deregisterLayer(te)}function be(te,Y,ke=Rn()){l.knowledge.updateKnowledge(te,ke,Y)}async function De(te,Y,ke,fe,K){const re=l.knowledge.get(),Z=l.toolsStore.getToolDescriptions(te),L=await A({cmd:"set-tool-result",chatId:te,messageId:Y,invocationId:ke,result:fe,generationOptions:{copilotId:K?.copilotId,stream:K?.stream,timeout:K?.timeout,knowledge:re.length>0?re:void 0,tools:Z.length>0?Z:void 0}});L.ok&&o.markMine(L.message.id)}function je(){for(const te of l.messagesStore.getAutoExecutingMessageIds())A({cmd:"abort-ai",messageId:te}).catch(()=>{})}return(typeof window<"u"?window:void 0)?.addEventListener("beforeunload",je,{once:!0}),Object.defineProperty({[ve]:{context:l},connectInitially:b,disconnect:()=>e.disconnect(),getChats:$,getOrCreateChat:F,deleteChat:te=>A({cmd:"delete-chat",chatId:te}),getMessageTree:G,deleteMessage:(te,Y)=>A({cmd:"delete-message",chatId:te,messageId:Y}),clearChat:te=>A({cmd:"clear-chat",chatId:te}),askUserMessageInChat:async(te,Y,ke,fe)=>{const K=l.knowledge.get(),re=fe?.knowledge||[],Z=[...K,...re],L=l.toolsStore.getToolDescriptions(te);return o.markMine(ke),await A({cmd:"ask-in-chat",chatId:te,sourceMessage:Y,targetMessageId:ke,generationOptions:{copilotId:fe?.copilotId,stream:fe?.stream,timeout:fe?.timeout,knowledge:Z.length>0?Z:void 0,tools:L.length>0?L:void 0}})},abort:te=>A({cmd:"abort-ai",messageId:te}),setToolResult:De,getStatus:()=>e.getStatus(),signals:{getChatMessagesForBranch:l.messagesStore.getChatMessagesForBranch,getTool:l.toolsStore.getTool},getChatById:l.chatsStore.getChatById,queryChats:l.chatsStore.findMany,getLastUsedCopilotId:l.messagesStore.getLastUsedCopilotId,registerKnowledgeLayer:le,deregisterKnowledgeLayer:he,updateKnowledge:be,registerTool:l.toolsStore.registerTool},ve,{enumerable:!1})}function tE(n,e){return r=>{const i=e??(typeof WebSocket>"u"?void 0:WebSocket);if(i===void 0)throw new mn("To use Liveblocks client in a non-DOM environment, you need to provide a WebSocket polyfill.");const o=new URL(n);if(o.protocol=o.protocol==="http:"?"ws":"wss",o.pathname="/ai/v6",r.type==="secret")o.searchParams.set("tok",r.token.raw);else{if(r.type==="public")throw new Error("Public key not supported with AI Copilots");return kt(r,"Unhandled case")}return o.searchParams.set("version",kl),new i(o.toString())}}function nE(n,e){const r=rE(n),i=new Set,o=[],l=[],c=new Map;function d(){i.clear(),o.length=0,l.length=0,c.clear()}function h(w,R){return w==="comments:read"?R.includes("comments:read")||R.includes("comments:write")||R.includes("room:read")||R.includes("room:write"):w==="room:read"?R.includes("room:read")||R.includes("room:write"):!1}function g(w){const R=Math.ceil(Date.now()/1e3);for(let x=o.length-1;x>=0;x--){const E=o[x];if(l[x]<=R){o.splice(x,1),l.splice(x,1);continue}if(E.parsed.k==="id")return E;if(E.parsed.k==="acc"){if(!w.roomId&&Object.entries(E.parsed.perms).length===0)return E;for(const[D,b]of Object.entries(E.parsed.perms))if(w.roomId){if(D.includes("*")&&w.roomId.startsWith(D.replace("*",""))||w.roomId===D&&h(w.requestedScope,b))return E}else if(D.includes("*")&&h(w.requestedScope,b))return E}}}async function m(w){const R=n.polyfills?.fetch??(typeof window>"u"?void 0:window.fetch);if(r.type==="private"){if(R===void 0)throw new mn("To use Liveblocks client in a non-DOM environment with a url as auth endpoint, you need to provide a fetch polyfill.");const x=await sE(R,r.url,{room:w.roomId}),E=Zp(x.token);if(i.has(E.raw))throw new mn("The same Liveblocks auth token was issued from the backend before. Caching Liveblocks tokens is not supported.");return e?.(E.parsed),E}if(r.type==="custom"){const x=await r.callback(w.roomId);if(x&&typeof x=="object"){if(typeof x.token=="string"){const E=Zp(x.token);return e?.(E.parsed),E}else if(typeof x.error=="string"){const E=`Authentication failed: ${"reason"in x&&typeof x.reason=="string"?x.reason:"Forbidden"}`;throw x.error==="forbidden"?new mn(E):new Error(E)}}throw new Error('Your authentication callback function should return a token, but it did not. Hint: the return value should look like: { token: "..." }')}throw new Error("Unexpected authentication type. Must be private or custom.")}async function y(w){if(r.type==="public")return{type:"public",publicApiKey:r.publicApiKey};const R=g(w);if(R!==void 0)return{type:"secret",token:R};let x;w.roomId?(x=c.get(w.roomId),x===void 0&&(x=m(w),c.set(w.roomId,x))):(x=c.get("liveblocks-user-token"),x===void 0&&(x=m(w),c.set("liveblocks-user-token",x)));try{const E=await x,D=Math.floor(Date.now()/1e3)+(E.parsed.exp-E.parsed.iat)-30;return i.add(E.raw),E.parsed.k!=="sec-legacy"&&(o.push(E),l.push(D)),{type:"secret",token:E}}finally{w.roomId?c.delete(w.roomId):c.delete("liveblocks-user-token")}}return{reset:d,getAuthValue:y}}function rE(n){const{publicApiKey:e,authEndpoint:r}=n;if(r!==void 0&&e!==void 0)throw new Error("You cannot simultaneously use `publicApiKey` and `authEndpoint` options. Please pick one and leave the other option unspecified. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClient");if(typeof e=="string"){if(e.startsWith("sk_"))throw new Error("Invalid `publicApiKey` option. The value you passed is a secret key, which should not be used from the client. Please only ever pass a public key here. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientPublicKey");if(!e.startsWith("pk_"))throw new Error("Invalid key. Please use the public key format: pk_<public key>. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientPublicKey");return{type:"public",publicApiKey:e}}if(typeof r=="string")return{type:"private",url:r};if(typeof r=="function")return{type:"custom",callback:r};throw r!==void 0?new Error("The `authEndpoint` option must be a string or a function. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientAuthEndpoint"):new Error("Invalid Liveblocks client options. Please provide either a `publicApiKey` or `authEndpoint` option. They cannot both be empty. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClient")}async function sE(n,e,r){const i=await n(e,{method:"POST",headers:{"Content-Type":"application/json"},body:Jn(r)});if(!i.ok){const c=`${(await i.text()).trim()||"reason not provided in auth response"} (${i.status} returned by POST ${e})`;throw i.status===401||i.status===403?new mn(`Unauthorized: ${c}`):new Error(`Failed to authenticate: ${c}`)}let o;try{o=await i.json()}catch(c){throw new Error(`Expected a JSON response when doing a POST request on "${e}". ${String(c)}`)}if(!Yn(o)||typeof o.token!="string")throw new Error(`Expected a JSON response of the form \`{ token: "..." }\` when doing a POST request on "${e}", but got ${Jn(o)}`);const{token:l}=o;return{token:l}}var iE="https://api.liveblocks.io",oE=Fe();oE.observable;function Lc(n,e,r=e){typeof n=="function"&&n()}var fo=Symbol("notification-settings-plain");function hl(n){const e=["email","slack","teams","webPush"],r={[fo]:{value:n,enumerable:!1}};for(const i of e)r[i]={enumerable:!0,get(){const o=this[fo][i];return typeof o>"u"?(Pr(`In order to use the '${i}' channel, please set up your project first. For more information: https://liveblocks.io/docs/errors/enable-a-notification-channel`),null):o}};return QS(null,r)}function aE(n,e){const r=hl({...n[fo]});for(const i of JS(e)){const o=e[i];if(o!==void 0){const l=Object.fromEntries(Sd(o).filter(([,c])=>c!==void 0));r[fo][i]={...r[fo][i],...l}}}return r}var gn=32,Lr=126,lE=Lr-gn+1,Id=Rd(0),El=Rd(1),uE=Id+Rd(-1);function Rd(n){const e=gn+(n<0?lE+n:n);if(e<gn||e>Lr)throw new Error(`Invalid n value: ${n}`);return String.fromCharCode(e)}function Bn(n,e){return n!==void 0&&e!==void 0?fE(n,e):n!==void 0?dE(n):e!==void 0?cE(e):El}function cE(n){const e=n.length-1;for(let r=0;r<=e;r++){const i=n.charCodeAt(r);if(!(i<=gn))return r===e?i===gn+1?n.substring(0,r)+uE:n.substring(0,r)+String.fromCharCode(i-1):n.substring(0,r+1)}return El}function dE(n){for(let e=0;e<=n.length-1;e++){const r=n.charCodeAt(e);if(!(r>=Lr))return n.substring(0,e)+String.fromCharCode(r+1)}return n+El}function fE(n,e){if(n<e)return sd(n,e);if(n>e)return sd(e,n);throw new Error("Cannot compute value between two equal positions")}function sd(n,e){let r=0;const i=n.length,o=e.length;for(;;){const l=r<i?n.charCodeAt(r):gn,c=r<o?e.charCodeAt(r):Lr;if(l===c){r++;continue}if(c-l===1){const d=r+1;let h=n.substring(0,d);h.length<d&&(h+=Id.repeat(d-h.length));const g=n.substring(d);return h+sd(g,"")}else return hE(n,r)+String.fromCharCode(c+l>>1)}}function hE(n,e){return e<n.length?n.substring(0,e):n+Id.repeat(e-n.length)}var pE=gn+1;function mE(n){if(n==="")return!1;const e=n.length-1,r=n.charCodeAt(e);if(r<pE||r>Lr)return!1;for(let i=0;i<e;i++){const o=n.charCodeAt(i);if(o<gn||o>Lr)return!1}return!0}function gE(n){const e=[];for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);e.push(i<gn?gn:i>Lr?Lr:i)}for(;e.length>0&&e[e.length-1]===gn;)e.length--;return e.length>0?String.fromCharCode(...e):El}function vo(n){return mE(n)?n:gE(n)}function vE(n){return n.type===5&&n.id==="ACK"}function yE(n,e){const{getCurrentConnectionId:r,onDispatch:i,isStorageWritable:o=()=>!0}=e;let l=0,c=0;const d=new Map;return{roomId:n,nodes:d,getNode:h=>d.get(h),addNode:(h,g)=>void d.set(h,g),deleteNode:h=>void d.delete(h),generateId:()=>`${r()}:${l++}`,generateOpId:()=>`${r()}:${c++}`,dispatch(h,g,m){i?.(h,g,m)},assertStorageIsWritable:()=>{if(!o())throw new Error("Cannot write to storage with a read only user, please ensure the user has write permissions")}}}function nm(n,e,r=vo(e)){return Object.freeze({type:"HasParent",node:n,key:e,pos:r})}var rm=Object.freeze({type:"NoParent"});function wE(n,e=vo(n)){return Object.freeze({type:"Orphaned",oldKey:n,oldPos:e})}var bl=class{#e;#t;#n=rm;_getParentKeyOrThrow(){switch(this.parent.type){case"HasParent":return this.parent.key;case"NoParent":throw new Error("Parent key is missing");case"Orphaned":return this.parent.oldKey;default:return kt(this.parent,"Unknown state")}}get _parentPos(){switch(this.parent.type){case"HasParent":return this.parent.pos;case"NoParent":throw new Error("Parent key is missing");case"Orphaned":return this.parent.oldPos;default:return kt(this.parent,"Unknown state")}}get _pool(){return this.#e}get roomId(){return this.#e?this.#e.roomId:null}get _id(){return this.#t}get parent(){return this.#n}get _parentKey(){switch(this.parent.type){case"HasParent":return this.parent.key;case"NoParent":return null;case"Orphaned":return this.parent.oldKey;default:return kt(this.parent,"Unknown state")}}_apply(n,e){switch(n.type){case 5:return this.parent.type==="HasParent"?this.parent.node._detachChild(this):{modified:!1}}return{modified:!1}}_setParentLink(n,e){switch(this.parent.type){case"HasParent":if(this.parent.node!==n)throw new Error("Cannot set parent: node already has a parent");this.#n=nm(n,e);return;case"Orphaned":case"NoParent":{this.#n=nm(n,e);return}default:return kt(this.parent,"Unknown state")}}_attach(n,e){if(this.#t||this.#e)throw new Error("Cannot attach node: already attached");e.addNode(n,this),this.#t=n,this.#e=e}_detach(){switch(this.#e&&this.#t&&this.#e.deleteNode(this.#t),this.parent.type){case"HasParent":{this.#n=wE(this.parent.key,this.parent.pos);break}case"NoParent":{this.#n=rm;break}case"Orphaned":break;default:kt(this.parent,"Unknown state")}this.#e=void 0}#r;#i;#s;invalidate(){(this.#r!==void 0||this.#s!==void 0)&&(this.#r=void 0,this.#s=void 0,this.parent.type==="HasParent"&&this.parent.node.invalidate())}toTreeNode(n){return(this.#s===void 0||this.#i!==n)&&(this.#i=n,this.#s=this._toTreeNode(n)),this.#s}toImmutable(){return this.#r===void 0&&(this.#r=this._toImmutable()),this.#r}};function _E(n){return n.type===0&&!SE(n)}function SE(n){return n.parentId!==void 0&&n.parentKey!==void 0}var Dr=class Fg extends bl{#e;constructor(e){super(),this.#e=e}get data(){return this.#e}static _deserialize([e,r],i,o){const l=new Fg(r.data);return l._attach(e,o),l}_toOps(e,r,i){if(this._id===void 0)throw new Error("Cannot serialize register if parentId or parentKey is undefined");return[{type:8,opId:i?.generateOpId(),id:this._id,parentId:e,parentKey:r,data:this.data}]}_serialize(){if(this.parent.type!=="HasParent")throw new Error("Cannot serialize LiveRegister if parent is missing");return{type:3,parentId:we(this.parent.node._id,"Parent node expected to have ID"),parentKey:this.parent.key,data:this.data}}_attachChild(e){throw new Error("Method not implemented.")}_detachChild(e){throw new Error("Method not implemented.")}_apply(e,r){return super._apply(e,r)}_toTreeNode(e){return{type:"Json",id:this._id??Rn(),key:e,payload:this.#e}}_toImmutable(){return this.#e}clone(){return mo(this.data)}};function kE(n,e){const r=n._parentPos,i=e._parentPos;return r===i?0:r<i?-1:1}var fi=class id extends bl{#e;#t;#n;constructor(e){super(),this.#e=[],this.#t=new WeakSet,this.#n=new Map;let r;for(const i of e){const o=Bn(r),l=ai(i);l._setParentLink(this,o),this.#e.push(l),r=o}}static _deserialize([e],r,i){const o=new id([]);o._attach(e,i);const l=r.get(e);if(l===void 0)return o;for(const[c,d]of l){const h=Vg([c,d],r,i);h._setParentLink(o,d.parentKey),o._insertAndSort(h)}return o}_toOps(e,r,i){if(this._id===void 0)throw new Error("Cannot serialize item is not attached");const o=[],l={id:this._id,opId:i?.generateOpId(),type:2,parentId:e,parentKey:r};o.push(l);for(const c of this.#e){const d=c._getParentKeyOrThrow(),h=tl(c._toOps(this._id,d,i),void 0),g=h[0].opId;g!==void 0&&this.#n.set(d,g),o.push(...h)}return o}_insertAndSort(e){this.#e.push(e),this._sortItems()}_sortItems(){this.#e.sort(kE),this.invalidate()}_indexOfPosition(e){return this.#e.findIndex(r=>r._getParentKeyOrThrow()===e)}_attach(e,r){super._attach(e,r);for(const i of this.#e)i._attach(r.generateId(),r)}_detach(){super._detach();for(const e of this.#e)e._detach()}#r(e){if(this._pool===void 0)throw new Error("Can't attach child if managed pool is not present");const{id:r,parentKey:i}=e,o=io(e);o._attach(r,this._pool),o._setParentLink(this,i);const l=e.deletedId,c=this._indexOfPosition(i);if(c!==-1){const d=this.#e[c];if(d._id===l)return d._detach(),this.#e[c]=o,{modified:Ve(this,[Zs(c,o)]),reverse:[]};{this.#t.add(d),this.#e[c]=o;const h=[Zs(c,o)],g=this.#s(e.deletedId);return g&&h.push(g),{modified:Ve(this,h),reverse:[]}}}else{const d=[],h=this.#s(e.deletedId);return h&&d.push(h),this._insertAndSort(o),d.push(Cn(this._indexOfPosition(i),o)),{reverse:[],modified:Ve(this,d)}}}#i(e){if(this._pool===void 0)throw new Error("Can't attach child if managed pool is not present");const r=[],i=this.#s(e.deletedId);i&&r.push(i);const o=this.#n.get(e.parentKey);if(o!==void 0){if(o!==e.opId)return r.length===0?{modified:!1}:{modified:Ve(this,r),reverse:[]};this.#n.delete(e.parentKey)}const l=this._indexOfPosition(e.parentKey),c=this.#e.find(d=>d._id===e.id);if(c!==void 0){if(c._parentKey===e.parentKey)return{modified:r.length>0?Ve(this,r):!1,reverse:[]};if(l!==-1){this.#t.add(this.#e[l]);const[g]=this.#e.splice(l,1);r.push(el(l,g))}const d=this.#e.indexOf(c);c._setParentLink(this,e.parentKey),this._sortItems();const h=this.#e.indexOf(c);return h!==d&&r.push(os(d,h,c)),{modified:r.length>0?Ve(this,r):!1,reverse:[]}}else{const d=this._pool.getNode(e.id);if(d&&this.#t.has(d)){d._setParentLink(this,e.parentKey),this.#t.delete(d),this._insertAndSort(d);const h=this.#e.indexOf(d);return{modified:Ve(this,[l===-1?Cn(h,d):Zs(h,d),...r]),reverse:[]}}else{l!==-1&&this.#e.splice(l,1);const{newItem:h,newIndex:g}=this.#c(e,e.parentKey);return{modified:Ve(this,[l===-1?Cn(g,h):Zs(g,h),...r]),reverse:[]}}}}#s(e){if(e===void 0||this._pool===void 0)return null;const r=this._pool.getNode(e);if(r===void 0)return null;const i=this._detachChild(r);return i.modified===!1?null:i.modified.updates[0]}#o(e){if(this._pool===void 0)throw new Error("Can't attach child if managed pool is not present");const r=vo(e.parentKey),i=this._indexOfPosition(r);i!==-1&&this.#l(i,r);const{newItem:o,newIndex:l}=this.#c(e,r);return{modified:Ve(this,[Cn(l,o)]),reverse:[]}}#a(e){const r=this.#e.find(l=>l._id===e.id),i=vo(e.parentKey),o=this._indexOfPosition(i);if(r){if(r._parentKey===i)return{modified:!1};{const l=this.#e.indexOf(r);o!==-1&&this.#l(o,i),r._setParentLink(this,i),this._sortItems();const c=this._indexOfPosition(i);return c===l?{modified:!1}:{modified:Ve(this,[os(l,c,r)]),reverse:[]}}}else{const l=we(this._pool).getNode(e.id);if(l&&this.#t.has(l)){l._setParentLink(this,i),this.#t.delete(l),this._insertAndSort(l);const c=this._indexOfPosition(i);return{modified:Ve(this,[Cn(c,l)]),reverse:[]}}else{o!==-1&&this.#l(o,i);const{newItem:c,newIndex:d}=this.#c(e,i);return{modified:Ve(this,[Cn(d,c)]),reverse:[]}}}}#u(e){const{id:r,parentKey:i}=e,o=io(e);if(this._pool?.getNode(r)!==void 0)return{modified:!1};o._attach(r,we(this._pool)),o._setParentLink(this,i);const l=this._indexOfPosition(i);let c=i;if(l!==-1){const h=this.#e[l]?._parentPos,g=this.#e[l+1]?._parentPos;c=Bn(h,g),o._setParentLink(this,c)}this._insertAndSort(o);const d=this._indexOfPosition(c);return{modified:Ve(this,[Cn(d,o)]),reverse:[{type:5,id:r}]}}#d(e){const{id:r,parentKey:i}=e,o=io(e);if(this._pool?.getNode(r)!==void 0)return{modified:!1};this.#n.set(i,we(e.opId));const l=this._indexOfPosition(i);o._attach(r,we(this._pool)),o._setParentLink(this,i);const c=i;if(l!==-1){const d=this.#e[l];d._detach(),this.#e[l]=o;const h=tl(d._toOps(we(this._id),i,this._pool),e.id),g=[Zs(l,o)],m=this.#s(e.deletedId);return m&&g.push(m),{modified:Ve(this,g),reverse:h}}else{this._insertAndSort(o),this.#s(e.deletedId);const d=this._indexOfPosition(c);return{reverse:[{type:5,id:r}],modified:Ve(this,[Cn(d,o)])}}}_attachChild(e,r){if(this._pool===void 0)throw new Error("Can't attach child if managed pool is not present");let i;return e.intent==="set"?r===1?i=this.#r(e):r===2?i=this.#i(e):i=this.#d(e):r===1?i=this.#o(e):r===2?i=this.#a(e):i=this.#u(e),i.modified!==!1&&this.invalidate(),i}_detachChild(e){if(e){const r=we(e._parentKey),i=e._toOps(we(this._id),r,this._pool),o=this.#e.indexOf(e);if(o===-1)return{modified:!1};const[l]=this.#e.splice(o,1);return this.invalidate(),e._detach(),{modified:Ve(this,[el(o,l)]),reverse:i}}return{modified:!1}}#f(e,r){if(this.#t.has(r)){this.#t.delete(r),r._setParentLink(this,e),this._insertAndSort(r);const l=this.#e.indexOf(r);return{modified:Ve(this,[Cn(l,r)]),reverse:[]}}const i=r._parentKey;if(e===i)return{modified:!1};const o=this._indexOfPosition(e);if(o===-1){const l=this.#e.indexOf(r);r._setParentLink(this,e),this._sortItems();const c=this.#e.indexOf(r);return c===l?{modified:!1}:{modified:Ve(this,[os(l,c,r)]),reverse:[]}}else{this.#e[o]._setParentLink(this,Bn(e,this.#e[o+1]?._parentPos));const l=this.#e.indexOf(r);r._setParentLink(this,e),this._sortItems();const c=this.#e.indexOf(r);return c===l?{modified:!1}:{modified:Ve(this,[os(l,c,r)]),reverse:[]}}}#p(e,r){const i=we(r._parentKey);if(this.#t.has(r)){const o=this._indexOfPosition(e);return this.#t.delete(r),o!==-1&&this.#e[o]._setParentLink(this,Bn(e,this.#e[o+1]?._parentPos)),r._setParentLink(this,e),this._insertAndSort(r),{modified:!1}}else{if(e===i)return{modified:!1};const o=this.#e.indexOf(r),l=this._indexOfPosition(e);l!==-1&&this.#e[l]._setParentLink(this,Bn(e,this.#e[l+1]?._parentPos)),r._setParentLink(this,e),this._sortItems();const c=this.#e.indexOf(r);return o===c?{modified:!1}:{modified:Ve(this,[os(o,c,r)]),reverse:[]}}}#h(e,r){const i=we(r._parentKey),o=this.#e.indexOf(r),l=this._indexOfPosition(e);let c=e;l!==-1&&(c=Bn(e,this.#e[l+1]?._parentPos)),r._setParentLink(this,c),this._sortItems();const d=this.#e.indexOf(r);return o===d?{modified:!1}:{modified:Ve(this,[os(o,d,r)]),reverse:[{type:1,id:we(r._id),parentKey:i}]}}_setChildKey(e,r,i){return i===1?this.#f(e,r):i===2?this.#p(e,r):this.#h(e,r)}_apply(e,r){return super._apply(e,r)}_serialize(){if(this.parent.type!=="HasParent")throw new Error("Cannot serialize LiveList if parent is missing");return{type:1,parentId:we(this.parent.node._id,"Parent node expected to have ID"),parentKey:this.parent.key}}get length(){return this.#e.length}push(e){return this._pool?.assertStorageIsWritable(),this.insert(e,this.length)}insert(e,r){if(this._pool?.assertStorageIsWritable(),r<0||r>this.#e.length)throw new Error(`Cannot insert list item at index "${r}". index should be between 0 and ${this.#e.length}`);const i=this.#e[r-1]?this.#e[r-1]._parentPos:void 0,o=this.#e[r]?this.#e[r]._parentPos:void 0,l=Bn(i,o),c=ai(e);if(c._setParentLink(this,l),this._insertAndSort(c),this._pool&&this._id){const d=this._pool.generateId();c._attach(d,this._pool),this._pool.dispatch(c._toOps(this._id,l,this._pool),[{type:5,id:d}],new Map([[this._id,Ve(this,[Cn(r,c)])]]))}}move(e,r){if(this._pool?.assertStorageIsWritable(),r<0)throw new Error("targetIndex cannot be less than 0");if(r>=this.#e.length)throw new Error("targetIndex cannot be greater or equal than the list length");if(e<0)throw new Error("index cannot be less than 0");if(e>=this.#e.length)throw new Error("index cannot be greater or equal than the list length");let i=null,o=null;e<r?(o=r===this.#e.length-1?void 0:this.#e[r+1]._parentPos,i=this.#e[r]._parentPos):(o=this.#e[r]._parentPos,i=r===0?void 0:this.#e[r-1]._parentPos);const l=Bn(i,o),c=this.#e[e],d=c._getParentKeyOrThrow();if(c._setParentLink(this,l),this._sortItems(),this._pool&&this._id){const h=new Map([[this._id,Ve(this,[os(e,r,c)])]]);this._pool.dispatch([{type:1,id:we(c._id),opId:this._pool.generateOpId(),parentKey:l}],[{type:1,id:we(c._id),parentKey:d}],h)}}delete(e){if(this._pool?.assertStorageIsWritable(),e<0||e>=this.#e.length)throw new Error(`Cannot delete list item at index "${e}". index should be between 0 and ${this.#e.length-1}`);const r=this.#e[e];r._detach();const[i]=this.#e.splice(e,1);if(this.invalidate(),this._pool){const o=r._id;if(o){const l=new Map;l.set(we(this._id),Ve(this,[el(e,i)])),this._pool.dispatch([{id:o,opId:this._pool.generateOpId(),type:5}],r._toOps(we(this._id),r._getParentKeyOrThrow()),l)}}}clear(){if(this._pool?.assertStorageIsWritable(),this._pool){const e=[],r=[],i=[];for(const l of this.#e){l._detach();const c=l._id;c&&(e.push({type:5,id:c,opId:this._pool.generateOpId()}),r.push(...l._toOps(we(this._id),l._getParentKeyOrThrow())),i.push(el(0,l)))}this.#e=[],this.invalidate();const o=new Map;o.set(we(this._id),Ve(this,i)),this._pool.dispatch(e,r,o)}else{for(const e of this.#e)e._detach();this.#e=[],this.invalidate()}}set(e,r){if(this._pool?.assertStorageIsWritable(),e<0||e>=this.#e.length)throw new Error(`Cannot set list item at index "${e}". index should be between 0 and ${this.#e.length-1}`);const i=this.#e[e],o=i._getParentKeyOrThrow(),l=i._id;i._detach();const c=ai(r);if(c._setParentLink(this,o),this.#e[e]=c,this.invalidate(),this._pool&&this._id){const d=this._pool.generateId();c._attach(d,this._pool);const h=new Map;h.set(this._id,Ve(this,[Zs(e,c)]));const g=tl(c._toOps(this._id,o,this._pool),l);this.#n.set(o,we(g[0].opId));const m=tl(i._toOps(this._id,o,void 0),d);this._pool.dispatch(g,m,h)}}toArray(){return this.#e.map(e=>fs(e))}every(e){return this.toArray().every(e)}filter(e){return this.toArray().filter(e)}find(e){return this.toArray().find(e)}findIndex(e){return this.toArray().findIndex(e)}forEach(e){return this.toArray().forEach(e)}get(e){if(!(e<0||e>=this.#e.length))return fs(this.#e[e])}indexOf(e,r){return this.toArray().indexOf(e,r)}lastIndexOf(e,r){return this.toArray().lastIndexOf(e,r)}map(e){return this.#e.map((r,i)=>e(fs(r),i))}some(e){return this.toArray().some(e)}[Symbol.iterator](){return new EE(this.#e)}#c(e,r){const i=io(e);i._attach(e.id,we(this._pool)),i._setParentLink(this,r),this._insertAndSort(i);const o=this._indexOfPosition(r);return{newItem:i,newIndex:o}}#l(e,r){const i=Bn(r,this.#e.length>e+1?this.#e[e+1]?._parentPos:void 0);this.#e[e]._setParentLink(this,i)}_toTreeNode(e){return{type:"LiveList",id:this._id??Rn(),key:e,payload:this.#e.map((r,i)=>r.toTreeNode(i.toString()))}}toImmutable(){return super.toImmutable()}_toImmutable(){return this.#e.map(r=>r.toImmutable())}clone(){return new id(this.#e.map(e=>e.clone()))}},EE=class{#e;constructor(n){this.#e=n[Symbol.iterator]()}[Symbol.iterator](){return this}next(){const n=this.#e.next();return n.done?{done:!0,value:void 0}:{value:fs(n.value)}}};function Ve(n,e){return{node:n,type:"LiveList",updates:e}}function Zs(n,e){return{index:n,type:"set",item:e instanceof Dr?e.data:e}}function el(n,e){return{type:"delete",index:n,deletedItem:e instanceof Dr?e.data:e}}function Cn(n,e){return{index:n,type:"insert",item:e instanceof Dr?e.data:e}}function os(n,e,r){return{type:"move",index:e,item:r instanceof Dr?r.data:r,previousIndex:n}}function tl(n,e){return n.map((r,i)=>i===0?{...r,intent:"set",deletedId:e}:r)}var hi=class od extends bl{#e;#t;constructor(e){if(super(),this.#t=new Map,e){const r=[];for(const[i,o]of e){const l=ai(o);l._setParentLink(this,i),r.push([i,l])}this.#e=new Map(r)}else this.#e=new Map}_toOps(e,r,i){if(this._id===void 0)throw new Error("Cannot serialize item is not attached");const o=[],l={id:this._id,opId:i?.generateOpId(),type:7,parentId:e,parentKey:r};o.push(l);for(const[c,d]of this.#e)o.push(...d._toOps(this._id,c,i));return o}static _deserialize([e,r],i,o){const l=new od;l._attach(e,o);const c=i.get(e);if(c===void 0)return l;for(const[d,h]of c){const g=Vg([d,h],i,o);g._setParentLink(l,h.parentKey),l.#e.set(h.parentKey,g),l.invalidate()}return l}_attach(e,r){super._attach(e,r);for(const[i,o]of this.#e)ut(o)&&o._attach(r.generateId(),r)}_attachChild(e,r){if(this._pool===void 0)throw new Error("Can't attach child if managed pool is not present");const{id:i,parentKey:o,opId:l}=e,c=o,d=io(e);if(this._pool.getNode(i)!==void 0)return{modified:!1};if(r===2){const m=this.#t.get(c);if(m===l)return this.#t.delete(c),{modified:!1};if(m!==void 0)return{modified:!1}}else r===1&&this.#t.delete(c);const h=this.#e.get(c);let g;if(h){const m=we(this._id);g=h._toOps(m,c),h._detach()}else g=[{type:5,id:i}];return d._setParentLink(this,c),d._attach(i,this._pool),this.#e.set(c,d),this.invalidate(),{modified:{node:this,type:"LiveMap",updates:{[c]:{type:"update"}}},reverse:g}}_detach(){super._detach();for(const e of this.#e.values())e._detach()}_detachChild(e){const r=we(this._id),i=we(e._parentKey),o=e._toOps(r,i,this._pool);for(const[c,d]of this.#e)d===e&&(this.#e.delete(c),this.invalidate());return e._detach(),{modified:{node:this,type:"LiveMap",updates:{[i]:{type:"delete"}}},reverse:o}}_serialize(){if(this.parent.type!=="HasParent")throw new Error("Cannot serialize LiveMap if parent is missing");return{type:2,parentId:we(this.parent.node._id,"Parent node expected to have ID"),parentKey:this.parent.key}}get(e){const r=this.#e.get(e);if(r!==void 0)return fs(r)}set(e,r){this._pool?.assertStorageIsWritable();const i=this.#e.get(e);i&&i._detach();const o=ai(r);if(o._setParentLink(this,e),this.#e.set(e,o),this.invalidate(),this._pool&&this._id){const l=this._pool.generateId();o._attach(l,this._pool);const c=new Map;c.set(this._id,{node:this,type:"LiveMap",updates:{[e]:{type:"update"}}});const d=o._toOps(this._id,e,this._pool);this.#t.set(e,we(d[0].opId)),this._pool.dispatch(o._toOps(this._id,e,this._pool),i?i._toOps(this._id,e):[{type:5,id:l}],c)}}get size(){return this.#e.size}has(e){return this.#e.has(e)}delete(e){this._pool?.assertStorageIsWritable();const r=this.#e.get(e);if(r===void 0)return!1;if(r._detach(),this.#e.delete(e),this.invalidate(),this._pool&&r._id){const i=we(this._id),o=new Map;o.set(i,{node:this,type:"LiveMap",updates:{[e]:{type:"delete"}}}),this._pool.dispatch([{type:5,id:r._id,opId:this._pool.generateOpId()}],r._toOps(i,e),o)}return!0}entries(){const e=this.#e.entries();return{[Symbol.iterator](){return this},next(){const r=e.next();if(r.done)return{done:!0,value:void 0};const o=r.value[0],l=fs(r.value[1]);return{value:[o,l]}}}}[Symbol.iterator](){return this.entries()}keys(){return this.#e.keys()}values(){const e=this.#e.values();return{[Symbol.iterator](){return this},next(){const r=e.next();return r.done?{done:!0,value:void 0}:{value:fs(r.value)}}}}forEach(e){for(const r of this)e(r[1],r[0],this)}_toTreeNode(e){return{type:"LiveMap",id:this._id??Rn(),key:e,payload:Array.from(this.#e.entries()).map(([r,i])=>i.toTreeNode(r))}}toImmutable(){return super.toImmutable()}_toImmutable(){const e=new Map;for(const[r,i]of this.#e)e.set(r,i.toImmutable());return xr(e)}clone(){return new od(Array.from(this.#e).map(([e,r])=>[e,r.clone()]))}},Nc=128*1024,ps=class ri extends bl{#e;#t;static detectLargeObjects=!1;static#n(e){const r=new Map;let i=null;for(const[o,l]of e)if(_E(l))i=[o,l];else{const c=[o,l],d=r.get(l.parentId);d!==void 0?d.push(c):r.set(l.parentId,[c])}if(i===null)throw new Error("Root can't be null");return[i,r]}static _fromItems(e,r){const[i,o]=ri.#n(e);return ri._deserialize(i,o,r)}constructor(e={}){super(),this.#t=new Map;const r=Eo(e);for(const i of Object.keys(r)){const o=r[i];ut(o)&&o._setParentLink(this,i)}this.#e=new Map(Object.entries(r))}_toOps(e,r,i){if(this._id===void 0)throw new Error("Cannot serialize item is not attached");const o=i?.generateOpId(),l=[],c={type:4,id:this._id,opId:o,parentId:e,parentKey:r,data:{}};l.push(c);for(const[d,h]of this.#e)ut(h)?l.push(...h._toOps(this._id,d,i)):c.data[d]=h;return l}static _deserialize([e,r],i,o){const l=new ri(r.data);return l._attach(e,o),this._deserializeChildren(l,i,o)}static _deserializeChildren(e,r,i){const o=r.get(we(e._id));if(o===void 0)return e;for(const[l,c]of o){const d=bE([l,c],r,i);ii(d)&&d._setParentLink(e,c.parentKey),e.#e.set(c.parentKey,d),e.invalidate()}return e}_attach(e,r){super._attach(e,r);for(const[i,o]of this.#e)ut(o)&&o._attach(r.generateId(),r)}_attachChild(e,r){if(this._pool===void 0)throw new Error("Can't attach child if managed pool is not present");const{id:i,opId:o,parentKey:l}=e,c=zg(e);if(this._pool.getNode(i)!==void 0)return this.#t.get(l)===o&&this.#t.delete(l),{modified:!1};if(r===0)this.#t.set(l,we(o));else if(this.#t.get(l)!==void 0)return this.#t.get(l)===o?(this.#t.delete(l),{modified:!1}):{modified:!1};const d=we(this._id),h=this.#e.get(l);let g;return ut(h)?(g=h._toOps(d,l),h._detach()):h===void 0?g=[{type:6,id:d,key:l}]:g=[{type:3,id:d,data:{[l]:h}}],this.#e.set(l,c),this.invalidate(),ii(c)&&(c._setParentLink(this,l),c._attach(i,this._pool)),{reverse:g,modified:{node:this,type:"LiveObject",updates:{[l]:{type:"update"}}}}}_detachChild(e){if(e){const r=we(this._id),i=we(e._parentKey),o=e._toOps(r,i,this._pool);for(const[c,d]of this.#e)d===e&&(this.#e.delete(c),this.invalidate());return e._detach(),{modified:{node:this,type:"LiveObject",updates:{[i]:{type:"delete"}}},reverse:o}}return{modified:!1}}_detach(){super._detach();for(const e of this.#e.values())ut(e)&&e._detach()}_apply(e,r){return e.type===3?this.#r(e,r):e.type===6?this.#i(e,r):super._apply(e,r)}_serialize(){const e={};for(const[r,i]of this.#e)ut(i)||(e[r]=i);return this.parent.type==="HasParent"&&this.parent.node._id?{type:0,parentId:this.parent.node._id,parentKey:this.parent.key,data:e}:{type:0,data:e}}#r(e,r){let i=!1;const o=we(this._id),l=[],c={type:3,id:o,data:{}};for(const h in e.data){const g=this.#e.get(h);ut(g)?(l.push(...g._toOps(o,h)),g._detach()):g!==void 0?c.data[h]=g:g===void 0&&l.push({type:6,id:o,key:h})}const d={};for(const h in e.data){const g=e.data[h];if(g===void 0)continue;if(r)this.#t.set(h,we(e.opId));else if(this.#t.get(h)===void 0)i=!0;else if(this.#t.get(h)===e.opId){this.#t.delete(h);continue}else continue;const m=this.#e.get(h);ut(m)&&m._detach(),i=!0,d[h]={type:"update"},this.#e.set(h,g),this.invalidate()}return Object.keys(c.data).length!==0&&l.unshift(c),i?{modified:{node:this,type:"LiveObject",updates:d},reverse:l}:{modified:!1}}#i(e,r){const i=e.key;if(this.#e.has(i)===!1)return{modified:!1};if(!r&&this.#t.get(i)!==void 0)return{modified:!1};const o=this.#e.get(i),l=we(this._id);let c=[];return ut(o)?(c=o._toOps(l,e.key),o._detach()):o!==void 0&&(c=[{type:3,id:l,data:{[i]:o}}]),this.#e.delete(i),this.invalidate(),{modified:{node:this,type:"LiveObject",updates:{[e.key]:{type:"delete"}}},reverse:c}}toObject(){return Object.fromEntries(this.#e)}set(e,r){this._pool?.assertStorageIsWritable(),this.update({[e]:r})}get(e){return this.#e.get(e)}delete(e){this._pool?.assertStorageIsWritable();const r=e,i=this.#e.get(r);if(i===void 0)return;if(this._pool===void 0||this._id===void 0){ut(i)&&i._detach(),this.#e.delete(r),this.invalidate();return}let o;ut(i)?(i._detach(),o=i._toOps(this._id,r)):o=[{type:3,data:{[r]:i},id:this._id}],this.#e.delete(r),this.invalidate();const l=new Map;l.set(this._id,{node:this,type:"LiveObject",updates:{[e]:{type:"delete"}}}),this._pool.dispatch([{type:6,key:r,id:this._id,opId:this._pool.generateOpId()}],o,l)}update(e){if(this._pool?.assertStorageIsWritable(),ri.detectLargeObjects){const g={};for(const[w,R]of this.#e)ut(R)||(g[w]=R);for(const w of Object.keys(e)){const R=e[w];R!==void 0&&(ut(R)||(g[w]=R))}const m=JSON.stringify(g);if(m.length*4>Nc){const w=new TextEncoder().encode(m).length;if(w>Nc)throw new Error(`LiveObject size exceeded limit: ${w} bytes > ${Nc} bytes. See https://liveblocks.io/docs/platform/limits#Liveblocks-Storage-limits`)}}if(this._pool===void 0||this._id===void 0){for(const g in e){const m=e[g];if(m===void 0)continue;const y=this.#e.get(g);ut(y)&&y._detach(),ut(m)&&m._setParentLink(this,g),this.#e.set(g,m),this.invalidate()}return}const r=[],i=[],o=this._pool.generateOpId(),l={},c={id:this._id,type:3,data:{}},d={};for(const g in e){const m=e[g];if(m===void 0)continue;const y=this.#e.get(g);if(ut(y)?(i.push(...y._toOps(this._id,g)),y._detach()):y===void 0?i.push({type:6,id:this._id,key:g}):c.data[g]=y,ut(m)){m._setParentLink(this,g),m._attach(this._pool.generateId(),this._pool);const w=m._toOps(this._id,g,this._pool),R=w.find(x=>x.parentId===this._id);R&&this.#t.set(g,we(R.opId)),r.push(...w)}else l[g]=m,this.#t.set(g,o);this.#e.set(g,m),this.invalidate(),d[g]={type:"update"}}Object.keys(c.data).length!==0&&i.unshift(c),Object.keys(l).length!==0&&r.unshift({opId:o,id:this._id,type:3,data:l});const h=new Map;h.set(this._id,{node:this,type:"LiveObject",updates:d}),this._pool.dispatch(r,i,h)}toImmutable(){return super.toImmutable()}toTreeNode(e){return super.toTreeNode(e)}_toTreeNode(e){const r=this._id??Rn();return{type:"LiveObject",id:r,key:e,payload:Array.from(this.#e.entries()).map(([i,o])=>ut(o)?o.toTreeNode(i):{type:"Json",id:`${r}:${i}`,key:i,payload:o})}}_toImmutable(){const e={};for(const[r,i]of this.#e)e[r]=ii(i)?i.toImmutable():i;return e}clone(){return new ri(Object.fromEntries(Array.from(this.#e).map(([e,r])=>[e,ii(r)?r.clone():mo(r)])))}};function io(n){return ai(zg(n))}function zg(n){switch(n.type){case 8:return n.data;case 4:return new ps(n.data);case 7:return new hi;case 2:return new fi([]);default:return kt(n,"Unknown creation Op")}}function Bg(n,e){return n===e?!0:n.parent.type==="HasParent"?Bg(n.parent.node,e):!1}function Vg([n,e],r,i){switch(e.type){case 0:return ps._deserialize([n,e],r,i);case 1:return fi._deserialize([n,e],r,i);case 2:return hi._deserialize([n,e],r,i);case 3:return Dr._deserialize([n,e],r,i);default:throw new Error("Unexpected CRDT type")}}function bE([n,e],r,i){switch(e.type){case 0:return ps._deserialize([n,e],r,i);case 1:return fi._deserialize([n,e],r,i);case 2:return hi._deserialize([n,e],r,i);case 3:return e.data;default:throw new Error("Unexpected CRDT type")}}function ii(n){return Hg(n)||CE(n)||TE(n)}function ut(n){return ii(n)||IE(n)}function Hg(n){return n instanceof fi}function CE(n){return n instanceof hi}function TE(n){return n instanceof ps}function IE(n){return n instanceof Dr}function RE(n){return n===void 0?void 0:ii(n)?n.clone():mo(n)}function fs(n){return n instanceof Dr?n.data:n instanceof fi||n instanceof hi||n instanceof ps?n:kt(n,"Unknown AbstractCrdt")}function ai(n){return n instanceof ps||n instanceof hi||n instanceof fi?n:new Dr(n)}function OE(n,e){const r=[];return n.forEach((i,o)=>{e.get(o)||r.push({type:5,id:o})}),e.forEach((i,o)=>{const l=n.get(o);if(l)i.type===0&&(l.type!==0||Jn(i.data)!==Jn(l.data))&&r.push({type:3,id:o,data:i.data}),i.parentKey!==l.parentKey&&r.push({type:1,id:o,parentKey:we(i.parentKey,"Parent key must not be missing")});else switch(i.type){case 3:r.push({type:8,id:o,parentId:i.parentId,parentKey:i.parentKey,data:i.data});break;case 1:r.push({type:2,id:o,parentId:i.parentId,parentKey:i.parentKey});break;case 0:if(i.parentId===void 0||i.parentKey===void 0)throw new Error("Internal error. Cannot serialize storage root into an operation");r.push({type:4,id:o,parentId:i.parentId,parentKey:i.parentKey,data:i.data});break;case 2:r.push({type:7,id:o,parentId:i.parentId,parentKey:i.parentKey});break}}),r}function AE(n,e){const r=n.updates;for(const[i,o]of Sd(e.updates))r[i]=o;return{...e,updates:r}}function xE(n,e){const r=n.updates;for(const[i,o]of Sd(e.updates))r[i]=o;return{...e,updates:r}}function PE(n,e){const r=n.updates;return{...e,updates:r.concat(e.updates)}}function Dc(n,e){return n===void 0?e:n.type==="LiveObject"&&e.type==="LiveObject"?AE(n,e):n.type==="LiveMap"&&e.type==="LiveMap"?xE(n,e):n.type==="LiveList"&&e.type==="LiveList"?PE(n,e):e}var Uc=class{#e;#t;#n;#r;constructor(){this.#e={},this.#t=0,this.#n=1,this.#r=0}get length(){return this.#r}*[Symbol.iterator](){const n=this.#r,e=this.#t;for(let r=0;r<n;r++)yield this.#e[e+r]}push(n){const e=Array.isArray(n)?n:[n];this.#n>Number.MAX_SAFE_INTEGER-e.length-1&&nn("Deque full");for(const r of e)this.#e[this.#n++-1]=r;this.#r+=e.length}pop(){if(this.#r<1)return;this.#n--;const n=this.#e[this.#n-1];return delete this.#e[this.#n-1],this.#r--,n}pushLeft(n){const e=Array.isArray(n)?n:[n];this.#t<Number.MIN_SAFE_INTEGER+e.length&&nn("Deque full");for(let r=e.length-1;r>=0;r--)this.#e[--this.#t]=e[r];this.#r+=e.length}popLeft(){if(this.#r<1)return;const n=this.#e[this.#t];return delete this.#e[this.#t],this.#t++,this.#r--,n}};function LE(n){return n===null||typeof n=="string"||typeof n=="number"||typeof n=="boolean"}function Wg(n){return Array.isArray(n)}function NE(n){return!LE(n)&&!Wg(n)}function DE(n,e){const{connectionId:r,id:i,info:o}=n,l=nd(n.scopes);return xr(Eo({connectionId:r,id:i,info:o,canWrite:l,canComment:Mg(n.scopes),isReadOnly:!l,presence:e}))}var UE=class{#e;#t;signal;constructor(){this.#e=new vn({connections:new Map,presences:new Map}),this.signal=Ye.from(this.#e,n=>Xc(Array.from(this.#e.get().presences.keys()).map(e=>this.getUser(Number(e))))),this.#t=new Map}get(){return this.signal.get()}connectionIds(){return this.#e.get().connections.keys()}clearOthers(){this.#e.mutate(n=>{n.connections.clear(),n.presences.clear(),this.#t.clear()})}#n(n){const e=this.#e.get(),r=e.connections.get(n),i=e.presences.get(n);if(r!==void 0&&i!==void 0)return DE(r,i)}getUser(n){const e=this.#t.get(n);if(e)return e;const r=this.#n(n);if(r)return this.#t.set(n,r),r}#r(n){this.#t.delete(n)}setConnection(n,e,r,i){this.#e.mutate(o=>(o.connections.set(n,xr({connectionId:n,id:e,info:r,scopes:i})),o.presences.has(n)?this.#r(n):!1))}removeConnection(n){this.#e.mutate(e=>{e.connections.delete(n),e.presences.delete(n),this.#r(n)})}setOther(n,e){this.#e.mutate(r=>(r.presences.set(n,xr(Eo(e))),r.connections.has(n)?this.#r(n):!1))}patchOther(n,e){this.#e.mutate(r=>{const i=r.presences.get(n);if(i===void 0)return!1;const o=bg(i,e);return i===o?!1:(r.presences.set(n,xr(o)),this.#r(n))})}},ad=class Kg extends Error{context;constructor(e,r,i){super(e,{cause:i}),this.context=r,this.name="LiveblocksError"}get roomId(){return this.context.roomId}get code(){return this.context.code}static from(e,r){return new Kg(jE(e),e,r)}};function jE(n){switch(n.type){case"ROOM_CONNECTION_ERROR":switch(n.code){case 4001:return"Not allowed to connect to the room";case 4005:return"Room is already full";case 4006:return"Kicked out of the room, because the room ID changed";default:return"Could not connect to the room"}case"AI_CONNECTION_ERROR":switch(n.code){case 4001:return"Not allowed to connect to ai";default:return"Could not connect to the room"}case"CREATE_THREAD_ERROR":return"Could not create new thread";case"DELETE_THREAD_ERROR":return"Could not delete thread";case"EDIT_THREAD_METADATA_ERROR":return"Could not edit thread metadata";case"MARK_THREAD_AS_RESOLVED_ERROR":return"Could not mark thread as resolved";case"MARK_THREAD_AS_UNRESOLVED_ERROR":return"Could not mark thread as unresolved";case"SUBSCRIBE_TO_THREAD_ERROR":return"Could not subscribe to thread";case"UNSUBSCRIBE_FROM_THREAD_ERROR":return"Could not unsubscribe from thread";case"CREATE_COMMENT_ERROR":return"Could not create new comment";case"EDIT_COMMENT_ERROR":return"Could not edit comment";case"DELETE_COMMENT_ERROR":return"Could not delete comment";case"ADD_REACTION_ERROR":return"Could not add reaction";case"REMOVE_REACTION_ERROR":return"Could not remove reaction";case"MARK_INBOX_NOTIFICATION_AS_READ_ERROR":return"Could not mark inbox notification as read";case"DELETE_INBOX_NOTIFICATION_ERROR":return"Could not delete inbox notification";case"MARK_ALL_INBOX_NOTIFICATIONS_AS_READ_ERROR":return"Could not mark all inbox notifications as read";case"DELETE_ALL_INBOX_NOTIFICATIONS_ERROR":return"Could not delete all inbox notifications";case"UPDATE_ROOM_SUBSCRIPTION_SETTINGS_ERROR":return"Could not update room subscription settings";case"UPDATE_NOTIFICATION_SETTINGS_ERROR":return"Could not update notification settings";case"LARGE_MESSAGE_ERROR":return"Could not send large message";default:return kt(n,"Unhandled case")}}var sm=1024*1024-512;function $E(n){let e=0;return()=>`${n}:${e++}`}function im(n,e){return{type:"User",id:`${e.connectionId}`,key:n,payload:{connectionId:e.connectionId,id:e.id,info:e.info,presence:e.presence,isReadOnly:!e.canWrite}}}function ME(){const n=typeof document<"u"?document:void 0,e={current:null};function r(){n?.visibilityState==="hidden"?e.current=e.current??Date.now():e.current=null}return n?.addEventListener("visibilitychange",r),[e,()=>{n?.removeEventListener("visibilitychange",r)}]}function FE(n,e){const r=e.roomId,i=n.initialPresence,o=n.initialStorage,l=e.roomHttpClient,[c,d]=ME(),h={...e.delegates,canZombie(){return e.backgroundKeepAliveTimeout!==void 0&&c.current!==null&&Date.now()>c.current+e.backgroundKeepAliveTimeout&&on()!=="synchronizing"}},g=new $g(h,e.enableDebugLogging),m={buffer:{flushTimerID:void 0,lastFlushedAt:0,presenceUpdates:{type:"full",data:i},messages:[],storageOperations:[]},staticSessionInfoSig:new zt(null),dynamicSessionInfoSig:new zt(null),myPresence:new ek(i),others:new UE,initialStorage:o,idFactory:null,yjsProvider:void 0,yjsProviderDidChange:Fe(),pool:yE(r,{getCurrentConnectionId:de,onDispatch:b,isStorageWritable:A}),root:void 0,undoStack:[],redoStack:[],pausedHistory:null,activeBatch:null,unacknowledgedOps:new Map};let y;function w(_){const M=g.authValue;if(M!==null){const V=Td(M);if(V!==y)if(y=V,M.type==="secret"){const X=M.token.parsed;m.staticSessionInfoSig.set({userId:X.k==="sec-legacy"?X.id:X.uid,userInfo:X.k==="sec-legacy"?X.info:X.ui})}else m.staticSessionInfoSig.set({userId:void 0,userInfo:void 0})}C.status.notify(_),re()}let R,x=!1;function E(_){_==="reconnecting"?R=setTimeout(()=>{C.lostConnection.notify("lost"),x=!0,m.others.clearOthers(),ee({others:[{type:"reset"}]})},e.lostConnectionTimeout):(clearTimeout(R),x&&(_==="disconnected"?C.lostConnection.notify("failed"):C.lostConnection.notify("restored"),x=!1))}function P(){m.buffer.presenceUpdates={type:"full",data:{...m.myPresence.get()}},We!==null&&wt({flush:!1}),it()}function D(){clearTimeout(m.buffer.flushTimerID)}g.events.onMessage.subscribe(yn),g.events.statusDidChange.subscribe(w),g.events.statusDidChange.subscribe(E),g.events.didConnect.subscribe(P),g.events.didDisconnect.subscribe(D),g.events.onConnectionError.subscribe(({message:_,code:M})=>{const V="ROOM_CONNECTION_ERROR",X=new ad(_,{type:V,code:M,roomId:r});e.errorEventSource.notify(X)});function b(_,M,V){if(m.activeBatch){for(const X of _)m.activeBatch.ops.push(X);for(const[X,Oe]of V)m.activeBatch.updates.storageUpdates.set(X,Dc(m.activeBatch.updates.storageUpdates.get(X),Oe));m.activeBatch.reverseOps.pushLeft(M)}else B(M),m.redoStack.length=0,ue(_),ee({storageUpdates:V})}function A(){const _=m.dynamicSessionInfoSig.get()?.scopes;return _!==void 0?nd(_):!0}const C={status:Fe(),lostConnection:Fe(),customEvent:Fe(),self:Fe(),myPresence:Fe(),others:Fe(),storageBatch:Fe(),history:Fe(),storageDidLoad:Fe(),storageStatus:Fe(),ydoc:Fe(),comments:Fe(),roomWillDestroy:Fe()};async function $(_,M){return l.createTextMention({roomId:r,mentionId:_,mention:M})}async function F(_){return l.deleteTextMention({roomId:r,mentionId:_})}async function G(_,M){await l.reportTextEditor({roomId:r,type:_,rootKey:M})}async function le(){return l.listTextVersions({roomId:r})}async function he(_){return l.listTextVersionsSince({roomId:r,since:_.since,signal:_.signal})}async function be(_){return l.getTextVersion({roomId:r,versionId:_})}async function De(){return l.createTextVersion({roomId:r})}async function je(_){return l.executeContextualPrompt({roomId:r,..._})}function*Ue(_){const{ops:M,...V}=_;if(M.length<2)throw new Error("Cannot split ops into smaller chunks");const X=Math.floor(M.length/2),Oe=M.slice(0,X),Ie=M.slice(X);for(const Jt of[Oe,Ie]){const Me={ops:Jt,...V},Ln=Jn([Me]);Y(Ln)?yield*Ue(Me):yield Ln}}function*te(_){if(_.length<2)if(_[0].type===201){yield*Ue(_[0]);return}else throw new Error("Cannot split into chunks smaller than the allowed message size");const M=Math.floor(_.length/2),V=_.slice(0,M),X=_.slice(M);for(const Oe of[V,X]){const Ie=Jn(Oe);Y(Ie)?yield*te(Oe):yield Ie}}function Y(_){return _.length*4<sm?!1:new TextEncoder().encode(_).length>=sm}function ke(_){const M=e.largeMessageStrategy??"default",V=Jn(_);if(!Y(V))return g.send(V);switch(M){case"default":{const X="LARGE_MESSAGE_ERROR",Oe=new ad("Message is too large for websockets",{type:X});e.errorEventSource.notify(Oe)||Pr("Message is too large for websockets.  Configure largeMessageStrategy option or useErrorListener to handle this.");return}case"split":{Lt("Message is too large for websockets, splitting into smaller chunks");for(const X of te(_))g.send(X);return}case"experimental-fallback-to-http":{Lt("Message is too large for websockets, so sending over HTTP instead");const X=m.dynamicSessionInfoSig.get()?.nonce??nn("Session is not authorized to send message over HTTP");l.sendMessages({roomId:r,nonce:X,messages:_}).then(Oe=>{!Oe.ok&&Oe.status===403&&g.reconnect()});return}}}const fe=Ye.from(m.staticSessionInfoSig,m.dynamicSessionInfoSig,m.myPresence,(_,M,V)=>{if(_===null||M===null)return null;{const X=nd(M.scopes);return{connectionId:M.actor,id:_.userId,info:_.userInfo,presence:V,canWrite:X,canComment:Mg(M.scopes)}}});let K;function re(){const _=fe.get();_!==null&&_!==K&&(C.self.notify(_),K=_)}const Z=Ye.from(fe,_=>_!==null?im("Me",_):null);function L(_){if(_.items.length===0)throw new Error("Internal error: cannot load storage without items");m.root!==void 0?z(_.items):m.root=ps._fromItems(_.items,m.pool);const M=fe.get()?.canWrite??!0,V=m.undoStack.length;for(const X in m.initialStorage)m.root.get(X)===void 0&&(M?m.root.set(X,RE(m.initialStorage[X])):Lt(`Attempted to populate missing storage key '${X}', but current user has no write access`));m.undoStack.length=V}function z(_){if(m.root===void 0)return;const M=new Map;for(const[Oe,Ie]of m.pool.nodes)M.set(Oe,Ie._serialize());const V=OE(M,new Map(_)),X=Ee(V,!1);ee(X.updates)}function _e(_){m.undoStack.length>=50&&m.undoStack.shift(),m.undoStack.push(_),tr()}function B(_){m.pausedHistory!==null?m.pausedHistory.pushLeft(_):_e(_)}function ee(_){const M=_.storageUpdates,V=_.others;if(V!==void 0&&V.length>0){const X=m.others.get();for(const Oe of V)C.others.notify({...Oe,others:X})}if((_.presence??!1)&&(re(),C.myPresence.notify(m.myPresence.get())),M!==void 0&&M.size>0){const X=Array.from(M.values());C.storageBatch.notify(X)}Fr()}function de(){const _=m.dynamicSessionInfoSig.get();if(_)return _.actor;throw new Error("Internal. Tried to get connection id but connection was never open")}function Ee(_,M){const V={reverse:new Uc,storageUpdates:new Map,presence:!1},X=new Set,Oe=_.map(Ie=>Ie.type!=="presence"&&!Ie.opId?{...Ie,opId:m.pool.generateOpId()}:Ie);for(const Ie of Oe)if(Ie.type==="presence"){const Jt={type:"presence",data:{}};for(const Me in Ie.data)Jt.data[Me]=m.myPresence.get()[Me];if(m.myPresence.patch(Ie.data),m.buffer.presenceUpdates===null)m.buffer.presenceUpdates={type:"partial",data:Ie.data};else for(const Me in Ie.data)m.buffer.presenceUpdates.data[Me]=Ie.data[Me];V.reverse.pushLeft(Jt),V.presence=!0}else{let Jt;if(M)Jt=0;else{const Ln=we(Ie.opId);Jt=m.unacknowledgedOps.delete(Ln)?2:1}const Me=Re(Ie,Jt);if(Me.modified){const Ln=Me.modified.node._id;Ln&&X.has(Ln)||(V.storageUpdates.set(we(Me.modified.node._id),Dc(V.storageUpdates.get(we(Me.modified.node._id)),Me.modified)),V.reverse.pushLeft(Me.reverse)),(Ie.type===2||Ie.type===7||Ie.type===4)&&X.add(we(Ie.id))}}return{ops:Oe,reverse:Array.from(V.reverse),updates:{storageUpdates:V.storageUpdates,presence:V.presence}}}function Re(_,M){if(vE(_))return{modified:!1};switch(_.type){case 6:case 3:case 5:{const V=m.pool.nodes.get(_.id);return V===void 0?{modified:!1}:V._apply(_,M===0)}case 1:{const V=m.pool.nodes.get(_.id);return V===void 0?{modified:!1}:V.parent.type==="HasParent"&&Hg(V.parent.node)?V.parent.node._setChildKey(vo(_.parentKey),V,M):{modified:!1}}case 4:case 2:case 7:case 8:{if(_.parentId===void 0)return{modified:!1};const V=m.pool.nodes.get(_.parentId);return V===void 0?{modified:!1}:V._attachChild(_,M)}}}function Pe(_,M){const V={};m.buffer.presenceUpdates===null&&(m.buffer.presenceUpdates={type:"partial",data:{}});for(const X in _){const Oe=_[X];Oe!==void 0&&(m.buffer.presenceUpdates.data[X]=Oe,V[X]=m.myPresence.get()[X])}m.myPresence.patch(_),m.activeBatch?(M?.addToHistory&&m.activeBatch.reverseOps.pushLeft({type:"presence",data:V}),m.activeBatch.updates.presence=!0):(it(),M?.addToHistory&&B([{type:"presence",data:V}]),ee({presence:!0}))}function st(_){if(_.targetActor!==void 0){const V=m.others.getUser(_.actor);m.others.setOther(_.actor,_.data);const X=m.others.getUser(_.actor);if(V===void 0&&X!==void 0)return{type:"enter",user:X}}else m.others.patchOther(_.actor,_.data);const M=m.others.getUser(_.actor);if(M)return{type:"update",updates:_.data,user:M}}function rn(_){const M=m.others.getUser(_.actor);return M?(m.others.removeConnection(_.actor),{type:"leave",user:M}):null}function jr(_){m.dynamicSessionInfoSig.set({actor:_.actor,nonce:_.nonce,scopes:_.scopes}),m.idFactory=$E(_.actor),re();for(const M of m.others.connectionIds())_.users[M]===void 0&&m.others.removeConnection(M);for(const M in _.users){const V=_.users[M],X=Number(M);m.others.setConnection(X,V.id,V.info,V.scopes)}return{type:"reset"}}function An(){return m.undoStack.length>0}function er(){return m.redoStack.length>0}function tr(){C.history.notify({canUndo:An(),canRedo:er()})}function ms(_){m.others.setConnection(_.actor,_.id,_.info,_.scopes),m.buffer.messages.push({type:100,data:m.myPresence.get(),targetActor:_.actor}),it();const M=m.others.getUser(_.actor);return M?{type:"enter",user:M}:void 0}function nr(_){return NE(_)?_:null}function gs(_){const M=Gn(_);return M===void 0?null:Wg(M)?Xc(M.map(V=>nr(V))):Xc([nr(M)])}function rr(_){if(_.size===0)return;const M=[],V=Array.from(_.values()),X=Ee(V,!0);M.push({type:201,ops:X.ops}),ee(X.updates),ke(M)}function yn(_){if(typeof _.data!="string")return;const M=gs(_.data);if(M===null||M.length===0)return;const V={storageUpdates:new Map,others:[]};for(const X of M)switch(X.type){case 101:{const Oe=ms(X);Oe&&V.others.push(Oe);break}case 100:{const Oe=st(X);Oe&&V.others.push(Oe);break}case 103:{const Oe=m.others.get();C.customEvent.notify({connectionId:X.actor,user:X.actor<0?null:Oe.find(Ie=>Ie.connectionId===X.actor)??null,event:X.event});break}case 102:{const Oe=rn(X);Oe&&V.others.push(Oe);break}case 300:{C.ydoc.notify(X);break}case 104:{V.others.push(jr(X));break}case 200:{Nt(X);break}case 201:{const Oe=Ee(X.ops,!1);for(const[Ie,Jt]of Oe.updates.storageUpdates)V.storageUpdates.set(Ie,Dc(V.storageUpdates.get(Ie),Jt));break}case 299:{Rg("Storage mutation rejection error",X.reason);break}case 400:case 407:case 401:case 408:case 405:case 406:case 402:case 403:case 404:{C.comments.notify(X);break}}ee(V)}function it(){const _=m.buffer.storageOperations;if(_.length>0){for(const X of _)m.unacknowledgedOps.set(we(X.opId),X);Fr()}if(g.getStatus()!=="connected"){m.buffer.storageOperations=[];return}const M=Date.now(),V=M-m.buffer.lastFlushedAt;if(V>=e.throttleDelay){const X=T();if(X.length===0)return;ke(X),m.buffer={flushTimerID:void 0,lastFlushedAt:M,messages:[],storageOperations:[],presenceUpdates:null}}else clearTimeout(m.buffer.flushTimerID),m.buffer.flushTimerID=setTimeout(it,e.throttleDelay-V)}function T(){const _=[];m.buffer.presenceUpdates&&_.push(m.buffer.presenceUpdates.type==="full"?{type:100,targetActor:-1,data:m.buffer.presenceUpdates.data}:{type:100,data:m.buffer.presenceUpdates.data});for(const M of m.buffer.messages)_.push(M);return m.buffer.storageOperations.length>0&&_.push({type:201,ops:m.buffer.storageOperations}),_}function J(_,M,V){const X={type:301,update:_,guid:M,v2:V};m.buffer.messages.push(X),C.ydoc.notify(X),it()}function ie(_,M={shouldQueueEventIfNotReady:!1}){g.getStatus()!=="connected"&&!M.shouldQueueEventIfNotReady||(m.buffer.messages.push({type:103,event:_}),it())}function ue(_){const{storageOperations:M}=m.buffer;for(const V of _)M.push(V);it()}let We=null,at=null;function Nt(_){const M=new Map(m.unacknowledgedOps);L(_),rr(M),at?.(),Fr(),C.storageDidLoad.notify()}async function Bt(){if(!g.authValue)return;const _=await l.streamStorage({roomId:r});Nt({items:_})}function wt(_){const M=m.buffer.messages;e.unstable_streamData?Bt():M.some(V=>V.type===200)||M.push({type:200}),_.flush&&it()}function Rt(){return We===null&&(wt({flush:!0}),We=new Promise(_=>{at=_}),Fr()),We}function Je(){const _=m.root;return _!==void 0?_:(Rt(),null)}async function Et(){return m.root!==void 0?Promise.resolve({root:m.root}):(await Rt(),{root:we(m.root)})}function Gt(_,M,V){m.buffer.messages.find(X=>X.type===300&&X.vector===_&&X.guid===M&&X.v2===V)||m.buffer.messages.push({type:300,vector:_,guid:M,v2:V}),it()}function Vt(){if(m.activeBatch)throw new Error("undo is not allowed during a batch");const _=m.undoStack.pop();if(_===void 0)return;m.pausedHistory=null;const M=Ee(_,!0);ee(M.updates),m.redoStack.push(M.reverse),tr();for(const V of M.ops)V.type!=="presence"&&m.buffer.storageOperations.push(V);it()}function sr(){if(m.activeBatch)throw new Error("redo is not allowed during a batch");const _=m.redoStack.pop();if(_===void 0)return;m.pausedHistory=null;const M=Ee(_,!0);ee(M.updates),m.undoStack.push(M.reverse),tr();for(const V of M.ops)V.type!=="presence"&&m.buffer.storageOperations.push(V);it()}function $r(){m.undoStack.length=0,m.redoStack.length=0}function xn(_){if(m.activeBatch)return _();let M;m.activeBatch={ops:[],updates:{storageUpdates:new Map,presence:!1,others:[]},reverseOps:new Uc};try{M=_()}finally{const V=m.activeBatch;m.activeBatch=null,V.reverseOps.length>0&&B(Array.from(V.reverseOps)),V.ops.length>0&&(m.redoStack.length=0),V.ops.length>0&&ue(V.ops),ee(V.updates),it()}return M}function wn(){m.pausedHistory===null&&(m.pausedHistory=new Uc)}function Mr(){const _=m.pausedHistory;m.pausedHistory=null,_!==null&&_.length>0&&_e(Array.from(_))}const sn=e.createSyncSource();function on(){return m.root===void 0?We===null?"not-loaded":"loading":m.unacknowledgedOps.size===0?"synchronized":"synchronizing"}let mi=on();function Fr(){const _=on();mi!==_&&(mi=_,C.storageStatus.notify(_)),sn.setSyncStatus(_==="synchronizing"?"synchronizing":"synchronized")}function gi(){return fe.get()!==null}async function Oo(){for(;!gi();){const{promise:_,resolve:M}=bd(),V=_n.self.subscribeOnce(M),X=_n.status.subscribeOnce(M);await _,V(),X()}}function vi(){return Je()!==null}async function yi(){for(;!vi();)await Et()}const Ao=Ye.from(m.others.signal,_=>_.map((M,V)=>im(`Other ${V}`,M))),_n={status:C.status.observable,lostConnection:C.lostConnection.observable,customEvent:C.customEvent.observable,others:C.others.observable,self:C.self.observable,myPresence:C.myPresence.observable,storageBatch:C.storageBatch.observable,history:C.history.observable,storageDidLoad:C.storageDidLoad.observable,storageStatus:C.storageStatus.observable,ydoc:C.ydoc.observable,comments:C.comments.observable,roomWillDestroy:C.roomWillDestroy.observable};async function wi(_){return l.getThreadsSince({roomId:r,since:_.since,signal:_.signal})}async function zr(_){return l.getThreads({roomId:r,query:_?.query,cursor:_?.cursor})}async function Tl(_){return l.getThread({roomId:r,threadId:_})}async function Br(_){return l.createThread({roomId:r,threadId:_.threadId,commentId:_.commentId,metadata:_.metadata,body:_.body,attachmentIds:_.attachmentIds})}async function vs(_){return l.deleteThread({roomId:r,threadId:_})}async function ys({metadata:_,threadId:M}){return l.editThreadMetadata({roomId:r,threadId:M,metadata:_})}async function _i(_){return l.markThreadAsResolved({roomId:r,threadId:_})}async function Il(_){return l.markThreadAsUnresolved({roomId:r,threadId:_})}async function Rl(_){return l.subscribeToThread({roomId:r,threadId:_})}async function Ol(_){return l.unsubscribeFromThread({roomId:r,threadId:_})}async function Pn(_){return l.createComment({roomId:r,threadId:_.threadId,commentId:_.commentId,body:_.body,attachmentIds:_.attachmentIds})}async function xo(_){return l.editComment({roomId:r,threadId:_.threadId,commentId:_.commentId,body:_.body,attachmentIds:_.attachmentIds})}async function Po({threadId:_,commentId:M}){return l.deleteComment({roomId:r,threadId:_,commentId:M})}async function Al({threadId:_,commentId:M,emoji:V}){return l.addReaction({roomId:r,threadId:_,commentId:M,emoji:V})}async function Lo({threadId:_,commentId:M,emoji:V}){return await l.removeReaction({roomId:r,threadId:_,commentId:M,emoji:V})}function No(_){return{type:"localAttachment",status:"idle",id:gk(),name:_.name,size:_.size,mimeType:_.type,file:_}}async function Do(_,M={}){return l.uploadAttachment({roomId:r,attachment:_,signal:M.signal})}function Uo(_){return l.getAttachmentUrl({roomId:r,attachmentId:_})}function jo(_){return l.getSubscriptionSettings({roomId:r,signal:_?.signal})}function $o(_){return l.updateSubscriptionSettings({roomId:r,settings:_})}async function Xe(_){await l.markRoomInboxNotificationAsRead({roomId:r,inboxNotificationId:_})}const Mo=e.createSyncSource();function Vr(_){return Mo.setSyncStatus(_==="synchronizing"||_==="loading"?"synchronizing":"synchronized")}return Object.defineProperty({[ve]:{get presenceBuffer(){return mo(m.buffer.presenceUpdates?.data??null)},get undoStack(){return mo(m.undoStack)},get nodeCount(){return m.pool.nodes.size},getYjsProvider(){return m.yjsProvider},setYjsProvider(_){m.yjsProvider?.off("status",Vr),m.yjsProvider=_,_?.on("status",Vr),m.yjsProviderDidChange.notify()},yjsProviderDidChange:m.yjsProviderDidChange.observable,reportTextEditor:G,createTextMention:$,deleteTextMention:F,listTextVersions:le,listTextVersionsSince:he,getTextVersion:be,createTextVersion:De,executeContextualPrompt:je,getSelf_forDevTools:()=>Z.get(),getOthers_forDevTools:()=>Ao.get(),simulate:{explicitClose:_=>g._privateSendMachineEvent({type:"EXPLICIT_SOCKET_CLOSE",event:_}),rawSend:_=>g.send(_)},attachmentUrlsStore:l.getOrCreateAttachmentUrlsStore(r)},id:r,subscribe:zE(r,_n,e.errorEventSource),connect:()=>g.connect(),reconnect:()=>g.reconnect(),disconnect:()=>g.disconnect(),destroy:()=>{const{roomWillDestroy:_,...M}=C;for(const V of Object.values(M))V.dispose();C.roomWillDestroy.notify(),m.yjsProvider?.off("status",Vr),sn.destroy(),Mo.destroy(),d(),g.destroy(),_.dispose()},updatePresence:Pe,updateYDoc:J,broadcastEvent:ie,batch:xn,history:{undo:Vt,redo:sr,canUndo:An,canRedo:er,clear:$r,pause:wn,resume:Mr},fetchYDoc:Gt,getStorage:Et,getStorageSnapshot:Je,getStorageStatus:on,isPresenceReady:gi,isStorageReady:vi,waitUntilPresenceReady:Bp(Oo),waitUntilStorageReady:Bp(yi),events:_n,getStatus:()=>g.getStatus(),getSelf:()=>fe.get(),getPresence:()=>m.myPresence.get(),getOthers:()=>m.others.get(),getThreads:zr,getThreadsSince:wi,getThread:Tl,createThread:Br,deleteThread:vs,editThreadMetadata:ys,markThreadAsResolved:_i,markThreadAsUnresolved:Il,subscribeToThread:Rl,unsubscribeFromThread:Ol,createComment:Pn,editComment:xo,deleteComment:Po,addReaction:Al,removeReaction:Lo,prepareAttachment:No,uploadAttachment:Do,getAttachmentUrl:Uo,getNotificationSettings:jo,getSubscriptionSettings:jo,updateNotificationSettings:$o,updateSubscriptionSettings:$o,markInboxNotificationAsRead:Xe},ve,{enumerable:!1})}function zE(n,e,r){function i(c,d){return e.storageBatch.subscribe(h=>{const g=h.filter(m=>Bg(m.node,c));g.length>0&&d(g)})}function o(c,d){return e.storageBatch.subscribe(h=>{for(const g of h)g.node._id===c._id&&d(g.node)})}function l(c,d,h){if(typeof c=="string"&&BE(c)){if(typeof d!="function")throw new Error("Second argument must be a callback function");const g=d;switch(c){case"event":return e.customEvent.subscribe(g);case"my-presence":return e.myPresence.subscribe(g);case"others":{const m=g;return e.others.subscribe(y=>{const{others:w,...R}=y;return m(w,R)})}case"error":return r.subscribe(m=>{if(m.roomId===n)return g(m)});case"status":return e.status.subscribe(g);case"lost-connection":return e.lostConnection.subscribe(g);case"history":return e.history.subscribe(g);case"storage-status":return e.storageStatus.subscribe(g);case"comments":return e.comments.subscribe(g);default:return kt(c,`"${String(c)}" is not a valid event name`)}}if(d===void 0||typeof c=="function")if(typeof c=="function"){const g=c;return e.storageBatch.subscribe(g)}else throw new Error("Please specify a listener callback");if(ut(c)){const g=c;return h?.isDeep?i(g,d):o(g,d)}throw new Error(`${String(c)} is not a value that can be subscribed to.`)}return l}function BE(n){return n==="my-presence"||n==="others"||n==="event"||n==="error"||n==="history"||n==="status"||n==="storage-status"||n==="lost-connection"||n==="connection"||n==="comments"}function VE(n,e){return async()=>e.getAuthValue({requestedScope:"room:read",roomId:n})}function HE(n,e,r){return i=>{const o=r??(typeof WebSocket>"u"?void 0:WebSocket);if(o===void 0)throw new mn("To use Liveblocks client in a non-DOM environment, you need to provide a WebSocket polyfill.");const l=new URL(e);if(l.protocol=l.protocol==="http:"?"ws":"wss",l.pathname="/v7",l.searchParams.set("roomId",n),i.type==="secret")l.searchParams.set("tok",i.token.raw);else if(i.type==="public")l.searchParams.set("pubkey",i.publicApiKey);else return kt(i,"Unhandled case");return l.searchParams.set("version",kl),new o(l.toString())}}var WE=16,KE=1e3,qE=100,GE=15e3,JE=200,QE=1e3,YE=3e4,XE=5e3,ZE=50,eb=50,tb=50;function nb(n){return typeof n=="string"&&n.startsWith("http")?n:iE}function rb(n){const e=n,r=sb(e.throttle??qE),i=ib(e.lostConnectionTimeout??XE),o=om(e.backgroundKeepAliveTimeout),l=nb(e.baseUrl),c=new zt(void 0),d=nE(n,B=>{const ee=B.k==="sec-legacy"?B.id:B.uid;c.set(()=>ee)}),h=e.polyfills?.fetch||globalThis.fetch?.bind(globalThis),g=Sk({baseUrl:l,fetchPolyfill:h,currentUserId:c,authManager:d}),m=new Map,y=eE({userId:c.get(),lostConnectionTimeout:i,backgroundKeepAliveTimeout:om(e.backgroundKeepAliveTimeout),polyfills:e.polyfills,delegates:{createSocket:tE(l,e.polyfills?.WebSocket),authenticate:async()=>{const B=await d.getAuthValue({requestedScope:"room:read"});if(B.type==="public")throw new mn("Cannot use AI Copilots with a public API key");if(B.token.parsed.k==="sec-legacy")throw new mn("AI Copilots requires an ID or Access token");if(!B.token.parsed.ai)throw new mn("AI Copilots is not yet enabled for this account. To get started, see https://liveblocks.io/docs/get-started/ai-copilots#Quickstart");return B},canZombie:()=>!1}});function w(B){B.id,m.delete(B.id),B.destroy()}function R(B){const ee=()=>{const de=ee;B.unsubs.delete(de)?B.unsubs.size===0&&w(B.room):Lt("This leave function was already called. Calling it more than once has no effect.")};return B.unsubs.add(ee),{room:B.room,leave:ee}}function x(B,...ee){const de=m.get(B);if(de!==void 0)return R(de);const Ee=ee[0]??{},Re=(typeof Ee.initialPresence=="function"?Ee.initialPresence(B):Ee.initialPresence)??{},Pe=(typeof Ee.initialStorage=="function"?Ee.initialStorage(B):Ee.initialStorage)??{},st=FE({initialPresence:Re,initialStorage:Pe},{roomId:B,throttleDelay:r,lostConnectionTimeout:i,backgroundKeepAliveTimeout:o,polyfills:e.polyfills,delegates:e.mockedDelegates??{createSocket:HE(B,l,e.polyfills?.WebSocket),authenticate:VE(B,d)},enableDebugLogging:e.enableDebugLogging,baseUrl:l,errorEventSource:fe,largeMessageStrategy:e.largeMessageStrategy,unstable_streamData:!!e.unstable_streamData,roomHttpClient:g,createSyncSource:Z}),rn={room:st,unsubs:new Set};if(m.set(B,rn),Ee.autoConnect??!0){if(typeof atob>"u"){if(e.polyfills?.atob===void 0)throw new Error("You need to polyfill atob to use the client in your environment. Please follow the instructions at https://liveblocks.io/docs/errors/liveblocks-client/atob-polyfill");global.atob=e.polyfills.atob}st.connect()}return R(rn)}function E(B){const ee=m.get(B)?.room;return ee||null}function P(){d.reset(),c.set(()=>{});for(const{room:B}of m.values())Rk(B.getStatus())||B.reconnect()}const D=e.resolveUsers,b=new Or(async B=>{const ee=B.flat(),de=await D?.({userIds:ee});return Lc(!D,"Set the resolveUsers option in createClient to specify user info."),de??ee.map(()=>{})},{delay:ZE}),A=oi(b);function C(B){A.invalidate(B)}const $=e.resolveRoomsInfo,F=new Or(async B=>{const ee=B.flat(),de=await $?.({roomIds:ee});return Lc(!$,"Set the resolveRoomsInfo option in createClient to specify room info."),de??ee.map(()=>{})},{delay:eb}),G=oi(F);function le(B){G.invalidate(B)}const he=e.resolveGroupsInfo,be=new Or(async B=>{const ee=B.flat(),de=await he?.({groupIds:ee});return Lc(!he,"Set the resolveGroupsInfo option in createClient to specify group info."),de??ee.map(()=>{})},{delay:tb}),De=oi(be);function je(B){De.invalidate(B)}const Ue=new Map;function te(){Ue.clear()}const Y=[],ke=new zt("synchronized"),fe=Fe();function K(){const B=ke.get();return B==="synchronizing"?B:"synchronized"}function re(){ke.set(Y.some(B=>B.get()==="synchronizing")?"synchronizing":Y.some(B=>B.get()==="has-local-changes")?"has-local-changes":"synchronized")}function Z(){const B=new zt("synchronized");Y.push(B);const ee=B.subscribe(()=>re());function de(Re){B.set(Re)}function Ee(){ee();const Re=Y.findIndex(Pe=>Pe===B);if(Re>-1){const[Pe]=Y.splice(Re,1);Pe.get()!=="synchronized"&&re()}}return{setSyncStatus:de,destroy:Ee}}{const B=de=>{e.preventUnsavedChanges&&ke.get()!=="synchronized"&&de.preventDefault()};(typeof window<"u"?window:void 0)?.addEventListener("beforeunload",B)}async function L(B){const ee=await g.getNotificationSettings(B);return hl(ee)}async function z(B){const ee=await g.updateNotificationSettings(B);return hl(ee)}const _e=Object.defineProperty({enterRoom:x,getRoom:E,logout:P,getInboxNotifications:g.getInboxNotifications,getInboxNotificationsSince:g.getInboxNotificationsSince,getUnreadInboxNotificationsCount:g.getUnreadInboxNotificationsCount,markAllInboxNotificationsAsRead:g.markAllInboxNotificationsAsRead,markInboxNotificationAsRead:g.markInboxNotificationAsRead,deleteAllInboxNotifications:g.deleteAllInboxNotifications,deleteInboxNotification:g.deleteInboxNotification,getNotificationSettings:L,updateNotificationSettings:z,resolvers:{invalidateUsers:C,invalidateRoomsInfo:le,invalidateGroupsInfo:je,invalidateMentionSuggestions:te},getSyncStatus:K,events:{error:fe,syncStatus:ke},[ve]:{currentUserId:c,mentionSuggestionsCache:Ue,ai:y,resolveMentionSuggestions:e.resolveMentionSuggestions,usersStore:A,roomsInfoStore:G,groupsInfoStore:De,getRoomIds(){return Array.from(m.keys())},httpClient:g,as:()=>_e,createSyncSource:Z,emitError:(B,ee)=>{const de=ad.from(B,ee);fe.notify(de)||Pr(de.message)}}},ve,{enumerable:!1});return _e}function Od(n,e,r,i,o){if(typeof e!="number"||e<r||i!==void 0&&e>i)throw new Error(i!==void 0?`${n} should be between ${o??r} and ${i}.`:`${n} should be at least ${o??r}.`);return e}function om(n){if(n!==void 0)return Od("backgroundKeepAliveTimeout",n,GE)}function sb(n){return Od("throttle",n,WE,KE)}function ib(n){return Od("lostConnectionTimeout",n,JE,YE,QE)}var ob={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};new RegExp(Object.keys(ob).map(n=>`\\${n}`).join("|"),"g");var ab={_:"\\_","*":"\\*","#":"\\#","`":"\\`","~":"\\~","!":"\\!","|":"\\|","(":"\\(",")":"\\)","{":"\\{","}":"\\}","[":"\\[","]":"\\]"};new RegExp(Object.keys(ab).map(n=>`\\${n}`).join("|"),"g");var jc=[1e3,2e3,4e3,8e3,1e4];function $c(n,e,r){const i=performance.now(),o=typeof document<"u"?document:void 0,l=typeof window<"u"?window:void 0,c=r?.maxStaleTimeMs??Number.POSITIVE_INFINITY,d={inForeground:o?.visibilityState!=="hidden",lastSuccessfulPollAt:i,count:0,backoff:0};function h(){return d.count>0&&d.inForeground}const g=new Lg({}).addState("@idle").addState("@enabled").addState("@polling");g.addTransitions("@idle",{START:"@enabled"}),g.addTransitions("@enabled",{STOP:"@idle",POLL:"@polling"}),g.addTimedTransition("@enabled",()=>{const b=d.lastSuccessfulPollAt+e;return Math.max(0,b-performance.now())+d.backoff},"@polling"),g.onEnterAsync("@polling",async(D,b)=>{await n(b),b.aborted||(d.lastSuccessfulPollAt=performance.now())},()=>({target:h()?"@enabled":"@idle",effect:()=>{d.backoff=0}}),()=>({target:h()?"@enabled":"@idle",effect:()=>{d.backoff=jc.find(D=>D>d.backoff)??jc[jc.length-1]}}),3e4);function m(){h()?g.send({type:"START"}):g.send({type:"STOP"})}function y(){d.count++,m()}function w(){d.count--,d.count<0&&(d.count=0),m()}function R(){performance.now()-d.lastSuccessfulPollAt>c&&g.send({type:"POLL"})}function x(){d.lastSuccessfulPollAt=performance.now()-c-1}function E(D){d.inForeground=D,m(),R()}function P(){E(o?.visibilityState!=="hidden")}return o?.addEventListener("visibilitychange",P),l?.addEventListener("online",P),l?.addEventListener("focus",R),g.start(),{inc:y,dec:w,pollNowIfStale:R,markAsStale:x,setInForeground:E}}function li(n,e){return typeof n=="string"?`${n}:${e}`:`${n.kind}:${n.subjectId}`}_d(VS,kl,HS);var lb="@liveblocks/client",ub="3.7.1",cb="esm";_d(lb,ub,cb);var db="@liveblocks/react",fb="3.7.1",hb="esm",qg=k.createContext(null);function Gg(){return k.useContext(qg)}function ze(){return Gg()??nn("LiveblocksProvider is missing from the React tree.")}var pl=k.createContext(null);function Jg(){return k.useContext(pl)}function am(){return Jg()!==null}function bo(n){const e=k.useRef(n);return k.useEffect(()=>{e.current=n},[n]),e}function pb(){return ze()[ve].ai}function mb(){return k.useState(Rn)[0]}var lm=k.memo(function(e){const r=k.useId(),i=pb(),{description:o,value:l}=e,[c,d]=k.useState();k.useEffect(()=>{const m=i.registerKnowledgeLayer(r);return d(m),()=>{i.deregisterKnowledgeLayer(m),d(void 0)}},[i,r]);const h=mb(),g=e.id??h;return k.useEffect(()=>{c!==void 0&&i.updateKnowledge(c,{description:o,value:l},g)},[i,c,g,o,l]),null}),um=k.memo(function({chatId:e,name:r,tool:i,enabled:o}){const c=ze()[ve].ai;return k.useEffect(()=>{const d=o!==void 0?{...i,enabled:o}:i;return c.registerTool(r,d,e)},[c,e,r,i,o]),null});function gb(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}function Ur(n,e,r,i,o){const l=k.useRef(null);let c;l.current===null?(c={hasValue:!1,value:null},l.current=c):c=l.current;const[d,h]=k.useMemo(()=>{let m=!1,y,w;const R=D=>{if(!m){m=!0,y=D;const $=i(D);if(o!==void 0&&c.hasValue){const F=c.value;if(o(F,$))return w=F,F}return w=$,$}const b=y,A=w;if(gb(b,D))return A;const C=i(D);return o!==void 0&&o(A,C)?(y=D,A):(y=D,w=C,C)},x=r===void 0?null:r;return[()=>R(e()),x===null?void 0:()=>R(x())]},[e,r,i,o]),g=k.useSyncExternalStore(n,d,h);return k.useEffect(()=>{c.hasValue=!0,c.value=g},[g]),k.useDebugValue(g),g}var vb=n=>n;function Cl(n,e,r){if(n instanceof vn)throw new Error("Using a mutable Signal with useSignal will likely not work as expected.");return Ur(n.subscribe,n.get,n.get,e??vb,r)}var oo=1e3,Mc=60*oo,ls={SMOOTH_DELAY:1*oo,ROOM_THREADS_POLL_INTERVAL:5*Mc,ROOM_THREADS_MAX_STALE_TIME:5*oo,HISTORY_VERSIONS_POLL_INTERVAL:1*Mc,HISTORY_VERSIONS_MAX_STALE_TIME:5*oo,ROOM_SUBSCRIPTION_SETTINGS_POLL_INTERVAL:1*Mc,ROOM_SUBSCRIPTION_SETTINGS_MAX_STALE_TIME:5*oo},ml=Object.freeze({isLoading:!0}),Qg=n=>Object.freeze({isLoading:!1,error:n});function Kn(n,e){return arguments.length===1?Object.freeze({isLoading:!1,data:n}):Object.freeze({isLoading:!1,[n]:e})}function yb(n,e){for(const r of n)if(e(r))return r}function Co(){if(typeof window>"u")throw new Error(`You cannot use the Suspense version of Liveblocks hooks server side. Make sure to only call them client side by using a ClientSideSuspense wrapper.
For tips, see https://liveblocks.io/docs/api-reference/liveblocks-react#ClientSideSuspense`)}function Yg(n,e){return k.useMemo(()=>n,[e])}var wb=fw[" use ".trim().toString()],To=wb??(n=>{if(n.status==="pending")throw n;if(n.status==="fulfilled")return n.value;throw n.status==="rejected"?n.reason:(n.status="pending",n.then(e=>{n.status="fulfilled",n.value=e},e=>{n.status="rejected",n.reason=e}),n)});function Ad(n){const e=new Set;e.add("constructor");let r=n.constructor.prototype;do for(const i of Reflect.ownKeys(r)){if(e.has(i))continue;typeof Reflect.getOwnPropertyDescriptor(r,i)?.value=="function"&&(e.add(i),n[i]=n[i].bind(n))}while((r=Reflect.getPrototypeOf(r))&&r!==Object.prototype)}function _b(n){return e=>Sb(e,n)&&kb(e,n)}function Sb(n,e){return e.resolved===void 0||n.resolved===e.resolved}function kb(n,e){const r=n.metadata;return e.metadata===void 0||Object.entries(e.metadata).every(([i,o])=>o===void 0||Eb(r[i],o))}function Eb(n,e){return e===null?n===void 0:td(e)?typeof n=="string"&&n.startsWith(e.startsWith):n===e}function bb(n){return e=>Cb(e,n)}function Cb(n,e){return(e.roomId===void 0||e.roomId===n.roomId)&&(e.kind===void 0||e.kind===n.kind)}function Tb(n){return n.deletedAt&&n.comments.length>0?{...n,comments:[]}:n.comments.some(r=>!r.deletedAt)?n:{...n,deletedAt:new Date,comments:[]}}var Ib=class Xg{#e;#t;#n;signal;constructor(){this.#t=ds.from([],(e,r)=>{const i=e.createdAt,o=r.createdAt;return i<o?!0:i===o?e.id<r.id:!1}),this.#n=ds.from([],(e,r)=>{const i=r.updatedAt,o=e.updatedAt;return i<o?!0:i===o?r.id<e.id:!1}),this.#e=new Map,this.signal=new vn(this)}clone(){const e=new Xg;return e.#e=new Map(this.#e),e.#t=this.#t.clone(),e.#n=this.#n.clone(),e}get(e){const r=this.getEvenIfDeleted(e);return r?.deletedAt?void 0:r}getEvenIfDeleted(e){return this.#e.get(e)}upsert(e){this.signal.mutate(()=>{e=Tb(e);const r=e.id,i=this.#e.get(r);if(i){if(i.deletedAt)return!1;this.#t.remove(i),this.#n.remove(i)}return e.deletedAt||(this.#t.add(e),this.#n.add(e)),this.#e.set(r,e),!0})}upsertIfNewer(e){const r=this.get(e.id);(!r||e.updatedAt>=r.updatedAt)&&this.upsert(e)}applyDelta(e,r){nt(()=>{for(const i of e)this.upsertIfNewer(i);for(const{id:i,deletedAt:o}of r)this.getEvenIfDeleted(i)&&this.delete(i,o)})}delete(e,r){const i=this.#e.get(e);i&&!i.deletedAt&&this.upsert({...i,deletedAt:r,updatedAt:r})}findMany(e,r,i){const o=i==="desc"?this.#n:this.#t,l=[];return e!==void 0&&l.push(c=>c.roomId===e),r!==void 0&&l.push(_b(r)),Array.from(o.filter(c=>l.every(d=>d(c))))}};function Zg(n,e){return dl([n,e??{}])}function ev(n){if("status"in n)return n;const e=n;return e.status="pending",e.then(r=>{e.status="fulfilled",e.value=r},r=>{e.status="rejected",e.reason=r}),e}var Rb=Promise.resolve(),nl=class{#e;signal;#t;#n;constructor(n){this.#e=new zt(ml),this.#t=n,this.#n=null,this.signal=this.#e.asReadonly(),Ad(this)}get(){return this.#e.get()}#r(n){const e=this.#e.get();e.data!==void 0&&this.#e.set(Kn({...e.data,...n}))}async#i(){const n=this.#e.get();if(!(!n.data?.cursor||n.data.isFetchingMore)){this.#r({isFetchingMore:!0});try{const e=await this.#t(n.data.cursor);this.#r({cursor:e,hasFetchedAll:e===null,fetchMoreError:void 0,isFetchingMore:!1})}catch(e){this.#r({isFetchingMore:!1,fetchMoreError:e})}}}fetchMore(){return this.#e.get().data?.cursor?(this.#n||(this.#n=this.#i().finally(()=>{this.#n=null})),this.#n):Rb}#s=null;waitUntilLoaded(){if(this.#s)return this.#s;const n=co(()=>this.#t(void 0),5,[5e3,5e3,1e4,15e3]),e=ev(n);return e.then(r=>{this.#e.set(Kn({cursor:r,hasFetchedAll:r===null,isFetchingMore:!1,fetchMoreError:void 0,fetchMore:this.fetchMore}))},r=>{this.#e.set(Qg(r)),setTimeout(()=>{this.#s=null,this.#e.set(ml)},5e3)}),this.#s=e,this.#s}},no=class{#e;signal;#t;constructor(n){this.#e=new zt(ml),this.signal=this.#e.asReadonly(),this.#t=n,Ad(this)}get(){return this.#e.get()}#n=null;waitUntilLoaded(){if(this.#n)return this.#n;const n=co(()=>this.#t(),5,[5e3,5e3,1e4,15e3]),e=ev(n);return e.then(()=>{this.#e.set(Kn(void 0))},r=>{this.#e.set(Qg(r)),setTimeout(()=>{this.#n=null,this.#e.set(ml)},5e3)}),this.#n=e,e}};function Ob(){const n=new vn(new Map);function e(h,g){n.mutate(m=>{const y=m.get(h);return y?(m.set(h,{...y,readAt:g}),!0):!1})}function r(h){n.mutate(g=>{for(const m of g.values())m.readAt=h})}function i(h){n.mutate(g=>g.delete(h))}function o(){n.mutate(h=>h.clear())}function l(h,g){n.mutate(m=>{let y=!1;for(const w of h){const R=m.get(w.id);R&&zb(R,w)===1||(m.set(w.id,w),y=!0)}for(const w of g)m.delete(w.id),y=!0;return y})}function c(h){n.mutate(g=>{const m=yb(g.values(),y=>y.kind==="thread"&&y.threadId===h.threadId);return m?(g.set(m.id,{...m,notifiedAt:h.createdAt,readAt:h.createdAt}),!0):!1})}function d(h){n.mutate(g=>{g.set(h.id,h)})}return{signal:n.asReadonly(),markAllRead:r,markRead:e,delete:i,applyDelta:l,clear:o,updateAssociatedNotification:c,upsert:d}}function Ab(n,e){const r=new vn(new Map);function i(c,d){r.mutate(h=>{let g=!1;for(const m of c)h.set(li(m),m),g=!0;for(const m of d)h.delete(li(m)),g=!0;return g})}function o(c){r.mutate(d=>{d.set(li(c),c)})}function l(c){r.mutate(d=>{d.delete(c)})}return{signal:Ye.from(r,n,(c,d)=>Mb(c,e,d)),applyDelta:i,create:o,delete:l}}function xb(n){const e=new vn(new Map);function r(i,o){e.mutate(l=>{l.set(i,o)})}return{signal:Ye.from(e,n,(i,o)=>$b(i,o)),update:r}}function Pb(){const n=new vn(new Ge(()=>new Map));function e(r,i){n.mutate(o=>{const l=o.getOrCreate(r);for(const c of i)l.set(c.id,c)})}return{signal:Ye.from(n,r=>Object.fromEntries([...r].map(([i,o])=>[i,Object.fromEntries(o)]))),update:e}}function Lb(){const n=new Ge(()=>new zt(new Set));function e(i){nt(()=>{for(const[o,l]of Object.entries(i)){const c=n.getOrCreate(o),d=new Set(c.get());for(const h of l)d.add(h);c.set(d)}})}function r(i){return n.getOrCreate(i)}return{getPermissionForRoom:r,update:e}}function Nb(n){const e=new zt(hl({}));function r(i){e.set(i)}return{signal:Ye.from(e,n,(i,o)=>Fb(i,o)),update:r}}function Db(n){const e=new zt([]),r=n[ve].createSyncSource();e.subscribe(()=>r.setSyncStatus(e.get().length>0?"synchronizing":"synchronized"));function i(l){const c=Rn(),d={...l,id:c};return e.set(h=>[...h,d]),c}function o(l){e.set(c=>c.filter(d=>d.id!==l))}return{signal:e.asReadonly(),add:i,remove:o}}var Ub=class{#e;threads;notifications;subscriptions;roomSubscriptionSettings;historyVersions;permissionHints;notificationSettings;optimisticUpdates;outputs;#t=null;#n=new Map;#r=null;#i=new Map;#s;constructor(n){this.#e=n[ve].as(),this.optimisticUpdates=Db(this.#e),this.permissionHints=Lb();const e=async()=>{const E=await this.#e.getNotificationSettings();this.notificationSettings.update(E)};this.notificationSettings=Nb(this.optimisticUpdates.signal),this.#s=new no(e),this.threads=new Ib,this.subscriptions=Ab(this.optimisticUpdates.signal,this.threads),this.notifications=Ob(),this.roomSubscriptionSettings=xb(this.optimisticUpdates.signal),this.historyVersions=Pb();const r=Ye.from(this.threads.signal,this.notifications.signal,this.optimisticUpdates.signal,(E,P,D)=>jb(E,P,D)),i=Ye.from(r,E=>E.threadsDB),o=Ye.from(r,E=>({sortedNotifications:E.sortedNotifications,notificationsById:E.notificationsById}),Pt),l=Ye.from(o,this.subscriptions.signal,(E,P)=>({subscriptions:P,notifications:E.sortedNotifications})),c=new Ge(E=>{const P=JSON.parse(E),D=new nl(async A=>{const C=await this.#e[ve].httpClient.getUserThreads_experimental({cursor:A,query:P});return this.updateThreadifications(C.threads,C.inboxNotifications,C.subscriptions),this.permissionHints.update(C.permissionHints),this.#r===null&&(this.#r=C.requestedAt),C.nextCursor});return{signal:Ye.from(()=>{const A=D.get();if(A.isLoading||A.error)return A;const C=this.outputs.threads.get().findMany(void 0,P??{},"desc"),$=A.data;return{isLoading:!1,threads:C,hasFetchedAll:$.hasFetchedAll,isFetchingMore:$.isFetchingMore,fetchMoreError:$.fetchMoreError,fetchMore:$.fetchMore}},ol),waitUntilLoaded:D.waitUntilLoaded}}),d=new Ge(E=>{const[P,D]=JSON.parse(E),b=new nl(async C=>{const $=await this.#e[ve].httpClient.getThreads({roomId:P,cursor:C,query:D});this.updateThreadifications($.threads,$.inboxNotifications,$.subscriptions),this.permissionHints.update($.permissionHints);const F=this.#n.get(P);return(F===void 0||F>$.requestedAt)&&this.#n.set(P,$.requestedAt),$.nextCursor});return{signal:Ye.from(()=>{const C=b.get();if(C.isLoading||C.error)return C;const $=this.outputs.threads.get().findMany(P,D??{},"asc"),F=C.data;return{isLoading:!1,threads:$,hasFetchedAll:F.hasFetchedAll,isFetchingMore:F.isFetchingMore,fetchMoreError:F.fetchMoreError,fetchMore:F.fetchMore}},ol),waitUntilLoaded:b.waitUntilLoaded}}),h=new Ge(E=>{const P=JSON.parse(E),D=new nl(async A=>{const C=await this.#e.getInboxNotifications({cursor:A,query:P});return this.updateThreadifications(C.threads,C.inboxNotifications,C.subscriptions),this.#t===null&&(this.#t=C.requestedAt),C.nextCursor});return{signal:Ye.from(()=>{const A=D.get();if(A.isLoading||A.error)return A;const C=[];P!==void 0&&C.push(bb(P));const $=this.outputs.notifications.get().sortedNotifications.filter(G=>C.every(le=>le(G))),F=A.data;return{isLoading:!1,inboxNotifications:$,hasFetchedAll:F.hasFetchedAll,isFetchingMore:F.isFetchingMore,fetchMoreError:F.fetchMoreError,fetchMore:F.fetchMore}},ol),waitUntilLoaded:D.waitUntilLoaded}}),g=new Ge(E=>{const P=new no(async()=>{const b=this.#e.getRoom(E);if(b===null)throw new Error(`Room '${E}' is not available on client`);const A=await b.getSubscriptionSettings();this.roomSubscriptionSettings.update(E,A)});return{signal:Ye.from(()=>{const b=P.get();return b.isLoading||b.error?b:Kn("settings",we(this.roomSubscriptionSettings.signal.get()[E]))},Pt),waitUntilLoaded:P.waitUntilLoaded}}),m=new Ge(E=>{const P=new no(async()=>{const b=this.#e.getRoom(E);if(b===null)throw new Error(`Room '${E}' is not available on client`);const A=await b[ve].listTextVersions();this.historyVersions.update(E,A.versions);const C=this.#i.get(E);(C===void 0||C>A.requestedAt)&&this.#i.set(E,A.requestedAt)});return{signal:Ye.from(()=>{const b=P.get();return b.isLoading||b.error?b:Kn("versions",Object.values(this.historyVersions.signal.get()[E]??{}))},Pt),waitUntilLoaded:P.waitUntilLoaded}}),y={signal:Ye.from(()=>{const E=this.#s.get();return E.isLoading||E.error?E:Kn("settings",we(this.notificationSettings.signal.get()))},Pt),waitUntilLoaded:this.#s.waitUntilLoaded},w=new Ge(E=>{const P=JSON.parse(E),D=new nl(async A=>(await this.#e[ve].ai.getChats({cursor:A,query:P})).nextCursor);return{signal:Ye.from(()=>{const A=D.get();return A.isLoading||A.error?A:{isLoading:!1,chats:this.#e[ve].ai.queryChats(P),hasFetchedAll:A.data.hasFetchedAll,isFetchingMore:A.data.isFetchingMore,fetchMore:A.data.fetchMore,fetchMoreError:A.data.fetchMoreError}},Pt),waitUntilLoaded:D.waitUntilLoaded}}),R=new Ge(E=>{const P=new no(async()=>{await this.#e[ve].ai.getMessageTree(E)});return new Ge(D=>({signal:Ye.from(()=>{const A=P.get();return A.isLoading||A.error?A:Kn("messages",this.#e[ve].ai.signals.getChatMessagesForBranch(E,D??void 0).get())}),waitUntilLoaded:P.waitUntilLoaded}))}),x=new Ge(E=>{const P=new no(async()=>{await this.#e[ve].ai.getOrCreateChat(E)});return{signal:Ye.from(()=>{if(this.#e[ve].ai.getChatById(E)===void 0){const A=P.get();return A.isLoading||A.error?A:Kn("chat",we(this.#e[ve].ai.getChatById(E)))}else return Kn("chat",we(this.#e[ve].ai.getChatById(E)))},Pt),waitUntilLoaded:P.waitUntilLoaded}});this.outputs={threadifications:r,threads:i,loadingRoomThreads:d,loadingUserThreads:c,notifications:o,loadingNotifications:h,roomSubscriptionSettingsByRoomId:g,versionsByRoomId:m,notificationSettings:y,threadSubscriptions:l,aiChats:w,messagesByChatId:R,aiChatById:x},Ad(this)}markInboxNotificationRead(n,e,r){nt(()=>{this.optimisticUpdates.remove(r),this.notifications.markRead(n,e)})}markAllInboxNotificationsRead(n,e){nt(()=>{this.optimisticUpdates.remove(n),this.notifications.markAllRead(e)})}deleteInboxNotification(n,e){nt(()=>{this.optimisticUpdates.remove(e),this.notifications.delete(n)})}deleteAllInboxNotifications(n){nt(()=>{this.optimisticUpdates.remove(n),this.notifications.clear()})}createSubscription(n,e){nt(()=>{this.optimisticUpdates.remove(e),this.subscriptions.create(n)})}deleteSubscription(n,e){nt(()=>{this.optimisticUpdates.remove(e),this.subscriptions.delete(n)})}createThread(n,e){nt(()=>{this.optimisticUpdates.remove(n),this.threads.upsert(e)})}#o(n,e,r,i){nt(()=>{e!==null&&this.optimisticUpdates.remove(e);const o=this.threads,l=o.get(n);l&&(i&&l.updatedAt>i||o.upsert(r(l)))})}patchThread(n,e,r,i){return this.#o(n,e,o=>({...o,...Eo(r)}),i)}addReaction(n,e,r,i,o){this.#o(n,e,l=>nv(l,r,i),o)}removeReaction(n,e,r,i,o,l){this.#o(n,e,c=>rv(c,r,i,o,l),l)}deleteThread(n,e){return this.#o(n,e,r=>({...r,updatedAt:new Date,deletedAt:new Date}))}createComment(n,e){nt(()=>{this.optimisticUpdates.remove(e);const r=this.threads.get(n.threadId);r&&(this.threads.upsert(gl(r,n)),this.notifications.updateAssociatedNotification(n))})}editComment(n,e,r){return this.#o(n,e,i=>gl(i,r))}deleteComment(n,e,r,i){return this.#o(n,e,o=>tv(o,r,i),i)}updateThreadifications(n,e,r,i=[],o=[],l=[]){nt(()=>{this.threads.applyDelta(n,i),this.notifications.applyDelta(e,o),this.subscriptions.applyDelta(r,l)})}updateRoomSubscriptionSettings(n,e,r){nt(()=>{this.optimisticUpdates.remove(e),this.roomSubscriptionSettings.update(n,r)})}async fetchNotificationsDeltaUpdate(n){const e=this.#t;if(e===null)return;const r=await this.#e.getInboxNotificationsSince({since:e,signal:n});e<r.requestedAt&&(this.#t=r.requestedAt),this.updateThreadifications(r.threads.updated,r.inboxNotifications.updated,r.subscriptions.updated,r.threads.deleted,r.inboxNotifications.deleted,r.subscriptions.deleted)}async fetchRoomThreadsDeltaUpdate(n,e){const r=this.#n.get(n);if(r===void 0)return;const i=await this.#e[ve].httpClient.getThreadsSince({roomId:n,since:r,signal:e});this.updateThreadifications(i.threads.updated,i.inboxNotifications.updated,i.subscriptions.updated,i.threads.deleted,i.inboxNotifications.deleted,i.subscriptions.deleted),this.permissionHints.update(i.permissionHints),r<i.requestedAt&&this.#n.set(n,i.requestedAt)}async fetchUserThreadsDeltaUpdate(n){const e=this.#r;if(e===null)return;const r=await this.#e[ve].httpClient.getUserThreadsSince_experimental({since:e,signal:n});e<r.requestedAt&&(this.#t=r.requestedAt),this.updateThreadifications(r.threads.updated,r.inboxNotifications.updated,r.subscriptions.updated,r.threads.deleted,r.inboxNotifications.deleted,r.subscriptions.deleted),this.permissionHints.update(r.permissionHints)}async fetchRoomVersionsDeltaUpdate(n,e){const r=this.#i.get(n);if(r===void 0)return;const o=await we(this.#e.getRoom(n),`Room with id ${n} is not available on client`)[ve].listTextVersionsSince({since:r,signal:e});this.historyVersions.update(n,o.versions),r<o.requestedAt&&this.#i.set(n,o.requestedAt)}async refreshRoomSubscriptionSettings(n,e){const i=await we(this.#e.getRoom(n),`Room with id ${n} is not available on client`).getSubscriptionSettings({signal:e});this.roomSubscriptionSettings.update(n,i)}async refreshNotificationSettings(n){const e=await this.#e.getNotificationSettings({signal:n});this.notificationSettings.update(e)}updateNotificationSettings_confirmOptimisticUpdate(n,e){nt(()=>{this.optimisticUpdates.remove(e),this.notificationSettings.update(n)})}};function jb(n,e,r){const i=n.clone();let o=Object.fromEntries(e);for(const c of r)switch(c.type){case"create-thread":{i.upsert(c.thread);break}case"edit-thread-metadata":{const d=i.get(c.threadId);if(d===void 0||d.updatedAt>c.updatedAt)break;i.upsert({...d,updatedAt:c.updatedAt,metadata:{...d.metadata,...c.metadata}});break}case"mark-thread-as-resolved":{const d=i.get(c.threadId);if(d===void 0)break;i.upsert({...d,resolved:!0});break}case"mark-thread-as-unresolved":{const d=i.get(c.threadId);if(d===void 0)break;i.upsert({...d,resolved:!1});break}case"create-comment":{const d=i.get(c.comment.threadId);if(d===void 0)break;i.upsert(gl(d,c.comment));const h=Object.values(o).find(g=>g.kind==="thread"&&g.threadId===d.id);if(h===void 0)break;o[h.id]={...h,notifiedAt:c.comment.createdAt,readAt:c.comment.createdAt};break}case"edit-comment":{const d=i.get(c.comment.threadId);if(d===void 0)break;i.upsert(gl(d,c.comment));break}case"delete-comment":{const d=i.get(c.threadId);if(d===void 0)break;i.upsert(tv(d,c.commentId,c.deletedAt));break}case"delete-thread":{const d=i.get(c.threadId);if(d===void 0)break;i.upsert({...d,deletedAt:c.deletedAt,updatedAt:c.deletedAt,comments:[]});break}case"add-reaction":{const d=i.get(c.threadId);if(d===void 0)break;i.upsert(nv(d,c.commentId,c.reaction));break}case"remove-reaction":{const d=i.get(c.threadId);if(d===void 0)break;i.upsert(rv(d,c.commentId,c.emoji,c.userId,c.removedAt));break}case"mark-inbox-notification-as-read":{const d=o[c.inboxNotificationId];if(d===void 0)break;o[c.inboxNotificationId]={...d,readAt:c.readAt};break}case"mark-all-inbox-notifications-as-read":{for(const d in o){const h=o[d];if(h===void 0)break;o[d]={...h,readAt:c.readAt}}break}case"delete-inbox-notification":{delete o[c.inboxNotificationId];break}case"delete-all-inbox-notifications":{o={};break}}return{sortedNotifications:Object.values(o).filter(c=>c.kind==="thread"?i.get(c.threadId)!==void 0:!0).sort((c,d)=>d.notifiedAt.getTime()-c.notifiedAt.getTime()),notificationsById:o,threadsDB:i}}function $b(n,e){const r=Object.fromEntries(n);for(const i of e)switch(i.type){case"update-room-subscription-settings":{const o=r[i.roomId];if(o===void 0)break;r[i.roomId]={...o,...i.settings}}}return r}function Mb(n,e,r){const i=Object.fromEntries(n);for(const o of r)switch(o.type){case"update-room-subscription-settings":{if(!o.settings.threads)continue;const l=e.findMany(o.roomId,void 0,"desc");for(const c of l){const d=li("thread",c.id);switch(o.settings.threads){case"all":{i[d]={kind:"thread",subjectId:c.id,createdAt:new Date};break}case"none":{delete i[d];break}case"replies_and_mentions":break;default:kt(o.settings.threads,"Unexpected thread subscription settings.")}}}}return i}function Fb(n,e){let r=n;for(const i of e)i.type==="update-notification-settings"&&(r=aE(r,i.settings));return r}function zb(n,e){return n.notifiedAt>e.notifiedAt?1:n.notifiedAt<e.notifiedAt?-1:n.readAt&&e.readAt?n.readAt>e.readAt?1:n.readAt<e.readAt?-1:0:n.readAt||e.readAt?n.readAt?1:-1:0}function gl(n,e){if(n.deletedAt!==void 0)return n;if(e.threadId!==n.id)return Ar.warn(`Comment ${e.id} does not belong to thread ${n.id}`),n;const r=n.comments.find(i=>i.id===e.id);if(r===void 0){const i=new Date(Math.max(n.updatedAt.getTime(),e.createdAt.getTime()));return{...n,updatedAt:i,comments:[...n.comments,e]}}if(r.deletedAt!==void 0)return n;if(r.editedAt===void 0||e.editedAt===void 0||r.editedAt<=e.editedAt){const i=n.comments.map(l=>l.id===e.id?e:l);return{...n,updatedAt:new Date(Math.max(n.updatedAt.getTime(),e.editedAt?.getTime()||e.createdAt.getTime())),comments:i}}return n}function tv(n,e,r){if(n.deletedAt!==void 0)return n;const i=n.comments.find(l=>l.id===e);if(i===void 0||i.deletedAt!==void 0)return n;const o=n.comments.map(l=>l.id===e?{...l,deletedAt:r,body:void 0,attachments:[]}:l);return o.every(l=>l.deletedAt!==void 0)?{...n,deletedAt:r,updatedAt:r}:{...n,updatedAt:r,comments:o}}function nv(n,e,r){if(n.deletedAt!==void 0)return n;const i=n.comments.find(l=>l.id===e);if(i===void 0||i.deletedAt!==void 0)return n;const o=n.comments.map(l=>l.id===e?{...l,reactions:Bb(l.reactions,r)}:l);return{...n,updatedAt:new Date(Math.max(r.createdAt.getTime(),n.updatedAt.getTime())),comments:o}}function rv(n,e,r,i,o){if(n.deletedAt!==void 0)return n;const l=n.comments.find(d=>d.id===e);if(l===void 0||l.deletedAt!==void 0)return n;const c=n.comments.map(d=>d.id===e?{...d,reactions:d.reactions.map(h=>h.emoji===r?{...h,users:h.users.filter(g=>g.id!==i)}:h).filter(h=>h.users.length>0)}:d);return{...n,updatedAt:new Date(Math.max(o.getTime(),n.updatedAt.getTime())),comments:c}}function Bb(n,e){const r=n.find(i=>i.emoji===e.emoji);return r===void 0?[...n,{emoji:e.emoji,createdAt:e.createdAt,users:[{id:e.userId}]}]:r.users.some(i=>i.id===e.userId)===!1?n.map(i=>i.emoji===e.emoji?{...i,users:[...i.users,{id:e.userId}]}:i):n}function sv(n){return new Error(`resolveUsers didn't return anything for user '${n}'`)}function iv(n){return new Error(`resolveRoomsInfo didn't return anything for room '${n}'`)}function ov(n){return new Error(`resolveGroupsInfo didn't return anything for group '${n}'`)}var cm=new WeakMap;function Vb(n,e){return n===void 0||n?.isLoading?n??{isLoading:!0}:n.error?n:n.data?{isLoading:!1,user:n.data}:{isLoading:!1,error:sv(e)}}function Hb(n,e){return n===void 0||n?.isLoading?n??{isLoading:!0}:n.error?n:n.data?{isLoading:!1,info:n.data}:{isLoading:!1,error:iv(e)}}function Wb(n,e){return n===void 0||n?.isLoading?n??{isLoading:!0}:n.error?n:n.data?{isLoading:!1,info:n.data}:{isLoading:!1,error:ov(e)}}function Kb(n){let e=cm.get(n);return e||(e=new Ub(n),cm.set(n,e)),e}function qb(n,e){const r=n[ve].usersStore,i=k.useCallback(()=>r.getItemState(e),[r,e]),o=k.useCallback(c=>Vb(c,e),[e]),l=Ur(r.subscribe,i,i,o,Pt);return k.useEffect(()=>void r.enqueue(e)),l}function Gb(n,e){const r=n[ve].usersStore,i=k.useCallback(()=>r.getItemState(e),[r,e]),o=i();if(!o||o.isLoading)throw r.enqueue(e);if(o.error)throw o.error;if(!o.data)throw sv(e);const l=k.useSyncExternalStore(r.subscribe,i,i);return l.isLoading,l.error,{isLoading:!1,user:l.data,error:void 0}}function Jb(n,e){const r=n[ve].roomsInfoStore,i=k.useCallback(()=>r.getItemState(e),[r,e]),o=k.useCallback(c=>Hb(c,e),[e]),l=Ur(r.subscribe,i,i,o,Pt);return k.useEffect(()=>void r.enqueue(e)),l}function Qb(n,e){const r=n[ve].roomsInfoStore,i=k.useCallback(()=>r.getItemState(e),[r,e]),o=i();if(!o||o.isLoading)throw r.enqueue(e);if(o.error)throw o.error;if(!o.data)throw iv(e);const l=k.useSyncExternalStore(r.subscribe,i,i);return l.isLoading,l.error,l.data,{isLoading:!1,info:l.data,error:void 0}}function Yb(n,e){const r=n[ve].groupsInfoStore,i=k.useCallback(()=>r.getItemState(e),[r,e]),o=k.useCallback(c=>Wb(c,e),[e]),l=Ur(r.subscribe,i,i,o,Pt);return k.useEffect(()=>void r.enqueue(e)),l}function Xb(n,e){const r=n[ve].groupsInfoStore,i=k.useCallback(()=>r.getItemState(e),[r,e]),o=i();if(!o||o.isLoading)throw r.enqueue(e);if(o.error)throw o.error;if(!o.data)throw ov(e);const l=k.useSyncExternalStore(r.subscribe,i,i);return l.isLoading,l.error,l.data,{isLoading:!1,info:l.data,error:void 0}}function Zb(n){const e=()=>n;function r(i){return n1(n,i)}return{classic:{useClient:e,useUser:i=>qb(n,i),useRoomInfo:i=>Jb(n,i),useGroupInfo:i=>Yb(n,i),useIsInsideRoom:am,useErrorListener:dm,useSyncStatus:r,RegisterAiKnowledge:lm,RegisterAiTool:um},suspense:{useClient:e,useUser:i=>Gb(n,i),useRoomInfo:i=>Qb(n,i),useGroupInfo:i=>Xb(n,i),useIsInsideRoom:am,useErrorListener:dm,useSyncStatus:r,RegisterAiKnowledge:lm,RegisterAiTool:um}}}function e1(n){const e=Gg();if(!n?.allowNesting&&e!==null)throw new Error("You cannot nest multiple LiveblocksProvider instances in the same React tree.")}function t1(n){return e1(n),ye.jsx(qg.Provider,{value:n.client,children:n.children})}function n1(n,e){return Yg(e?.smooth??!1)?s1(n):r1(n)}function r1(n){return k.useSyncExternalStore(n.events.syncStatus.subscribe,n.getSyncStatus,n.getSyncStatus)}function s1(n){const e=n.getSyncStatus,[r,i]=k.useState(e),o=bo(e());return k.useEffect(()=>{let l;const c=n.events.syncStatus.subscribe(()=>{const d=e();o.current==="synchronizing"&&d==="synchronized"?l=setTimeout(()=>i(d),ls.SMOOTH_DELAY):(clearTimeout(l),i(d))});return()=>{clearTimeout(l),c()}},[n,e,o]),r}function dm(n){const e=ze(),r=bo(n);k.useEffect(()=>e.events.error.subscribe(i=>r.current(i)),[e,r])}function i1(n,e){if(n===!1||!e.threads||!(typeof window<"u"))return;const o=window.location.hash.slice(1);if(!o.startsWith("cm_"))return;const l=document.getElementById(o);l===null||!e.threads.flatMap(h=>h.comments).some(h=>h.id===o)||l.scrollIntoView()}function o1(n,e){k.useEffect(()=>{i1(n,e)},[e.isLoading])}var a1=()=>{},av=n=>n,l1=Object.freeze([]);function u1(){return l1}function xd(){return null}function c1(n){return n.map(e=>e.connectionId)}function d1(n){const e="This mutation cannot be used until",r=`${e} connected to the Liveblocks room`,i=`${e} storage has been loaded`;return{get storage(){const o=n.getStorageSnapshot();if(o===null)throw new Error(i);return o},get self(){const o=n.getSelf();if(o===null)throw new Error(r);return o},get others(){const o=n.getOthers();if(n.getSelf()===null)throw new Error(r);return o},setMyPresence:n.updatePresence}}function pi(n){const e=n[ve].currentUserId.get();return e===void 0?"anonymous":e}var fm=new WeakMap,hm=new WeakMap;function f1(n){let e=hm.get(n);return e||(e=p1(n),hm.set(n,e)),e}function rt(n){let e=fm.get(n);return e||(e=h1(n),fm.set(n,e)),e}function h1(n){const e=Kb(n);function r(c,d,h){if(e.optimisticUpdates.remove(c),h instanceof go){if(h.status===403){const g=[h.message,h.details?.suggestion,h.details?.docs].filter(Boolean).join(`
`);Ar.error(g)}n[ve].emitError(d,h)}else throw h}const i=new Ge(c=>$c(async d=>{try{return await e.fetchRoomThreadsDeltaUpdate(c,d)}catch(h){throw Ar.warn(`Polling new threads for '${c}' failed: ${String(h)}`),h}},ls.ROOM_THREADS_POLL_INTERVAL,{maxStaleTimeMs:ls.ROOM_THREADS_MAX_STALE_TIME})),o=new Ge(c=>$c(async d=>{try{return await e.fetchRoomVersionsDeltaUpdate(c,d)}catch(h){throw Ar.warn(`Polling new history versions for '${c}' failed: ${String(h)}`),h}},ls.HISTORY_VERSIONS_POLL_INTERVAL,{maxStaleTimeMs:ls.HISTORY_VERSIONS_MAX_STALE_TIME})),l=new Ge(c=>$c(async d=>{try{return await e.refreshRoomSubscriptionSettings(c,d)}catch(h){throw Ar.warn(`Polling subscription settings for '${c}' failed: ${String(h)}`),h}},ls.ROOM_SUBSCRIPTION_SETTINGS_POLL_INTERVAL,{maxStaleTimeMs:ls.ROOM_SUBSCRIPTION_SETTINGS_MAX_STALE_TIME}));return{store:e,onMutationFailure:r,pollThreadsForRoomId:c=>{const d=i.getOrCreate(c);d&&(d.markAsStale(),d.pollNowIfStale())},getOrCreateThreadsPollerForRoomId:i.getOrCreate.bind(i),getOrCreateVersionsPollerForRoomId:o.getOrCreate.bind(o),getOrCreateSubscriptionSettingsPollerForRoomId:l.getOrCreate.bind(l)}}function p1(n){function e(o){return ye.jsx(t1,{client:n,allowNesting:!0,children:ye.jsx(m1,{...o})})}const r=Zb(n),i={RoomContext:pl,RoomProvider:e,useRoom:Ce,useStatus:pm,useBroadcastEvent:mm,useOthersListener:gm,useLostConnectionListener:vm,useEventListener:ym,useHistory:vl,useUndo:wm,useRedo:_m,useCanRedo:km,useCanUndo:Sm,useStorageRoot:Cm,useStorage:hv,useSelf:lv,useMyPresence:Em,useUpdateMyPresence:bm,useOthers:Io,useOthersMapped:uv,useOthersConnectionIds:cv,useOther:dv,useMutation:Tm,useThreads:pv,useCreateThread:Im,useDeleteThread:Rm,useEditThreadMetadata:Om,useMarkThreadAsResolved:Um,useMarkThreadAsUnresolved:jm,useSubscribeToThread:$m,useUnsubscribeFromThread:Mm,useCreateComment:Am,useEditComment:xm,useDeleteComment:Pm,useAddReaction:Lm,useRemoveReaction:Nm,useMarkThreadAsRead:Dm,useThreadSubscription:Fm,useAttachmentUrl:z1,useHistoryVersions:yv,useHistoryVersionData:A1,useRoomSubscriptionSettings:vv,useUpdateRoomSubscriptionSettings:ld,...r.classic,suspense:{RoomContext:pl,RoomProvider:e,useRoom:Ce,useStatus:pm,useBroadcastEvent:mm,useOthersListener:gm,useLostConnectionListener:vm,useEventListener:ym,useHistory:vl,useUndo:wm,useRedo:_m,useCanRedo:km,useCanUndo:Sm,useStorageRoot:Cm,useStorage:$1,useSelf:P1,useMyPresence:Em,useUpdateMyPresence:bm,useOthers:L1,useOthersMapped:D1,useOthersConnectionIds:N1,useOther:U1,useMutation:Tm,useThreads:M1,useCreateThread:Im,useDeleteThread:Rm,useEditThreadMetadata:Om,useMarkThreadAsResolved:Um,useMarkThreadAsUnresolved:jm,useSubscribeToThread:$m,useUnsubscribeFromThread:Mm,useCreateComment:Am,useEditComment:xm,useDeleteComment:Pm,useAddReaction:Lm,useRemoveReaction:Nm,useMarkThreadAsRead:Dm,useThreadSubscription:Fm,useAttachmentUrl:V1,useHistoryVersions:x1,useRoomSubscriptionSettings:O1,useUpdateRoomSubscriptionSettings:ld,...r.suspense}};return Object.defineProperty(i,ve,{enumerable:!1})}function m1(n){const e=ze(),[r]=k.useState(()=>new Map),i=k.useCallback((o,l)=>{const c=r.get(o);if(c)return c;const d=e.enterRoom(o,l),h=d.leave;return d.leave=()=>{h(),r.delete(o)},r.set(o,d),d},[e,r]);return ye.jsx(g1,{...n,stableEnterRoom:i})}function g1(n){const e=ze(),{id:r,stableEnterRoom:i}=n,o=Yg({initialPresence:n.initialPresence,initialStorage:n.initialStorage,autoConnect:n.autoConnect??typeof window<"u"},r),[{room:l},c]=k.useState(()=>i(r,{...o,autoConnect:!1}));return k.useEffect(()=>{const{store:d}=rt(e);async function h(g){if(g.type===Hn.THREAD_DELETED){d.deleteThread(g.threadId,null);return}const m=await l.getThread(g.threadId);if(!m.thread){d.deleteThread(g.threadId,null);return}const{thread:y,inboxNotification:w,subscription:R}=m,x=d.outputs.threads.get().getEvenIfDeleted(g.threadId);switch(g.type){case Hn.COMMENT_EDITED:case Hn.THREAD_METADATA_UPDATED:case Hn.THREAD_UPDATED:case Hn.COMMENT_REACTION_ADDED:case Hn.COMMENT_REACTION_REMOVED:case Hn.COMMENT_DELETED:if(!x)break;d.updateThreadifications([y],w?[w]:[],R?[R]:[]);break;case Hn.COMMENT_CREATED:d.updateThreadifications([y],w?[w]:[],R?[R]:[]);break}}return l.events.comments.subscribe(g=>void h(g))},[e,l]),k.useEffect(()=>{const d=i(r,o);c(d);const{room:h,leave:g}=d;return o.autoConnect&&h.connect(),()=>{g()}},[r,o,i]),ye.jsx(pl.Provider,{value:l,children:n.children})}function Ce(n){const e=Jg();if(e===null&&!n?.allowOutsideRoom)throw new Error("RoomProvider is missing from the React tree.");return e}function pm(){const n=Ce(),e=n.events.status.subscribe,r=n.getStatus,i=n.getStatus;return k.useSyncExternalStore(e,r,i)}function mm(){const n=Ce();return k.useCallback((e,r={shouldQueueEventIfNotReady:!1})=>{n.broadcastEvent(e,r)},[n])}function gm(n){const e=Ce(),r=bo(n);k.useEffect(()=>e.events.others.subscribe(i=>r.current(i)),[e,r])}function vm(n){const e=Ce(),r=bo(n);k.useEffect(()=>e.events.lostConnection.subscribe(i=>r.current(i)),[e,r])}function ym(n){const e=Ce(),r=bo(n);k.useEffect(()=>{const i=o=>{r.current(o)};return e.events.customEvent.subscribe(i)},[e,r])}function vl(){return Ce().history}function wm(){return vl().undo}function _m(){return vl().redo}function Sm(){const n=Ce(),e=n.events.history.subscribe,r=n.history.canUndo;return k.useSyncExternalStore(e,r,r)}function km(){const n=Ce(),e=n.events.history.subscribe,r=n.history.canRedo;return k.useSyncExternalStore(e,r,r)}function lv(n,e){const r=Ce(),i=r.events.self.subscribe,o=r.getSelf,l=n??av,c=k.useCallback(h=>h!==null?l(h):null,[l]);return Ur(i,o,xd,c,e)}function Em(){const n=Ce(),e=n.events.myPresence.subscribe,r=n.getPresence,i=k.useSyncExternalStore(e,r,r),o=n.updatePresence;return[i,o]}function bm(){return Ce().updatePresence}function Io(n,e){const r=Ce(),i=r.events.others.subscribe,o=r.getOthers;return Ur(i,o,u1,n??av,e)}function uv(n,e){const r=k.useCallback(o=>o.map(l=>[l.connectionId,n(l)]),[n]),i=k.useCallback((o,l)=>{const c=e??Object.is;return o.length===l.length&&o.every((d,h)=>{const g=l[h];return d[0]===g[0]&&c(d[1],g[1])})},[e]);return Io(r,i)}function cv(){return Io(c1,Pt)}var rl=Symbol();function dv(n,e,r){const i=k.useCallback(c=>{const d=c.find(h=>h.connectionId===n);return d!==void 0?e(d):rl},[n,e]),o=k.useCallback((c,d)=>c===rl||d===rl?c===d:(r??Object.is)(c,d),[r]),l=Io(i,o);if(l===rl)throw new Error(`No such other user with connection id ${n} exists`);return l}function fv(){const n=Ce(),e=n.events.storageDidLoad.subscribeOnce,r=n.getStorageSnapshot,i=xd;return k.useSyncExternalStore(e,r,i)}function Cm(){return[fv()]}function hv(n,e){const r=Ce(),i=fv(),o=k.useCallback(h=>h!==null?n(h):null,[n]),l=k.useCallback(h=>i!==null?r.subscribe(i,h,{isDeep:!0}):a1,[r,i]),c=k.useCallback(()=>i===null?null:i.toImmutable(),[i]);return Ur(l,c,xd,o,e)}function Tm(n,e){const r=Ce();return k.useMemo(()=>(...i)=>r.batch(()=>n(d1(r),...i)),[r,...e])}function pv(n={}){const{scrollOnLoad:e=!0}=n,r=ze(),i=Ce(),{store:o,getOrCreateThreadsPollerForRoomId:l}=rt(r),c=Zg(i.id,n.query),d=l(i.id);k.useEffect(()=>void o.outputs.loadingRoomThreads.getOrCreate(c).waitUntilLoaded()),k.useEffect(()=>(d.inc(),d.pollNowIfStale(),()=>d.dec()),[d]);const h=Cl(o.outputs.loadingRoomThreads.getOrCreate(c).signal);return o1(e,h),h}function Im(){return v1(Ce().id)}function v1(n){const e=ze();return k.useCallback(r=>{const i=r.body,o=r.metadata??{},l=r.attachments,c=xg(),d=fl(),h=new Date,g={id:d,threadId:c,roomId:n,createdAt:h,type:"comment",userId:pi(e),body:i,reactions:[],attachments:l??[]},m={id:c,type:"thread",createdAt:h,updatedAt:h,roomId:n,metadata:o,comments:[g],resolved:!1},{store:y,onMutationFailure:w}=rt(e),R=y.optimisticUpdates.add({type:"create-thread",thread:m,roomId:n}),x=l?.map(E=>E.id);return e[ve].httpClient.createThread({roomId:n,threadId:c,commentId:d,body:i,metadata:o,attachmentIds:x}).then(E=>{y.createThread(R,E)},E=>w(R,{type:"CREATE_THREAD_ERROR",roomId:n,threadId:c,commentId:d,body:i,metadata:o},E)),m},[e,n])}function Rm(){return y1(Ce().id)}function y1(n){const e=ze();return k.useCallback(r=>{const{store:i,onMutationFailure:o}=rt(e),l=pi(e);if(i.outputs.threads.get().get(r)?.comments?.[0]?.userId!==l)throw new Error("Only the thread creator can delete the thread");const d=i.optimisticUpdates.add({type:"delete-thread",roomId:n,threadId:r,deletedAt:new Date});e[ve].httpClient.deleteThread({roomId:n,threadId:r}).then(()=>{i.deleteThread(r,d)},h=>o(d,{type:"DELETE_THREAD_ERROR",roomId:n,threadId:r},h))},[e,n])}function Om(){return w1(Ce().id)}function w1(n){const e=ze();return k.useCallback(r=>{if(!r.metadata)return;const i=r.threadId,o=r.metadata,l=new Date,{store:c,onMutationFailure:d}=rt(e),h=c.optimisticUpdates.add({type:"edit-thread-metadata",metadata:o,threadId:i,updatedAt:l});e[ve].httpClient.editThreadMetadata({roomId:n,threadId:i,metadata:o}).then(g=>c.patchThread(i,h,{metadata:g},l),g=>d(h,{type:"EDIT_THREAD_METADATA_ERROR",roomId:n,threadId:i,metadata:o},g))},[e,n])}function Am(){return _1(Ce().id)}function _1(n){const e=ze();return k.useCallback(({threadId:r,body:i,attachments:o})=>{const l=fl(),d={id:l,threadId:r,roomId:n,type:"comment",createdAt:new Date,userId:pi(e),body:i,reactions:[],attachments:o??[]},{store:h,onMutationFailure:g}=rt(e),m=h.optimisticUpdates.add({type:"create-comment",comment:d}),y=o?.map(w=>w.id);return e[ve].httpClient.createComment({roomId:n,threadId:r,commentId:l,body:i,attachmentIds:y}).then(w=>{h.createComment(w,m)},w=>g(m,{type:"CREATE_COMMENT_ERROR",roomId:n,threadId:r,commentId:l,body:i},w)),d},[e,n])}function xm(){return S1(Ce().id)}function S1(n){const e=ze();return k.useCallback(({threadId:r,commentId:i,body:o,attachments:l})=>{const c=new Date,{store:d,onMutationFailure:h}=rt(e),g=d.outputs.threads.get().getEvenIfDeleted(r);if(g===void 0){Ar.warn(`Internal unexpected behavior. Cannot edit comment in thread "${r}" because the thread does not exist in the cache.`);return}const m=g.comments.find(R=>R.id===i);if(m===void 0||m.deletedAt!==void 0){Ar.warn(`Internal unexpected behavior. Cannot edit comment "${i}" in thread "${r}" because the comment does not exist in the cache.`);return}const y=d.optimisticUpdates.add({type:"edit-comment",comment:{...m,editedAt:c,body:o,attachments:l??[]}}),w=l?.map(R=>R.id);e[ve].httpClient.editComment({roomId:n,threadId:r,commentId:i,body:o,attachmentIds:w}).then(R=>{d.editComment(r,y,R)},R=>h(y,{type:"EDIT_COMMENT_ERROR",roomId:n,threadId:r,commentId:i,body:o},R))},[e,n])}function Pm(){return k1(Ce().id)}function k1(n){const e=ze();return k.useCallback(({threadId:r,commentId:i})=>{const o=new Date,{store:l,onMutationFailure:c}=rt(e),d=l.optimisticUpdates.add({type:"delete-comment",threadId:r,commentId:i,deletedAt:o,roomId:n});e[ve].httpClient.deleteComment({roomId:n,threadId:r,commentId:i}).then(()=>{l.deleteComment(r,d,i,o)},h=>c(d,{type:"DELETE_COMMENT_ERROR",roomId:n,threadId:r,commentId:i},h))},[e,n])}function Lm(){return E1(Ce().id)}function E1(n){const e=ze();return k.useCallback(({threadId:r,commentId:i,emoji:o})=>{const l=new Date,c=pi(e),{store:d,onMutationFailure:h}=rt(e),g=d.optimisticUpdates.add({type:"add-reaction",threadId:r,commentId:i,reaction:{emoji:o,userId:c,createdAt:l}});e[ve].httpClient.addReaction({roomId:n,threadId:r,commentId:i,emoji:o}).then(m=>{d.addReaction(r,g,i,m,l)},m=>h(g,{type:"ADD_REACTION_ERROR",roomId:n,threadId:r,commentId:i,emoji:o},m))},[e,n])}function Nm(){return b1(Ce().id)}function b1(n){const e=ze();return k.useCallback(({threadId:r,commentId:i,emoji:o})=>{const l=pi(e),c=new Date,{store:d,onMutationFailure:h}=rt(e),g=d.optimisticUpdates.add({type:"remove-reaction",threadId:r,commentId:i,emoji:o,userId:l,removedAt:c});e[ve].httpClient.removeReaction({roomId:n,threadId:r,commentId:i,emoji:o}).then(()=>{d.removeReaction(r,g,i,o,l,c)},m=>h(g,{type:"REMOVE_REACTION_ERROR",roomId:n,threadId:r,commentId:i,emoji:o},m))},[e,n])}function Dm(){return C1(Ce().id)}function C1(n){const e=ze();return k.useCallback(r=>{const{store:i,onMutationFailure:o}=rt(e),l=Object.values(i.outputs.notifications.get().notificationsById).find(h=>h.kind==="thread"&&h.threadId===r);if(!l)return;const c=new Date,d=i.optimisticUpdates.add({type:"mark-inbox-notification-as-read",inboxNotificationId:l.id,readAt:c});e[ve].httpClient.markRoomInboxNotificationAsRead({roomId:n,inboxNotificationId:l.id}).then(()=>{i.markInboxNotificationRead(l.id,c,d)},h=>{o(d,{type:"MARK_INBOX_NOTIFICATION_AS_READ_ERROR",roomId:n,inboxNotificationId:l.id},h)})},[e,n])}function Um(){return T1(Ce().id)}function T1(n){const e=ze();return k.useCallback(r=>{const i=new Date,{store:o,onMutationFailure:l}=rt(e),c=o.optimisticUpdates.add({type:"mark-thread-as-resolved",threadId:r,updatedAt:i});e[ve].httpClient.markThreadAsResolved({roomId:n,threadId:r}).then(()=>{o.patchThread(r,c,{resolved:!0},i)},d=>l(c,{type:"MARK_THREAD_AS_RESOLVED_ERROR",roomId:n,threadId:r},d))},[e,n])}function jm(){return I1(Ce().id)}function I1(n){const e=ze();return k.useCallback(r=>{const i=new Date,{store:o,onMutationFailure:l}=rt(e),c=o.optimisticUpdates.add({type:"mark-thread-as-unresolved",threadId:r,updatedAt:i});e[ve].httpClient.markThreadAsUnresolved({roomId:n,threadId:r}).then(()=>{o.patchThread(r,c,{resolved:!1},i)},d=>l(c,{type:"MARK_THREAD_AS_UNRESOLVED_ERROR",roomId:n,threadId:r},d))},[e,n])}function $m(){return mv(Ce().id)}function mv(n){const e=ze();return k.useCallback(r=>{const i=new Date,{store:o,onMutationFailure:l}=rt(e),c=o.optimisticUpdates.add({type:"subscribe-to-thread",threadId:r,subscribedAt:i});e[ve].httpClient.subscribeToThread({roomId:n,threadId:r}).then(d=>{o.createSubscription(d,c)},d=>l(c,{type:"SUBSCRIBE_TO_THREAD_ERROR",roomId:n,threadId:r},d))},[e,n])}function Mm(){return gv(Ce().id)}function gv(n){const e=ze();return k.useCallback(r=>{const i=new Date,{store:o,onMutationFailure:l}=rt(e),c=o.optimisticUpdates.add({type:"unsubscribe-from-thread",threadId:r,unsubscribedAt:i});e[ve].httpClient.unsubscribeFromThread({roomId:n,threadId:r}).then(()=>{o.deleteSubscription(li("thread",r),c)},d=>l(c,{type:"UNSUBSCRIBE_FROM_THREAD_ERROR",roomId:n,threadId:r},d))},[e,n])}function Fm(n){return R1(Ce().id,n)}function R1(n,e){const r=ze(),{store:i}=rt(r),o=k.useMemo(()=>li("thread",e),[e]),l=mv(n),c=gv(n),d=k.useCallback(()=>l(e),[l,e]),h=k.useCallback(()=>c(e),[c,e]),g=i.outputs.threadSubscriptions,m=k.useCallback(y=>{const w=y.subscriptions[o],R=y.notifications.find(x=>x.kind==="thread"&&x.threadId===e);return w===void 0?{status:"not-subscribed",subscribe:d,unsubscribe:h}:{status:"subscribed",unreadSince:R?.readAt??null,subscribe:d,unsubscribe:h}},[o,e,d,h]);return Cl(g,m,Pt)}function vv(){const n=ld(),e=ze(),r=Ce(),{store:i,getOrCreateSubscriptionSettingsPollerForRoomId:o}=rt(e),l=o(r.id);k.useEffect(()=>void i.outputs.roomSubscriptionSettingsByRoomId.getOrCreate(r.id).waitUntilLoaded()),k.useEffect(()=>(l.inc(),l.pollNowIfStale(),()=>{l.dec()}),[l]);const c=Cl(i.outputs.roomSubscriptionSettingsByRoomId.getOrCreate(r.id).signal);return k.useMemo(()=>[c,n],[c,n])}function O1(){Co();const n=ze(),e=rt(n).store,r=Ce();To(e.outputs.roomSubscriptionSettingsByRoomId.getOrCreate(r.id).waitUntilLoaded());const[i,o]=vv();return i.error,i.isLoading,k.useMemo(()=>[i,o],[i,o])}function A1(n){const[e,r]=k.useState({isLoading:!0}),i=Ce();return k.useEffect(()=>{r({isLoading:!0}),(async()=>{try{const c=await(await i[ve].getTextVersion(n)).arrayBuffer(),d=new Uint8Array(c);r({isLoading:!1,data:d})}catch(l){r({isLoading:!1,error:l instanceof Error?l:new Error("An unknown error occurred while loading this version")})}})()},[i,n]),e}function yv(){const n=ze(),e=Ce(),{store:r,getOrCreateVersionsPollerForRoomId:i}=rt(n),o=i(e.id);return k.useEffect(()=>(o.inc(),o.pollNowIfStale(),()=>o.dec()),[o]),k.useEffect(()=>void r.outputs.versionsByRoomId.getOrCreate(e.id).waitUntilLoaded()),Cl(r.outputs.versionsByRoomId.getOrCreate(e.id).signal)}function x1(){Co();const n=ze(),e=Ce(),r=rt(n).store;To(r.outputs.versionsByRoomId.getOrCreate(e.id).waitUntilLoaded());const i=yv();return i.error,i.isLoading,i}function ld(){const n=ze(),e=Ce();return k.useCallback(r=>{const{store:i,onMutationFailure:o,pollThreadsForRoomId:l}=rt(n),c=pi(n),d=i.optimisticUpdates.add({type:"update-room-subscription-settings",roomId:e.id,userId:c,settings:r});e.updateSubscriptionSettings(r).then(h=>{i.updateRoomSubscriptionSettings(e.id,d,h),r.threads&&l(e.id)},h=>o(d,{type:"UPDATE_ROOM_SUBSCRIPTION_SETTINGS_ERROR",roomId:e.id},h))},[n,e])}function Ro(){Co();const n=Ce();To(n.waitUntilPresenceReady())}function P1(n,e){return Ro(),lv(n,e)}function L1(n,e){return Ro(),Io(n,e)}function N1(){return Ro(),cv()}function D1(n,e){return Ro(),uv(n,e)}function U1(n,e,r){return Ro(),dv(n,e,r)}function j1(){Co();const n=Ce();To(n.waitUntilStorageReady())}function $1(n,e){return j1(),hv(n,e)}function M1(n={}){Co();const e=ze(),r=Ce(),{store:i}=rt(e),o=Zg(r.id,n.query);To(i.outputs.loadingRoomThreads.getOrCreate(o).waitUntilLoaded());const l=pv(n);return l.error,l.isLoading,l}function F1(n){return n===void 0||n?.isLoading?n??{isLoading:!0}:n.error?n:(n.data,{isLoading:!1,url:n.data})}function z1(n){const e=Ce();return B1(n,e.id)}function B1(n,e){const i=ze()[ve].httpClient.getOrCreateAttachmentUrlsStore(e),o=k.useCallback(()=>i.getItemState(n),[i,n]);return k.useEffect(()=>{i.enqueue(n)},[i,n]),Ur(i.subscribe,o,o,F1,Pt)}function V1(n){const e=Ce(),{attachmentUrlsStore:r}=e[ve],i=k.useCallback(()=>r.getItemState(n),[r,n]),o=i();if(!o||o.isLoading)throw r.enqueue(n);if(o.error)throw o.error;const l=k.useSyncExternalStore(r.subscribe,i,i);return l.isLoading,l.error,{isLoading:!1,url:l.data,error:void 0}}function H1(n){return f1(n)}_d(db,fb,hb);const W1=rb({publicApiKey:"pk_prod_2uHhOQ-SrPlXZZyyNBgdFst8o5D9VReJnvcgdkFHuTqebbAPpSpX4N-MTV3uA8EE",throttle:16,resolveUsers:async({userIds:n})=>n.map(e=>({id:e,info:{name:`User ${e.slice(-3)}`,color:`#${Math.floor(Math.random()*16777215).toString(16)}`}}))}),{RoomProvider:K1,useMyPresence:q1,useUpdateMyPresence:aC,useOthers:G1,useStorage:J1,useMutation:zm,useHistory:lC,useCanUndo:uC,useCanRedo:cC,useRoom:dC}=H1(W1);function Q1({onSave:n,initialContent:e="",onTypingChange:r,onError:i}){const o=k.useRef(null),[,l]=q1(),c=G1(),d=J1(D=>D?.content||""),[h,g]=k.useState(!1),m=zm(({storage:D},b)=>{D.set("content",b),D.set("lastModified",Date.now())},[]),y=zm(({storage:D},b)=>{!D.get("content")&&b&&(D.set("content",b),D.set("lastModified",Date.now()))},[]);k.useEffect(()=>{if(e&&!h){const D=setTimeout(()=>{y(e),g(!0)},100);return()=>clearTimeout(D)}},[e,h,y,d]);const w=k.useCallback(D=>{const b=D.target.value;m(b);const A=D.target,C=A.selectionStart,$=A.selectionEnd;l({selection:{anchor:C,focus:$}}),r&&r(b.length>0),n&&n(b)},[m,n,r,l]),R=k.useCallback(()=>{if(!o.current)return;const D=o.current,b=D.selectionStart,A=D.selectionEnd;l({selection:{anchor:b,focus:A}})},[l]),x=k.useCallback(D=>{if(!o.current)return;const b=o.current.getBoundingClientRect(),A=D.clientX-b.left,C=D.clientY-b.top;l({cursor:{x:A,y:C}})},[l]),E=k.useCallback(()=>{l({cursor:null})},[l]),P=k.useCallback(D=>{if(D.key==="Tab"){D.preventDefault();const b=D.currentTarget,A=b.selectionStart,C=b.selectionEnd,$=d||"",F=$.substring(0,A)+"	"+$.substring(C);m(F),setTimeout(()=>{b.selectionStart=b.selectionEnd=A+1},0)}},[d,m]);return k.useEffect(()=>{o.current&&(o.current.style.height="auto",o.current.style.height=o.current.scrollHeight+"px")},[d]),k.useEffect(()=>{o.current&&o.current.focus()},[]),ye.jsxs("div",{className:"collaborative-editor",children:[ye.jsx("div",{className:"cursors-overlay",children:c.map(({connectionId:D,presence:b})=>b?.cursor?ye.jsxs("div",{className:"live-cursor",style:{left:b.cursor.x,top:b.cursor.y,color:b.user?.color||"#000"},children:[ye.jsx("div",{className:"cursor-pointer"}),ye.jsx("div",{className:"cursor-label",children:b.user?.name||"Anonymous"})]},D):null)}),ye.jsx("div",{className:"selections-overlay",children:c.map(({connectionId:D,presence:b})=>b?.selection?ye.jsx("div",{className:"selection-highlight",style:{backgroundColor:b.user?.color||"#000",opacity:.3}},`selection-${D}`):null)}),ye.jsx("textarea",{ref:o,value:d||"",onChange:w,onKeyDown:P,onSelect:R,onMouseMove:x,onMouseLeave:E,className:"editor-textarea",placeholder:"Start typing..."}),ye.jsx("div",{className:"typing-indicators",children:c.map(({connectionId:D,presence:b})=>b?.selection?ye.jsxs("div",{className:"typing-indicator",style:{color:b.user?.color||"#000"},children:[b.user?.name||"Anonymous"," is typing..."]},D):null)})]})}class Y1 extends Vm.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("App Error:",e,r)}render(){return this.state.hasError?ye.jsxs("div",{style:{padding:"20px",fontFamily:"monospace"},children:[ye.jsx("h1",{children:"Something went wrong"}),ye.jsxs("p",{children:["Error: ",this.state.error?.message]}),ye.jsx("button",{onClick:()=>window.location.reload(),children:"Reload"})]}):this.props.children}}function X1(){return ye.jsx("div",{className:"logo","data-name":"Jottic",children:ye.jsx("svg",{className:"logo-svg",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 50 13",children:ye.jsxs("g",{id:"Jottic",children:[ye.jsx("path",{d:zs.p1c133f80,fill:"var(--fill-0, #464646)",id:"Vector"}),ye.jsx("path",{d:zs.p16897f80,fill:"var(--fill-0, #464646)",id:"Vector_2"}),ye.jsx("path",{d:zs.p7476d00,fill:"var(--fill-0, #464646)",id:"Vector_3"}),ye.jsx("path",{d:zs.p1ac03e00,fill:"var(--fill-0, #464646)",id:"Vector_4"}),ye.jsx("path",{d:zs.p2eac9c00,fill:"var(--fill-0, #464646)",id:"Vector_5"}),ye.jsx("path",{d:zs.p7638900,fill:"var(--fill-0, #464646)",id:"Vector_6"})]})})})}function Z1(){return ye.jsxs("div",{className:"header",children:[ye.jsx(X1,{}),ye.jsxs("div",{className:"header-nav",children:[ye.jsx("span",{className:"header-link",children:"dark"}),ye.jsx("span",{className:"header-link",children:"login"})]})]})}function eC(){const[n,e]=k.useState(!1),r=Zn(),o=(()=>{const m=r.pathname;return m==="/"||m===""?"home":m.substring(1)})(),{note:l,loading:c,saving:d,error:h,saveNote:g}=FS(o);return k.useEffect(()=>{const m=()=>{n&&e(!1)};return n&&document.addEventListener("mousemove",m),()=>{document.removeEventListener("mousemove",m)}},[n]),ye.jsxs("div",{className:"app",children:[ye.jsx("div",{className:`header-fade ${n?"faded":""}`,children:ye.jsx(Z1,{})}),ye.jsxs("div",{className:"editor-container",children:[ye.jsx("div",{className:`document-title-fade ${n?"faded":""} ${o==="home"?"hidden":""}`,children:ye.jsxs("div",{className:"document-title",children:["/",o]})}),ye.jsxs("div",{className:"status-container",children:[d&&ye.jsx("span",{className:"status-indicator saving",children:"saving..."}),c&&ye.jsx("span",{className:"status-indicator loading",children:"loading..."}),h&&ye.jsx("span",{className:"status-indicator error",children:"error"})]}),ye.jsx(Q1,{documentTitle:o,onSave:o!=="home"?g:void 0,initialContent:l?.content||"",onTypingChange:e})]})]})}function tC(){const n=Zn(),r=(()=>{const o=n.pathname;return o==="/"||o===""?"home":o.substring(1)})(),i=`document-${r}`;return console.log("App rendering:",{documentTitle:r,roomId:i}),ye.jsx(Y1,{children:ye.jsx(K1,{id:i,initialPresence:{cursor:null,selection:null,user:{name:`User ${Math.floor(Math.random()*1e3)}`,color:`#${Math.floor(Math.random()*16777215).toString(16)}`}},initialStorage:{content:"",lastModified:Date.now()},children:ye.jsx(eC,{})})})}dw.createRoot(document.getElementById("root")).render(ye.jsx(C0,{children:ye.jsx(tC,{})}));
